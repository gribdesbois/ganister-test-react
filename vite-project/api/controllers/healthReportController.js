const _0x362e57=_0x15ad;(function(_0x4b7117,_0x45ed03){const _0xfefe1c=_0x15ad,_0x47d3f1=_0x4b7117();while(!![]){try{const _0x370b98=-parseInt(_0xfefe1c(0x1fe))/0x1*(parseInt(_0xfefe1c(0x267))/0x2)+parseInt(_0xfefe1c(0x1d1))/0x3*(parseInt(_0xfefe1c(0x1d3))/0x4)+parseInt(_0xfefe1c(0x1bc))/0x5+-parseInt(_0xfefe1c(0x1e9))/0x6*(-parseInt(_0xfefe1c(0x26e))/0x7)+parseInt(_0xfefe1c(0x21b))/0x8*(parseInt(_0xfefe1c(0x1cd))/0x9)+parseInt(_0xfefe1c(0x1d4))/0xa+-parseInt(_0xfefe1c(0x1a8))/0xb*(parseInt(_0xfefe1c(0x233))/0xc);if(_0x370b98===_0x45ed03)break;else _0x47d3f1['push'](_0x47d3f1['shift']());}catch(_0x274657){_0x47d3f1['push'](_0x47d3f1['shift']());}}}(_0x3ed1,0xb44ce));const fs=require('fs'),NODEU=require(_0x362e57(0x1fc)),_=require(_0x362e57(0x1c8)),driver=require(_0x362e57(0x1b8))['db'],generateForm=require(_0x362e57(0x26c));let datamodel=require(_0x362e57(0x1f5));function _0x3ed1(){const _0x1bd18c=['6809xXQYyH','MATCH\x20(n)\x20WHERE\x20n._lockState\x20=\x20\x22true\x22\x20SET\x20n._lockState\x20=\x20true\x20RETURN\x20count(n)','Check\x20for\x20several\x20boolean\x20properties\x20that\x20are\x20stored\x20as\x20String','\x20is\x20missing\x20linkname\x20property.','Check\x20for\x20missing\x20state\x20property\x20in\x20each\x20node','Regenerate\x20UI\x20Forms','addLifecycleDefaultState','now','MATCH\x20(n)\x20WHERE\x20(n._createdByName\x20=\x20\x22undefined\x22\x20OR\x20NOT\x20EXISTS(n._createdByName))\x20RETURN\x20n._id\x20as\x20_id,\x20n._createdBy\x20as\x20_createdBy','message','get','MATCH\x20(n)\x20WHERE\x20(n._lockState\x20=\x20\x22false\x22\x20OR\x20\x20n._lockState\x20=\x20\x22true\x22\x20OR\x20n._lockable\x20=\x20\x22true\x22\x20OR\x20n._lockable\x20=\x20\x22false\x22)\x20RETURN\x20count(n)\x20as\x20count','Find\x20\x22consumes\x22\x20circular\x20references\x20for\x20parts','Error\x20Mapping\x20Lifecycle\x20State','session','Translation\x20for\x20','../../config/config','\x22})\x20SET\x20n._lockState\x20=\x20false\x20REMOVE\x20n._lockedByName,\x20n._lockedBy,\x20n._lockedOn','nodesMissingLockable','Error:\x20','4237670NFXmHG','Nodes\x20Missing\x20LockState','Click\x20to\x20Regenerate\x20Forms','end','query','PermissionSet\x20for\x20','Check\x20for\x20missing\x20_createdByName\x20property\x20in\x20each\x20node','Nodes\x20Missing\x20State','Nodetype\x20\x27','Relationships\x20Missing\x20LinkName','nodetypesMissingTranslation','nodesmissinglockstate','lodash','Check\x20if\x20a\x20relationship\x20is\x20missing\x20the\x20linkName\x20property','/../../log/ressourcesAnalytics.log','MATCH\x20(n)\x20WHERE\x20n._lockable\x20=\x20\x22true\x22\x20SET\x20n._lockable\x20=\x20true\x20RETURN\x20count(n)','Datamodel','9xTgtzE','../models/coreItems','labels','Errors\x20Found','1645347AVthwZ','MATCH\x20(n)\x20WHERE\x20((n._lockedByName\x20=\x20\x22undefined\x22\x20OR\x20NOT\x20EXISTS(n._lockedByName))\x20AND\x20n._lockState\x20=\x20true)\x20RETURN\x20count(n)\x20as\x20count','4nSxyzj','1426850GpfyZh','desc','beginTransaction','fas\x20fa-random','status','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20role:\x20\x27manager\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20canCreate:true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','Nodetypes\x20Missing\x20Core\x20Items','\x20RETURN\x20count(n)','MATCH\x20(n)\x20WHERE\x20(n._createdByName\x20=\x20\x22undefined\x22\x20OR\x20NOT\x20EXISTS(n._createdByName))\x20\x20RETURN\x20count(n)\x20as\x20count','Check\x20for\x20missing\x20translation\x20for\x20each\x20nodetype','Group','MATCH\x20(n\x20{_id:\x20\x22','Ganister','name','run','utf8','join','schema','null','map','\x20{_state:\x20\x22','2900442NpHzrX','MATCH\x20(n)\x20WHERE\x20(NOT\x20n:PermissionSet\x20AND\x20NOT\x20n:Group\x20AND\x20NOT\x20n:user\x20AND\x20NOT\x20n:Ganister\x20AND\x20NOT\x20EXISTS(n._lockState))\x20RETURN\x20n','Relationship\x20','start','Regenerates\x20UI\x20Forms\x20for\x20all\x20nodetypes','list','Use\x20action\x20below\x20to\x20regenerate\x20forms','MATCH\x20(user:user)\x20RETURN\x20user',',\x20_ref\x20=\x20','linkName','datamodel.json','Translations\x20missing...','../../build/datamodel.json','button','\x20references\x20found','Default\x20Translation\x20for\x20','readFile','_createdBy','writeFile','uuid','\x20misconfigured\x20nodetypes\x20found','896353zgszCC','count','transitions','path','push','isEmpty','assets/locales/',')\x20Nodetype\x20','filter','MATCH\x20(n:','\x22\x20found\x20on\x20','\x20nodes\x20have\x20undefined\x20_createdByName','finally','\x20cannot\x20be\x20found\x20in\x20db','fab\x20fa-wpforms','\x20state\x20','fa\x20fa-exclamation-triangle','\x22\x20RETURN\x20n','\x20nodes','Failed\x20reading\x20default\x20language\x20file','lifecycle','../helpers/controllerHelpers',')\x20WHERE\x20n._state=\x22','nodetypesRegenerateUIForms','nodetypeDefinitions','info','catch','parse','Nodetype\x20Permissions','542536JARUjj','\x20not\x20found','json','Nodes\x20Missing\x20LockedByName','../middlewares/basics','\x20translations','reject','fa\x20fa-low-vision','Check\x20for\x20missing\x20nodetype\x20permissions','nodetypeFixMissingCoreItems','from','forEach','user',']\x20RETURN\x20DISTINCT(n._state),\x20count(n),\x20COLLECT(n._id),\x20labels(n)\x20as\x20_type','send','type','indexOf','Start:\x20_id\x20=\x20','form','records','\x27,\x20_createdOn:\x20','\x20=>\x20End:\x20_id\x20=\x20','Database','write','27564VLEPtz','node','_id','MATCH\x20(n)\x20WHERE\x20(NOT\x20n:PermissionSet\x20AND\x20NOT\x20n:file\x20AND\x20NOT\x20n:Group\x20AND\x20NOT\x20n:user\x20AND\x20NOT\x20n:Ganister\x20AND\x20NOT\x20EXISTS(n._lockable))\x20RETURN\x20n','locale-default.json','addLifecycle','nodesMissingCreatedByName','fa\x20fa-unlock-alt','MATCH\x20(n)\x20WHERE\x20NOT\x20EXISTS(n._lockState)\x20SET\x20n._lockState\x20=\x20','Fix\x20it','Check\x20for\x20missing\x20_lockedByName\x20property\x20in\x20each\x20node','includes','listFix','\x20with\x20_id:\x20','MATCH\x20(permissionSet:PermissionSet)\x20RETURN\x20permissionSet','elementType','Circular\x20References','\x20has\x20not\x20a\x20valid\x20relationship','close','split','\x20nodes\x20have\x20undefined\x20_lockedByName','\x20missing\x20from\x20or\x20to\x20State','fas\x20fa-undo-alt','nodesBooleanPropertiesAsString','mapLifecycleState','Nodetype\x20','relationship','length',':\x20Wrong\x20state\x20\x22',')\x20WHERE\x20NOT\x20EXISTS(n._state)\x20OR\x20NOT\x20n._state\x20IN\x20[','validFor','find','permissionSet','Nodetypes\x20Missing\x20Translation','nodesMissingLockedByName','\x22\x20set\x20n._state=\x22','error','\x22})\x20SET\x20n._createdByName\x20=\x20\x27System\x27','Update\x20Lockable\x20State','Lifecycles\x20with\x20Transitions\x20missing\x20states','\x20with\x20_ref:\x20','nodetype','buildNGForm','states','then','healthReportController.js','fa\x20fa-forward','\x20error','Fix','\x20nodes\x20found','\x27\x20does\x20not\x20have\x20a\x20lifecycle','core','2qygFPN','\x20Invalid\x20relationships\x20found','MATCH\x20(n)\x20WHERE\x20n._lockState\x20=\x20\x22false\x22\x20SET\x20n._lockState\x20=\x20false\x20RETURN\x20count(n)','Query\x20fails','Success','../utils/generateForm','../utils/datamodelUtil','21fZIwzM','{\x22logs\x22:[','lockable','_fields','properties','stateMapping','./build/','\x22})\x20SET\x20n._lockedByName\x20=\x20\x22',')\x20WHERE\x20NOT\x20EXISTS(n._state)\x20set\x20n._state=\x22','findIndex','Resolved\x20method\x20does\x20not\x20exist','fa\x20fa-lock','all','Regenerate\x20Forms','Check\x20for\x20missing\x20_lockState\x20property\x20in\x20each\x20node','prop_'];_0x3ed1=function(){return _0x1bd18c;};return _0x3ed1();}const coreItems=require(_0x362e57(0x1ce)),helpers=require(_0x362e57(0x213)),basics=require(_0x362e57(0x21f)),datamodelUtil=require(_0x362e57(0x26d)),languageFolders=_0x362e57(0x204),buildFolder=_0x362e57(0x19e),datamodelFile=buildFolder+_0x362e57(0x1f3),{logAndReturn}=helpers,nodetypeNames=datamodel['nodetypeDefinitions']['map'](_0x57cf2a=>_0x57cf2a[_0x362e57(0x1e1)]),nodesMissingLockState=()=>{const _0x26d03a=_0x362e57,_0x4a0382=driver['session'](),_0x7baabb={'id':0x1,'title':_0x26d03a(0x1bd),'description':_0x26d03a(0x1a6),'category':'Database','icon':_0x26d03a(0x1a3),'resolveMethod':_0x26d03a(0x1c7),'error':![],'message':'','query':_0x26d03a(0x1ea),'list':[],'button':_0x26d03a(0x26b)};return _0x4a0382[_0x26d03a(0x1e2)](_0x7baabb['query'])[_0x26d03a(0x25f)](_0x542b41=>{const _0x2d3977=_0x26d03a,_0xca1ba5=_0x542b41[_0x2d3977(0x22e)]['length'];return _0xca1ba5&&(_0x542b41['records'][_0x2d3977(0x1e7)](_0x322ea4=>_0x7baabb['list'][_0x2d3977(0x202)]({'errorMsg':'Nodetype:\x20'+_0x322ea4['get']('n')[_0x2d3977(0x1cf)][0x0]+_0x2d3977(0x240)+_0x322ea4[_0x2d3977(0x1b2)]('n')[_0x2d3977(0x19c)]['_id']})),_0x7baabb[_0x2d3977(0x257)]=!![],_0x7baabb[_0x2d3977(0x1b1)]=_0x2d3977(0x1bb)+_0xca1ba5+'\x20nodes\x20found',_0x7baabb[_0x2d3977(0x1f6)]=_0x2d3977(0x23c)),_0x7baabb;})[_0x26d03a(0x218)](_0x39c995=>{const _0x2ee15e=_0x26d03a;console[_0x2ee15e(0x257)](_0x39c995);})[_0x26d03a(0x20a)](()=>_0x4a0382[_0x26d03a(0x245)]());},nodesMissingLockable=_0x2a34fb=>{const _0x59dd1b=_0x362e57,_0x16270e=driver[_0x59dd1b(0x1b6)](),_0xf87981={'id':0x2,'title':'Nodes\x20Missing\x20Lockable','description':'Check\x20for\x20missing\x20lockable\x20property\x20in\x20each\x20node','category':_0x59dd1b(0x231),'icon':_0x59dd1b(0x23a),'resolveMethod':_0x59dd1b(0x1ba),'error':![],'message':'','query':_0x59dd1b(0x236),'list':_0x2a34fb,'button':_0x59dd1b(0x26b),'viewProblemList':!![]};return _0x16270e[_0x59dd1b(0x1e2)](_0xf87981[_0x59dd1b(0x1c0)])[_0x59dd1b(0x25f)](_0x530ba7=>{const _0x2b687b=_0x59dd1b,_0x2e6ca3=[];return _0x530ba7[_0x2b687b(0x22e)][_0x2b687b(0x1e7)]((_0x54bb1d,_0x184e67)=>{const _0x9f2393=_0x2b687b,{_id:_0xa96643}=_0x54bb1d['get']('n')[_0x9f2393(0x19c)],{_ref:_0x488b0b}=_0x54bb1d[_0x9f2393(0x1b2)]('n')[_0x9f2393(0x19c)],_0x379859=_0x54bb1d['get']('n')['labels'][0x0];if(nodetypeNames[_0x9f2393(0x23e)](_0x379859))_0x2e6ca3[_0x9f2393(0x202)]({'errorMsg':_0x184e67+')\x20Nodetype:\x20'+_0x379859+'\x20Node\x20_id:\x20'+_0xa96643+_0x9f2393(0x25b)+_0x488b0b+_0x9f2393(0x262)});}),_0x2e6ca3[_0x2b687b(0x24e)]>0x0&&(_0xf87981['error']=!![],_0xf87981[_0x2b687b(0x1b1)]=_0x2b687b(0x1bb)+_0x2e6ca3[_0x2b687b(0x24e)]+'\x20nodes\x20found',_0xf87981[_0x2b687b(0x1f6)]=_0x2b687b(0x259),_0xf87981['list']=_0xf87981[_0x2b687b(0x1ee)]['concat'](_0x2e6ca3)),_0xf87981;})[_0x59dd1b(0x218)](_0xb22022=>{const _0x131a2c=_0x59dd1b;console[_0x131a2c(0x257)](_0xb22022);})['finally'](()=>_0x16270e[_0x59dd1b(0x245)]());},nodesMissingState=_0x47d157=>{const _0x4e3df0=_0x362e57,_0x143429={'id':0x8,'title':_0x4e3df0(0x1c3),'description':_0x4e3df0(0x1ac),'category':'Database','icon':_0x4e3df0(0x261),'resolveMethod':_0x4e3df0(0x23f),'error':![],'message':'','queries':[],'list':[],'button':_0x4e3df0(0x26b),'viewProblemList':!![]},_0x4bbfec=[];return datamodel['nodetypeDefinitions']['filter'](_0x1d8d51=>_0x1d8d51[_0x4e3df0(0x242)]===_0x4e3df0(0x234)&&![_0x4e3df0(0x227),_0x4e3df0(0x1e0),'PermissionSet',_0x4e3df0(0x1de)][_0x4e3df0(0x23e)](_0x1d8d51[_0x4e3df0(0x1e1)]))[_0x4e3df0(0x1e7)](_0x12b6f6=>{const _0x3ffb43=_0x4e3df0;if(_0x12b6f6&&_0x12b6f6[_0x3ffb43(0x212)]&&_0x12b6f6[_0x3ffb43(0x212)][_0x3ffb43(0x25e)][_0x3ffb43(0x24e)]>0x0){const _0x194f84=_0x12b6f6['lifecycle'][_0x3ffb43(0x25e)][_0x3ffb43(0x1e7)](_0x362264=>'\x27'+_0x362264[_0x3ffb43(0x1e1)]+'\x27'),_0x2c51e3=_0x194f84[_0x3ffb43(0x1e4)](','),_0x572d38=_0x3ffb43(0x207)+_0x12b6f6[_0x3ffb43(0x1e1)]+_0x3ffb43(0x250)+_0x2c51e3+_0x3ffb43(0x228),_0x51eafc=driver[_0x3ffb43(0x1b6)]();_0x4bbfec['push'](_0x51eafc[_0x3ffb43(0x1e2)](_0x572d38)[_0x3ffb43(0x25f)](_0x5ec09b=>{const _0x404795=_0x3ffb43;_0x5ec09b[_0x404795(0x22e)]['map'](_0xd69bb=>{const _0x524477=_0x404795,_0xc6b430=_0xd69bb[_0x524477(0x19b)],_0x288af3={'errorMsg':_0x524477(0x24c)+_0xc6b430[0x3]+_0x524477(0x24f)+_0xc6b430[0x0]+_0x524477(0x208)+_0xc6b430[0x1]+_0x524477(0x210),'correction':{'action':_0x524477(0x19d),'availableStates':_0x194f84,'errorState':_0xc6b430[0x0],'nodetypeName':_0xc6b430[0x3]}};_0x143429[_0x524477(0x1ee)][_0x524477(0x202)](_0x288af3);});}));}else{if(!_0x12b6f6)_0x143429[_0x3ffb43(0x1ee)][_0x3ffb43(0x202)]({'errorMsg':_0x3ffb43(0x1c4)+_0x12b6f6[_0x3ffb43(0x1e1)]+'\x27\x20does\x20not\x20exist','correction':''});else{if(!_0x12b6f6['lifecycle'])_0x143429['list']['push']({'errorMsg':_0x3ffb43(0x1c4)+_0x12b6f6[_0x3ffb43(0x1e1)]+_0x3ffb43(0x265),'correction':{'action':_0x3ffb43(0x238),'nodetypeName':_0x12b6f6[_0x3ffb43(0x1e1)]}});else _0x12b6f6[_0x3ffb43(0x212)][_0x3ffb43(0x25e)][_0x3ffb43(0x24e)]<0x1&&_0x143429[_0x3ffb43(0x1ee)][_0x3ffb43(0x202)]({'errorMsg':_0x3ffb43(0x1c4)+_0x12b6f6['name']+'\x27\x20has\x20a\x20lifecycle\x20but\x20no\x20state','correction':{'action':_0x3ffb43(0x1ae),'nodetypeName':_0x12b6f6[_0x3ffb43(0x1e1)]}});}}}),Promise[_0x4e3df0(0x1a4)](_0x4bbfec)[_0x4e3df0(0x25f)](()=>{const _0x3daef5=_0x4e3df0;return _0x143429[_0x3daef5(0x1ee)]['length']>0x0&&(_0x143429[_0x3daef5(0x257)]=!![],_0x143429[_0x3daef5(0x1b1)]=_0x3daef5(0x1bb)+_0x143429[_0x3daef5(0x1ee)][_0x3daef5(0x24e)]+'\x20found',_0x143429[_0x3daef5(0x1f6)]=_0x3daef5(0x263)),_0x143429;});},nodetypesMissingTranslation=()=>{const _0x177776=_0x362e57,_0x1a84ab={'id':0x3,'title':_0x177776(0x254),'description':_0x177776(0x1dd),'category':'Datamodel','icon':'fa\x20fa-language','resolveMethod':_0x177776(0x1c6),'error':![],'message':'','query':'','list':[],'button':'Success','viewProblemList':!![]};return fs['readFile'](languageFolders+_0x177776(0x237),{'encoding':_0x177776(0x1e3)},(_0x7bf40,_0x5b904e)=>{const _0x42c7e1=_0x177776;if(_0x7bf40)return _0x1a84ab[_0x42c7e1(0x257)]=!![],_0x1a84ab['message']=_0x42c7e1(0x211),_0x1a84ab[_0x42c7e1(0x1f6)]='ERROR',_0x1a84ab;const _0x470ee2=JSON[_0x42c7e1(0x219)](_0x5b904e);return datamodel[_0x42c7e1(0x216)][_0x42c7e1(0x1e7)](_0x40ae09=>{const _0x5018ee=_0x42c7e1,_0x595fc5=_0x470ee2['default'][_0x5018ee(0x25c)][_0x40ae09[_0x5018ee(0x1e1)]];!_0x595fc5&&(_0x1a84ab[_0x5018ee(0x1ee)][_0x5018ee(0x202)]({'errorMsg':_0x5018ee(0x1f8)+_0x40ae09[_0x5018ee(0x1e1)]+_0x5018ee(0x21c)}),_0x1a84ab['error']=!![],_0x1a84ab[_0x5018ee(0x1b1)]=_0x5018ee(0x1f4),_0x1a84ab[_0x5018ee(0x1f6)]=_0x5018ee(0x23c));if(!_[_0x5018ee(0x203)](_0x40ae09[_0x5018ee(0x19c)])){const _0x12bd26=_0x470ee2['nodetype'][_0x40ae09[_0x5018ee(0x1e1)]];if(!_0x12bd26)_0x1a84ab[_0x5018ee(0x1ee)][_0x5018ee(0x202)]({'errorMsg':_0x5018ee(0x1b7)+_0x40ae09[_0x5018ee(0x1e1)]+_0x5018ee(0x21c)}),_0x1a84ab[_0x5018ee(0x257)]=!![],_0x1a84ab[_0x5018ee(0x1b1)]='Translations\x20missing...',_0x1a84ab[_0x5018ee(0x1f6)]='Fix\x20it';else{let _0xb43a3a=0x0;_0x40ae09[_0x5018ee(0x19c)][_0x5018ee(0x1e7)](_0x1974d0=>{const _0x591865=_0x5018ee;!_0x12bd26[_0x1974d0[_0x591865(0x1e1)]]&&(_0xb43a3a+=0x1);}),_0xb43a3a&&(_0x1a84ab['list']['push']({'errorMsg':'Translation\x20for\x20'+_0x40ae09['name']+'\x20is\x20missing\x20'+_0xb43a3a+_0x5018ee(0x220)}),_0x1a84ab[_0x5018ee(0x257)]=!![],_0x1a84ab[_0x5018ee(0x1b1)]=_0x5018ee(0x1f4));}}}),_0x1a84ab;}),_0x1a84ab;},nodesBooleanPropertiesAsString=()=>{const _0x9c6d3f=_0x362e57,_0x17eeb4=driver[_0x9c6d3f(0x1b6)](),_0xe1ce36={'id':0x4,'title':'Boolean\x20Properties\x20stored\x20as\x20String','description':_0x9c6d3f(0x1aa),'category':_0x9c6d3f(0x231),'icon':_0x9c6d3f(0x20e),'resolveMethod':_0x9c6d3f(0x24a),'error':![],'message':'','query':_0x9c6d3f(0x1b3),'list':[],'button':_0x9c6d3f(0x26b),'viewProblemList':!![]};return _0x17eeb4['run'](_0xe1ce36[_0x9c6d3f(0x1c0)])[_0x9c6d3f(0x25f)](_0x35d801=>{const _0x49128e=_0x9c6d3f,_0x53d465=_0x35d801[_0x49128e(0x22e)][0x0][_0x49128e(0x1b2)](_0x49128e(0x1ff));return _0x53d465&&(_0xe1ce36[_0x49128e(0x257)]=!![],_0xe1ce36[_0x49128e(0x1b1)]=_0x49128e(0x1bb)+_0x53d465+_0x49128e(0x264),_0xe1ce36['button']='Fix\x20it'),_0xe1ce36;})[_0x9c6d3f(0x218)](_0x3f3383=>{const _0x5b5221=_0x9c6d3f;console[_0x5b5221(0x257)](_0x3f3383);})[_0x9c6d3f(0x20a)](()=>_0x17eeb4[_0x9c6d3f(0x245)]());},nodetypesRegenerateUIForms=()=>{const _0x104090=_0x362e57,_0x4ad045={'id':0x5,'title':_0x104090(0x1ad),'description':_0x104090(0x1ed),'category':_0x104090(0x1cc),'icon':_0x104090(0x20c),'resolveMethod':_0x104090(0x215),'error':![],'message':_0x104090(0x1ef),'query':'','list':[_0x104090(0x1be)],'button':_0x104090(0x1a5),'executable':!![],'viewProblemList':!![]};return _0x4ad045;},circularReferencesPart=()=>{const _0x169fde=_0x362e57,_0x4a7abd=driver['session'](),_0xc274db={'id':0x6,'title':_0x169fde(0x243),'description':'Check\x20for\x20circular\x20references\x20for\x20all\x20parts','category':_0x169fde(0x231),'icon':_0x169fde(0x249),'resolveMethod':null,'error':![],'message':_0x169fde(0x1b4),'query':'MATCH\x20path\x20=\x20(n:part)-[:consumes*..20]->(n)\x20RETURN\x20path','list':[],'button':_0x169fde(0x26b),'viewProblemList':!![]};return _0x4a7abd[_0x169fde(0x1e2)](_0xc274db['query'])['then'](_0x15fa07=>{const _0x2f2290=_0x169fde,_0x2d48cf=_0x15fa07[_0x2f2290(0x22e)][_0x2f2290(0x24e)];return _0x2d48cf&&(_0xc274db[_0x2f2290(0x257)]=!![],_0xc274db[_0x2f2290(0x1b1)]='Error:\x20'+_0x2d48cf+_0x2f2290(0x1f7),_0xc274db['button']=_0x2f2290(0x1a2),_0x15fa07[_0x2f2290(0x22e)][_0x2f2290(0x1e7)](_0x3d8a1f=>_0xc274db[_0x2f2290(0x1ee)][_0x2f2290(0x202)]({'errorMsg':_0x2f2290(0x22c)+_0x3d8a1f[_0x2f2290(0x1b2)](_0x2f2290(0x201))[_0x2f2290(0x1ec)][_0x2f2290(0x19c)][_0x2f2290(0x235)]+_0x2f2290(0x1f1)+_0x3d8a1f[_0x2f2290(0x1b2)](_0x2f2290(0x201))[_0x2f2290(0x1ec)][_0x2f2290(0x19c)]['_ref']+_0x2f2290(0x230)+_0x3d8a1f[_0x2f2290(0x1b2)](_0x2f2290(0x201))[_0x2f2290(0x1bf)]['properties'][_0x2f2290(0x235)]+_0x2f2290(0x1f1)+_0x3d8a1f[_0x2f2290(0x1b2)](_0x2f2290(0x201))['end'][_0x2f2290(0x19c)]['_ref']}))),_0xc274db;})[_0x169fde(0x218)](_0x201a38=>{const _0x5b6e41=_0x169fde;console[_0x5b6e41(0x257)](_0x201a38);})['finally'](()=>_0x4a7abd[_0x169fde(0x245)]());},nodetypePermissions=()=>{const _0x43b60e=_0x362e57,_0x1fbcea=driver['session'](),_0x3847f7={'id':0x7,'title':_0x43b60e(0x21a),'description':_0x43b60e(0x223),'category':_0x43b60e(0x231),'icon':_0x43b60e(0x222),'resolveMethod':'nodetypePermissions','error':![],'message':'','query':_0x43b60e(0x241),'list':[],'button':_0x43b60e(0x26b),'viewProblemList':!![]};return _0x1fbcea[_0x43b60e(0x1e2)](_0x3847f7[_0x43b60e(0x1c0)])['then'](_0x5c18e5=>{const _0x35de6f=_0x43b60e,_0x3692b3=[],_0x133064=[];return _0x5c18e5[_0x35de6f(0x22e)][_0x35de6f(0x1e7)](_0x37908b=>_0x3692b3[_0x35de6f(0x202)](_0x37908b[_0x35de6f(0x1b2)](_0x35de6f(0x253))[_0x35de6f(0x19c)])),datamodel[_0x35de6f(0x216)][_0x35de6f(0x206)](_0x430ce5=>_0x430ce5['elementType']===_0x35de6f(0x234))[_0x35de6f(0x1e7)](_0x39ca5f=>{const _0x4f92bc=_0x35de6f;_0x3692b3[_0x4f92bc(0x1a1)](_0x253eca=>_0x253eca[_0x4f92bc(0x1e1)]===_0x39ca5f[_0x4f92bc(0x1e1)])===-0x1&&_0x133064[_0x4f92bc(0x202)]({'errorMsg':_0x4f92bc(0x1c1)+_0x39ca5f[_0x4f92bc(0x1e1)]+_0x4f92bc(0x20b)});}),_0x133064[_0x35de6f(0x24e)]&&(_0x3847f7[_0x35de6f(0x257)]=!![],_0x3847f7[_0x35de6f(0x1b1)]=_0x35de6f(0x1bb)+_0x133064[_0x35de6f(0x24e)]+'\x20permissions\x20missing',_0x3847f7[_0x35de6f(0x1f6)]=_0x35de6f(0x23c),_0x3847f7[_0x35de6f(0x1ee)]=_0x133064),_0x3847f7;})[_0x43b60e(0x218)](_0x6ab8b5=>{const _0x5c3692=_0x43b60e;console[_0x5c3692(0x257)](_0x6ab8b5);})[_0x43b60e(0x20a)](()=>_0x1fbcea[_0x43b60e(0x245)]());},nodePropsWrongRelationship=()=>{const _0x4c5ab9=_0x362e57,_0x29ecfc={'id':0xb,'title':'Node\x20Properties\x20Relationships','description':'Check\x20if\x20node\x20properties\x20have\x20valid\x20relationships','category':_0x4c5ab9(0x231),'icon':'fas\x20fa-link','resolveMethod':null,'error':![],'message':'','query':'','list':[],'button':'Success','viewProblemList':!![]};return new Promise(_0x39bbb3=>{const _0x3edf41=_0x4c5ab9,_0x8e01a0=datamodel[_0x3edf41(0x216)][_0x3edf41(0x206)](_0x49f93c=>_0x49f93c['elementType']===_0x3edf41(0x24d));datamodel[_0x3edf41(0x216)]['filter'](_0x2480c6=>_0x2480c6[_0x3edf41(0x242)]==='node')[_0x3edf41(0x1e7)](_0x27532c=>{const _0x5d820f=_0x3edf41;_0x27532c[_0x5d820f(0x19c)][_0x5d820f(0x206)](_0x49f7c9=>_0x49f7c9[_0x5d820f(0x22a)]===_0x5d820f(0x234))[_0x5d820f(0x1e7)](_0xe9e3c6=>{const _0x13655b=_0x5d820f;if(_0xe9e3c6[_0x13655b(0x1e1)]!==_0x13655b(0x1fa)){const _0x248eef=_0x8e01a0['find'](_0x1af5d3=>_0x1af5d3['id']===_0xe9e3c6[_0x13655b(0x24d)]);!_0x248eef&&_0x29ecfc[_0x13655b(0x1ee)]['push']({'errorMsg':'Nodetype\x27s\x20'+_0x27532c[_0x13655b(0x1e1)]+'\x20property\x20'+_0xe9e3c6[_0x13655b(0x1e1)]+_0x13655b(0x244)});}});}),_0x29ecfc[_0x3edf41(0x1ee)][_0x3edf41(0x24e)]&&(_0x29ecfc['error']=!![],_0x29ecfc[_0x3edf41(0x1f6)]='Errors\x20Found',_0x29ecfc[_0x3edf41(0x1b1)]=_0x3edf41(0x1bb)+_0x29ecfc[_0x3edf41(0x1ee)]['length']+_0x3edf41(0x268)),_0x39bbb3(_0x29ecfc);});},nodesMissingLockedByName=(_0x23d87b=[])=>{const _0x3dae10=_0x362e57,_0x2a3f35=driver[_0x3dae10(0x1b6)](),_0x14b01e={'id':0xc,'title':_0x3dae10(0x21e),'description':_0x3dae10(0x23d),'category':_0x3dae10(0x231),'icon':'fa\x20fa-unlock-alt','resolveMethod':_0x3dae10(0x255),'error':!_[_0x3dae10(0x203)](_0x23d87b),'message':'','query':_0x3dae10(0x1d2),'list':_0x23d87b,'button':'Success','viewProblemList':!![]};return _0x2a3f35[_0x3dae10(0x1e2)](_0x14b01e[_0x3dae10(0x1c0)])[_0x3dae10(0x25f)](_0x3d9dcd=>{const _0x59f77d=_0x3dae10,_0x35e978=_0x3d9dcd[_0x59f77d(0x22e)][0x0][_0x59f77d(0x1b2)](_0x59f77d(0x1ff));return _0x35e978&&(_0x14b01e[_0x59f77d(0x257)]=!![],_0x14b01e[_0x59f77d(0x1f6)]='Fix\x20it',_0x14b01e[_0x59f77d(0x1b1)]=_0x59f77d(0x1bb)+_0x35e978+_0x59f77d(0x247)),_0x14b01e;})[_0x3dae10(0x218)](_0x1cbf87=>{console['error'](_0x1cbf87);})[_0x3dae10(0x20a)](()=>_0x2a3f35[_0x3dae10(0x245)]());},nodesMissingCreatedByName=(_0xc00546=[])=>{const _0x59214e=_0x362e57,_0x1aaeb1=driver[_0x59214e(0x1b6)](),_0x254a6e={'id':0xc,'title':'Nodes\x20Missing\x20CreatedByName','description':_0x59214e(0x1c2),'category':_0x59214e(0x231),'icon':'fa\x20fa-font','resolveMethod':_0x59214e(0x239),'error':!_[_0x59214e(0x203)](_0xc00546),'message':'','query':_0x59214e(0x1dc),'list':_0xc00546,'button':_0x59214e(0x26b),'viewProblemList':!![]};return _0x1aaeb1[_0x59214e(0x1e2)](_0x254a6e[_0x59214e(0x1c0)])[_0x59214e(0x25f)](_0x466c26=>{const _0xe0a3c8=_0x59214e,_0x51c4b6=_0x466c26['records'][0x0]['get'](_0xe0a3c8(0x1ff));return _0x51c4b6?(_0x254a6e['error']=!![],_0x254a6e[_0xe0a3c8(0x1f6)]='Fix\x20it',_0x254a6e[_0xe0a3c8(0x1b1)]=_0xe0a3c8(0x1bb)+_0x51c4b6+_0xe0a3c8(0x209)):(_0x254a6e[_0xe0a3c8(0x257)]=![],_0x254a6e['button']=_0xe0a3c8(0x26b)),_0x254a6e;})[_0x59214e(0x218)](_0x3c4c52=>{const _0x543896=_0x59214e;console[_0x543896(0x257)](_0x3c4c52);})[_0x59214e(0x20a)](()=>_0x1aaeb1['close']());},relationshipsMissingLinkName=()=>{const _0x5dd84a=_0x362e57,_0x686da7={'id':0xd,'title':_0x5dd84a(0x1c5),'description':_0x5dd84a(0x1c9),'category':_0x5dd84a(0x1cc),'icon':'fas\x20fa-link','resolveMethod':null,'error':![],'message':'','query':'','list':[],'button':'Success','viewProblemList':!![]};return new Promise(_0x58dd40=>{const _0x1d92a7=_0x5dd84a,_0x18c3e6=datamodel[_0x1d92a7(0x216)][_0x1d92a7(0x206)](_0x537599=>_0x537599[_0x1d92a7(0x242)]===_0x1d92a7(0x24d));datamodel[_0x1d92a7(0x216)][_0x1d92a7(0x206)](_0x16cc71=>_0x16cc71[_0x1d92a7(0x242)]===_0x1d92a7(0x24d)&&!_0x16cc71[_0x1d92a7(0x1f2)])[_0x1d92a7(0x1e7)](_0x32980f=>{const _0xa4bfc1=_0x1d92a7;_0x686da7[_0xa4bfc1(0x1ee)][_0xa4bfc1(0x202)]({'errorMsg':_0xa4bfc1(0x1eb)+_0x32980f[_0xa4bfc1(0x1e1)]+_0xa4bfc1(0x1ab)});}),_0x686da7['list'][_0x1d92a7(0x24e)]&&(_0x686da7['error']=!![],_0x686da7['button']=_0x1d92a7(0x1d0),_0x686da7[_0x1d92a7(0x1b1)]=_0x1d92a7(0x1bb)+_0x686da7[_0x1d92a7(0x1ee)][_0x1d92a7(0x24e)]+'\x20invalid\x20relationships\x20found'),_0x58dd40(_0x686da7);});},nodetypeMissingCoreItems=()=>{const _0x2e47f1=_0x362e57,_0x4d8adf={'id':0xe,'title':_0x2e47f1(0x1da),'description':'Check\x20for\x20missing\x20nodetype\x20core\x20items','category':_0x2e47f1(0x1cc),'icon':'fas\x20fa-cubes','resolveMethod':_0x2e47f1(0x224),'error':![],'message':'','list':[],'button':_0x2e47f1(0x26b),'viewProblemList':!![]};return datamodel['nodetypeDefinitions']['filter'](_0x2cbdb6=>_0x2cbdb6['elementType']===_0x2e47f1(0x234)||_0x2cbdb6['elementType']==='relationship')['map'](_0x286558=>{const _0x1b5dfc=_0x2e47f1,_0x1a776b=[],_0x2b1f3a=_0x286558['properties']['filter'](_0x5ae4fd=>_0x5ae4fd[_0x1b5dfc(0x266)]),_0x4e9f67=coreItems['properties'][_0x1b5dfc(0x206)](_0x5640a1=>_0x5640a1[_0x1b5dfc(0x251)][_0x1b5dfc(0x23e)](_0x286558[_0x1b5dfc(0x242)]));_0x4e9f67[_0x1b5dfc(0x1e7)](_0x8ce459=>{const _0x4b64eb=_0x1b5dfc,_0x9d9d2c=_0x2b1f3a[_0x4b64eb(0x252)](_0x22bc7e=>_0x22bc7e[_0x4b64eb(0x1e1)]===_0x8ce459['name']);if(!_0x9d9d2c)_0x1a776b['push'](_0x8ce459[_0x4b64eb(0x1e1)]);});if(_0x1a776b[_0x1b5dfc(0x24e)]>0x0)_0x4d8adf[_0x1b5dfc(0x1ee)][_0x1b5dfc(0x202)]({'errorMsg':_0x1b5dfc(0x24c)+_0x286558[_0x1b5dfc(0x1e1)]+'\x20missing\x20core\x20props:\x20'+_0x1a776b[_0x1b5dfc(0x1e4)](',\x20')});}),_0x4d8adf['list'][_0x2e47f1(0x24e)]>0x0&&(_0x4d8adf[_0x2e47f1(0x257)]=!![],_0x4d8adf['button']=_0x2e47f1(0x23c),_0x4d8adf[_0x2e47f1(0x1b1)]=_0x2e47f1(0x1bb)+_0x4d8adf[_0x2e47f1(0x1ee)][_0x2e47f1(0x24e)]+_0x2e47f1(0x1fd)),_0x4d8adf;},lifecycleMissingStates=()=>{const _0x23a952=_0x362e57,_0x4ee81a={'id':0xe,'title':_0x23a952(0x25a),'description':'Check\x20for\x20missing\x20states\x20referenced\x20in\x20transitions','category':_0x23a952(0x1cc),'icon':_0x23a952(0x1d7),'resolveMethod':'lifecycleFixMissingStates','error':![],'message':'','list':[],'button':_0x23a952(0x26b),'viewProblemList':![]};return datamodel[_0x23a952(0x216)][_0x23a952(0x206)](_0x2b478a=>_0x2b478a[_0x23a952(0x242)]===_0x23a952(0x234))['map'](_0x310b61=>{const _0x1fe7de=_0x23a952,_0x75943d=_0x310b61[_0x1fe7de(0x212)][_0x1fe7de(0x200)],_0x400618=_0x310b61[_0x1fe7de(0x212)][_0x1fe7de(0x25e)];_0x75943d['forEach'](_0x436f11=>{const _0x4970a2=_0x1fe7de,_0x43921c=_[_0x4970a2(0x252)](_0x400618,{'id':_0x436f11[_0x4970a2(0x225)]}),_0x57986f=_[_0x4970a2(0x252)](_0x400618,{'id':_0x436f11['to']});(!_0x43921c||!_0x57986f)&&_0x4ee81a[_0x4970a2(0x1ee)][_0x4970a2(0x202)]({'errorMsg':'Transition\x20'+_0x436f11['id']+_0x4970a2(0x248),'transId':_0x436f11['id']});});}),_0x4ee81a['list'][_0x23a952(0x24e)]>0x0?(_0x4ee81a[_0x23a952(0x257)]=!![],_0x4ee81a[_0x23a952(0x1f6)]=_0x23a952(0x23c),_0x4ee81a[_0x23a952(0x1b1)]=_0x23a952(0x1bb)+_0x4ee81a[_0x23a952(0x1ee)][_0x23a952(0x24e)]+_0x23a952(0x1fd)):(_0x4ee81a[_0x23a952(0x257)]=![],_0x4ee81a['button']=_0x23a952(0x26b)),_0x4ee81a;},resolveNodetypesMissingTranslation=()=>{const _0x53ed42=_0x362e57;fs[_0x53ed42(0x1f9)](languageFolders+_0x53ed42(0x237),{'encoding':_0x53ed42(0x1e3)},(_0x225f3a,_0x2d4604)=>{const _0x620799=_0x53ed42;if(_0x225f3a)return![];const _0x86c727=JSON[_0x620799(0x219)](_0x2d4604);datamodel['nodetypeDefinitions'][_0x620799(0x226)](_0x510bb1=>{const _0x134488=_0x620799,_0x4813e2=_0x86c727['default']['nodetype'][_0x510bb1[_0x134488(0x1e1)]];!_0x4813e2&&(_0x86c727['default'][_0x134488(0x25c)][_0x510bb1[_0x134488(0x1e1)]]=_0x510bb1[_0x134488(0x1e1)]),!_0x86c727[_0x134488(0x25c)][_0x510bb1[_0x134488(0x1e1)]]&&(_0x86c727['nodetype'][_0x510bb1['name']]={}),_0x510bb1[_0x134488(0x19c)][_0x134488(0x226)](_0x2b084c=>{const _0x18f9ec=_0x134488;!_0x86c727[_0x18f9ec(0x25c)][_0x510bb1['name']][_0x2b084c[_0x18f9ec(0x1e1)]]&&(_0x86c727[_0x18f9ec(0x25c)][_0x510bb1[_0x18f9ec(0x1e1)]][_0x2b084c[_0x18f9ec(0x1e1)]]=_0x2b084c['name']);});}),fs[_0x620799(0x1fb)](languageFolders+_0x620799(0x237),JSON['stringify'](_0x86c727,null,'\x09'),{'encoding':_0x620799(0x1e3)},()=>![]);});},resolveNodetypesRegenerateForms=()=>{const _0x177841=_0x362e57;fs[_0x177841(0x1f9)](datamodelFile,{'encoding':_0x177841(0x1e3)},(_0x4b13d6,_0x6e067f)=>{const _0x3863d9=_0x177841;if(_0x4b13d6)return![];datamodel=JSON[_0x3863d9(0x219)](_0x6e067f),datamodel[_0x3863d9(0x216)][_0x3863d9(0x1e7)]((_0x4520cf,_0x5c4180)=>{const _0x34eca0=_0x3863d9;datamodel[_0x34eca0(0x216)][_0x5c4180]['ui'][_0x34eca0(0x22d)]['ng'][_0x34eca0(0x1e5)]=generateForm['buildNgSchema'](_0x4520cf),datamodel['nodetypeDefinitions'][_0x5c4180]['ui']['form']['ng'][_0x34eca0(0x22d)]=generateForm[_0x34eca0(0x25d)](_0x4520cf,datamodel,_0x34eca0(0x216)),datamodel['nodetypeDefinitions'][_0x5c4180]['ui'][_0x34eca0(0x22d)]['ng']['form'][_0x34eca0(0x24e)]===0x0&&(datamodel['nodetypeDefinitions'][_0x5c4180]['ui'][_0x34eca0(0x22d)]['ng'][_0x34eca0(0x1e5)]={});}),datamodelUtil['write'](datamodel,()=>!![],()=>![]);});},updateNodetypePermissions=async()=>{const _0x4045a9=_0x362e57,_0x5c03db=driver['session'](),_0x506709=await _0x5c03db[_0x4045a9(0x1e2)](_0x4045a9(0x241))[_0x4045a9(0x218)](_0xb57288=>{return![];})['finally'](()=>_0x5c03db[_0x4045a9(0x245)]());if(_0x506709){const _0x4b4a00=[],_0x24cbec=[];_0x506709[_0x4045a9(0x22e)][_0x4045a9(0x1e7)](_0x25ffdb=>_0x24cbec[_0x4045a9(0x202)](_0x25ffdb[_0x4045a9(0x1b2)](_0x4045a9(0x253))['properties']));const _0x3c70e1=datamodel[_0x4045a9(0x216)]['filter'](_0x3a2efa=>_0x3a2efa[_0x4045a9(0x242)]==='node');_0x3c70e1['map'](_0x124f61=>{const _0x1acf8c=_0x4045a9,_0x5b5209=NODEU['v1'](),_0x79d47c={'name':_0x124f61[_0x1acf8c(0x1e1)]};_0x24cbec['push'](_0x79d47c),_0x4b4a00['push']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x20(g:Group\x20{\x20name:\x20\x27Administrator\x27\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(p:PermissionSet\x20{\x20name:\x20\x27'+_0x124f61['name']+_0x1acf8c(0x22f)+Date[_0x1acf8c(0x1af)]()+',\x20_id:\x20\x27PS_'+NODEU['v1']()+'\x27\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(g)-[r:accessRole]->(p)\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20r\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20_type:\x20\x27accessRole\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20_id:\x20\x27'+_0x5b5209+_0x1acf8c(0x1d9));});const _0x2231d6=_0x4b4a00[_0x4045a9(0x1e7)](_0x369c0e=>{const _0x4de698=_0x4045a9,_0x3daa3b=driver[_0x4de698(0x1b6)]();return _0x3daa3b['run'](_0x369c0e);}),_0x4b7c53=await Promise[_0x4045a9(0x1a4)](_0x2231d6)['then'](()=>{const _0x33b79f=_0x4045a9;return nodetypePermissions()[_0x33b79f(0x25f)](async _0xd5725e=>{const _0x34ed20=datamodelUtil['write'](datamodel,()=>!![],()=>![]);return _0xd5725e;});});return _0x4b7c53;}};function _0x15ad(_0x4e8cf0,_0x5b0b70){const _0x3ed1a7=_0x3ed1();return _0x15ad=function(_0x15ad2a,_0x19034e){_0x15ad2a=_0x15ad2a-0x199;let _0x47dd15=_0x3ed1a7[_0x15ad2a];return _0x47dd15;},_0x15ad(_0x4e8cf0,_0x5b0b70);}module['exports']={'getHealthReport':(_0x23f062,_0x406b9b)=>{const _0x5b5b96=_0x362e57,_0x24c440=[nodesMissingLockState(),nodesMissingLockable([]),nodesMissingState([]),nodetypesMissingTranslation(),nodesBooleanPropertiesAsString(),nodetypesRegenerateUIForms(),nodetypePermissions(),nodePropsWrongRelationship(),nodesMissingLockedByName([]),nodesMissingCreatedByName([]),relationshipsMissingLinkName(),nodetypeMissingCoreItems(),lifecycleMissingStates()];Promise['all'](_0x24c440)[_0x5b5b96(0x25f)](_0x356927=>_0x406b9b[_0x5b5b96(0x1d8)](0xc8)['json'](_0x356927));},'postNodesMissingLockState':(_0x46f400,_0x92afaa)=>{const _0x1ec2af=_0x362e57,_0x4409ae=driver[_0x1ec2af(0x1b6)](),_0x35d7fa=_0x1ec2af(0x23b)+![]+_0x1ec2af(0x1db);_0x4409ae['run'](_0x35d7fa)[_0x1ec2af(0x25f)](()=>{const _0x33f167=_0x1ec2af;nodesMissingLockState()[_0x33f167(0x25f)](_0x51b466=>_0x92afaa[_0x33f167(0x1d8)](0xc8)['json'](_0x51b466)),_0x4409ae[_0x33f167(0x245)]();})[_0x1ec2af(0x218)](_0x29806a=>{const _0x4e26d6=_0x1ec2af;console['error'](_0x29806a),_0x4409ae[_0x4e26d6(0x245)]();});},'postNodesMissingLockable':(_0x484d55,_0x239ab0)=>{const _0x31895c=_0x362e57,_0x4cfbd0=[],_0x2de874=[],_0xf9060c=driver['session'](),_0x413785=_0xf9060c[_0x31895c(0x1d6)](),_0x3962d6=datamodel[_0x31895c(0x216)]['filter'](_0x16cda1=>_0x16cda1[_0x31895c(0x242)]==='node');_0x3962d6[_0x31895c(0x226)](_0x28f82f=>{const _0x52561e=_0x31895c;_0x28f82f&&_0x28f82f[_0x52561e(0x212)]&&_0x28f82f['lifecycle'][_0x52561e(0x25e)][_0x52561e(0x24e)]>0x0?_0x28f82f[_0x52561e(0x212)][_0x52561e(0x25e)]['map'](_0x322c6a=>{const _0x49a277=_0x52561e;if(_0x322c6a['name']&&_0x322c6a[_0x49a277(0x19a)]!==undefined){const _0x17a71f=_0x49a277(0x207)+_0x28f82f[_0x49a277(0x1e1)]+_0x49a277(0x1e8)+_0x322c6a[_0x49a277(0x1e1)]+'\x22})\x20SET\x20n._lockable\x20=\x20'+_0x322c6a[_0x49a277(0x19a)]+_0x49a277(0x1db);_0x2de874[_0x49a277(0x202)](_0x413785['run'](_0x17a71f)['then'](()=>{}));}else _0x4cfbd0[_0x49a277(0x202)]({'errorMsg':_0x4cfbd0['length']+_0x49a277(0x205)+_0x28f82f[_0x49a277(0x1e1)]+_0x49a277(0x20d)+_0x322c6a[_0x49a277(0x1e1)]+'\x20is\x20not\x20valid'});}):_0x4cfbd0['push']({'errorMsg':_0x4cfbd0['length']+')\x20Nodetype\x20'+_0x28f82f['name']+'\x20definition\x20is\x20not\x20valid'});}),Promise[_0x31895c(0x1a4)](_0x2de874)[_0x31895c(0x25f)](async()=>{const _0x370c01=_0x31895c;await _0x413785['commit'](),_0xf9060c['close'](),nodesMissingLockable(_0x4cfbd0)[_0x370c01(0x25f)](_0x3823ab=>_0x239ab0[_0x370c01(0x1d8)](0xc8)[_0x370c01(0x21d)](_0x3823ab));});},'postNodetypesMissingTranslation':(_0x3a66c8,_0x2e5634)=>{const _0x2d863e=_0x362e57;resolveNodetypesMissingTranslation();const _0x33781a=nodetypesMissingTranslation();_0x2e5634[_0x2d863e(0x1d8)](0xc8)[_0x2d863e(0x21d)](_0x33781a);},'postNodesBooleanPropertiesAsString':(_0x4a46e2,_0x54b7e9)=>{const _0x1084b7=_0x362e57,_0x522c54=[_0x1084b7(0x269),_0x1084b7(0x1a9),'MATCH\x20(n)\x20WHERE\x20n._lockable\x20=\x20\x22false\x22\x20SET\x20n._lockable\x20=\x20false\x20RETURN\x20count(n)',_0x1084b7(0x1cb)],_0x128102=_0x522c54[_0x1084b7(0x1e7)](_0x1554ab=>{const _0x255e68=_0x1084b7,_0x40fa97=driver[_0x255e68(0x1b6)]();return _0x40fa97[_0x255e68(0x1e2)](_0x1554ab);});Promise[_0x1084b7(0x1a4)](_0x128102)[_0x1084b7(0x25f)](()=>{const _0x3db307=_0x1084b7;nodesBooleanPropertiesAsString()[_0x3db307(0x25f)](_0x1af6dd=>_0x54b7e9[_0x3db307(0x1d8)](0xc8)[_0x3db307(0x21d)](_0x1af6dd));});},'postNodetypesRegenerateUIForms':(_0x5bc122,_0x51fe41)=>{const _0x8a5f5b=_0x362e57;resolveNodetypesRegenerateForms();const _0x5b6ddd=nodetypesRegenerateUIForms();_0x51fe41[_0x8a5f5b(0x1d8)](0xc8)[_0x8a5f5b(0x21d)](_0x5b6ddd);},'updateNodetypePermissions':async()=>{const _0x27d7be=await updateNodetypePermissions();return _0x27d7be;},'postNodetypePermissions':async(_0x4d5ab2,_0x9b516b)=>{const _0x23257e=_0x362e57,_0x4863bf=await updateNodetypePermissions();return _0x9b516b['status'](0xc8)[_0x23257e(0x229)](_0x4863bf);},'postNodesMissingLockedByName':(_0x3c8898,_0x9dc809)=>{const _0x4a35cb=_0x362e57,_0x1b0fe1=datamodel['nodetypeDefinitions'][_0x4a35cb(0x252)](_0xb6ce93=>_0xb6ce93['name']===_0x4a35cb(0x227)),_0x1b9ae9=driver[_0x4a35cb(0x1b6)]();_0x1b9ae9['run'](_0x4a35cb(0x1f0))[_0x4a35cb(0x25f)](_0x1e2ee4=>{const _0xd7210e=_0x4a35cb,_0x1ffd50=[],_0x7af460=[],_0x3ec85a=[],_0x2e8c57=[];_0x1e2ee4[_0xd7210e(0x22e)][_0xd7210e(0x1e7)](_0x11b0ce=>_0x1ffd50[_0xd7210e(0x202)](_0x11b0ce['get']('user')['properties'])),driver[_0xd7210e(0x1b6)]()[_0xd7210e(0x1e2)]('MATCH\x20(n)\x20WHERE\x20((n._lockedByName\x20=\x20\x22undefined\x22\x20OR\x20NOT\x20EXISTS(n._lockedByName))\x20AND\x20n._lockState\x20=\x20true)\x20RETURN\x20n._id\x20as\x20_id,\x20n._lockedBy\x20as\x20_lockedBy')['then'](_0xdea489=>{const _0x1abd1c=_0xd7210e;_0xdea489[_0x1abd1c(0x22e)][_0x1abd1c(0x1e7)](_0x3d40b2=>{const _0x2e633a=_0x1abd1c,_0x3c6162={'_id':_0x3d40b2[_0x2e633a(0x1b2)]('_id'),'_lockedBy':_0x3d40b2[_0x2e633a(0x1b2)]('_lockedBy')},_0x579744=_0x1ffd50[_0x2e633a(0x252)](_0x25584c=>_0x25584c[_0x2e633a(0x235)]===_0x3c6162['_lockedBy']);_0x579744?_0x2e8c57[_0x2e633a(0x202)](_0x2e633a(0x1df)+_0x3c6162[_0x2e633a(0x235)]+_0x2e633a(0x19f)+basics['buildMaidenName'](_0x579744,_0x1b0fe1)+'\x22'):_0x2e8c57[_0x2e633a(0x202)](_0x2e633a(0x1df)+_0x3c6162['_id']+_0x2e633a(0x1b9));});const _0x2fc1e1=_0x2e8c57[_0x1abd1c(0x1e7)](_0x79714d=>{const _0x561cd5=_0x1abd1c,_0x161061=driver[_0x561cd5(0x1b6)]();return _0x161061[_0x561cd5(0x1e2)](_0x79714d);});Promise[_0x1abd1c(0x1a4)](_0x2fc1e1)['then'](()=>{const _0x591c25=_0x1abd1c;nodesMissingLockedByName(_0x3ec85a)[_0x591c25(0x25f)](_0xb8b35e=>{_0x9dc809['status'](0xc8)['json'](_0xb8b35e);});});});})[_0x4a35cb(0x218)](_0xde57b5=>{const _0x5b80de=_0x4a35cb;console[_0x5b80de(0x257)](_0xde57b5);})[_0x4a35cb(0x20a)](()=>{const _0x3811c2=_0x4a35cb;_0x1b9ae9[_0x3811c2(0x245)]();});},'postNodesMissingCreatedByName':(_0x3248e1,_0x2f528f)=>{const _0x4fcb69=_0x362e57,_0x40cd62=datamodel['nodetypeDefinitions']['find'](_0x57b913=>_0x57b913[_0x4fcb69(0x1e1)]==='user'),_0x48a353=driver[_0x4fcb69(0x1b6)]();_0x48a353[_0x4fcb69(0x1e2)](_0x4fcb69(0x1f0))[_0x4fcb69(0x25f)](_0x4a4116=>{const _0x52aa1f=_0x4fcb69,_0x2a488f=[],_0x1aed84=[],_0x5aabae=[],_0x8ccf0d=[];_0x4a4116['records']['map'](_0x39a66f=>_0x2a488f['push'](_0x39a66f[_0x52aa1f(0x1b2)](_0x52aa1f(0x227))['properties'])),driver[_0x52aa1f(0x1b6)]()[_0x52aa1f(0x1e2)](_0x52aa1f(0x1b0))[_0x52aa1f(0x25f)](_0x211f08=>{const _0x1d524c=_0x52aa1f;_0x211f08[_0x1d524c(0x22e)]['map'](_0x1eabed=>{const _0x1995a9=_0x1d524c,_0xfdc3cd={'_id':_0x1eabed[_0x1995a9(0x1b2)]('_id'),'_createdBy':_0x1eabed[_0x1995a9(0x1b2)](_0x1995a9(0x1fa))},_0x1c9b64=_0x2a488f[_0x1995a9(0x252)](_0x195b87=>_0x195b87[_0x1995a9(0x235)]===_0xfdc3cd['_createdBy']);_0x1c9b64?_0x8ccf0d['push'](_0x1995a9(0x1df)+_0xfdc3cd[_0x1995a9(0x235)]+'\x22})\x20SET\x20n._createdByName\x20=\x20\x22'+basics['buildMaidenName'](_0x1c9b64,_0x40cd62)+'\x22'):(_0x8ccf0d['push'](_0x1995a9(0x1df)+_0xfdc3cd[_0x1995a9(0x235)]+_0x1995a9(0x258)),_0x5aabae['push']({'errorMsg':'Node\x20(_id:\x20'+_0xfdc3cd[_0x1995a9(0x235)]+')\x20is\x20missing\x20_createdByName.\x20_createdBy\x20user\x20not\x20found\x20in\x20db'}));});const _0x4b135e=_0x8ccf0d['map'](_0x50d42e=>{const _0x51f334=_0x1d524c,_0x32bc59=driver[_0x51f334(0x1b6)]();return _0x32bc59[_0x51f334(0x1e2)](_0x50d42e)[_0x51f334(0x218)](_0xfdaca9=>console[_0x51f334(0x257)](_0xfdaca9[_0x51f334(0x1b1)]));});Promise[_0x1d524c(0x1a4)](_0x4b135e)[_0x1d524c(0x25f)](()=>{const _0x27db1a=_0x1d524c;nodesMissingCreatedByName(_0x5aabae)['then'](_0x1a83c2=>{const _0x5d3c96=_0x15ad;_0x2f528f[_0x5d3c96(0x1d8)](0xc8)[_0x5d3c96(0x21d)](_0x1a83c2);})[_0x27db1a(0x218)](_0x35b456=>{const _0x15cf04=_0x27db1a;_0x2f528f['status'](0x1f4)[_0x15cf04(0x21d)]({'error':_0x35b456});});});});})[_0x4fcb69(0x218)](_0x4274d9=>{console['error'](_0x4274d9);})['finally'](()=>{const _0x46317d=_0x4fcb69;_0x48a353[_0x46317d(0x245)]();});},'postLifecycleFixMissingStates':async(_0x5126cd,_0x4f93e8)=>{const _0x5b15cc=_0x362e57;fs[_0x5b15cc(0x1f9)](datamodelFile,{'encoding':'utf8'},async(_0x405e7e,_0xb655e9)=>{const _0x4e7e5a=_0x5b15cc;if(_0x405e7e)return![];datamodel=JSON[_0x4e7e5a(0x219)](_0xb655e9);const _0x30e7d3=[];return datamodel[_0x4e7e5a(0x216)][_0x4e7e5a(0x206)](_0x586ea6=>_0x586ea6['elementType']===_0x4e7e5a(0x234))[_0x4e7e5a(0x1e7)](_0x5a4244=>{const _0x54c908=_0x4e7e5a,_0x9ae878=_0x5a4244[_0x54c908(0x212)][_0x54c908(0x200)],_0x57a3dc=_0x5a4244[_0x54c908(0x212)][_0x54c908(0x25e)];_0x9ae878[_0x54c908(0x226)](_0x27c72d=>{const _0x2f5d11=_0x54c908,_0x568168=_[_0x2f5d11(0x252)](_0x57a3dc,{'id':_0x27c72d[_0x2f5d11(0x225)]}),_0x5b7239=_[_0x2f5d11(0x252)](_0x57a3dc,{'id':_0x27c72d['to']});(!_0x568168||!_0x5b7239)&&_0x30e7d3[_0x2f5d11(0x202)](_0x27c72d['id']);});}),await datamodel[_0x4e7e5a(0x216)]['forEach'](async _0x4d7afd=>{const _0x375699=_0x4e7e5a;try{_0x4d7afd[_0x375699(0x212)][_0x375699(0x200)]=await _[_0x375699(0x221)](_0x4d7afd['lifecycle'][_0x375699(0x200)],_0x5e2ee7=>{const _0x43654c=_0x375699;return _0x30e7d3[_0x43654c(0x22b)](_0x5e2ee7['id'])>-0x1;});}catch(_0xfacfa4){console[_0x375699(0x257)](_0xfacfa4);}}),datamodelUtil[_0x4e7e5a(0x232)](datamodel,()=>!![],()=>![]),_0x4f93e8[_0x4e7e5a(0x1d8)](0xc8)['json'](lifecycleMissingStates());});},'postNodetypeFixMissingCoreItems':(_0x447236,_0x562f6d)=>{const _0x73ccfc=_0x362e57;fs[_0x73ccfc(0x1f9)](datamodelFile,{'encoding':_0x73ccfc(0x1e3)},(_0x52e6f5,_0x3a61f0)=>{const _0x38e4c8=_0x73ccfc;if(_0x52e6f5)return![];return datamodel=JSON[_0x38e4c8(0x219)](_0x3a61f0),datamodel[_0x38e4c8(0x216)][_0x38e4c8(0x206)](_0x3df9a6=>_0x3df9a6[_0x38e4c8(0x242)]===_0x38e4c8(0x234)||_0x3df9a6[_0x38e4c8(0x242)]===_0x38e4c8(0x24d))[_0x38e4c8(0x1e7)](_0x3791c4=>{const _0x222ef4=_0x38e4c8,_0x373c7f=_0x3791c4[_0x222ef4(0x19c)],_0x4e05ee=coreItems['properties'][_0x222ef4(0x206)](_0x16a440=>_0x16a440[_0x222ef4(0x251)][_0x222ef4(0x23e)](_0x3791c4['elementType']));_0x4e05ee['map']((_0x53d607,_0x163cb3)=>{const _0x4091c6=_0x222ef4,_0x5e1eda=_0x373c7f[_0x4091c6(0x252)](_0x20e3dc=>_0x20e3dc[_0x4091c6(0x1e1)]===_0x53d607['name']);if(!_0x5e1eda){const _0x2b5044={..._0x53d607};delete _0x2b5044[_0x4091c6(0x251)],_0x2b5044['id']=_0x4091c6(0x1a7)+NODEU['v1'](),_0x3791c4[_0x4091c6(0x19c)][_0x4091c6(0x202)](_0x2b5044);}}),_0x3791c4[_0x222ef4(0x19c)]['map'](_0x4fd544=>{const _0x41614f=_0x222ef4,_0x318cbc=_0x4e05ee['find'](_0x2dcc4d=>_0x2dcc4d[_0x41614f(0x1e1)]===_0x4fd544[_0x41614f(0x1e1)]);_0x318cbc?_0x4fd544[_0x41614f(0x266)]=!![]:_0x4fd544[_0x41614f(0x266)]=![];}),_0x3791c4[_0x222ef4(0x19c)]=_['orderBy'](_0x3791c4[_0x222ef4(0x19c)],[_0x222ef4(0x266)],[_0x222ef4(0x1d5)]);}),datamodelUtil[_0x38e4c8(0x232)](datamodel,()=>!![],()=>![]),_0x562f6d[_0x38e4c8(0x1d8)](0xc8)[_0x38e4c8(0x21d)](nodetypeMissingCoreItems());});},'getHealthgetRessourcesState':(_0x3981b8,_0x52d6cb)=>{const _0x454e43=_0x362e57;fs[_0x454e43(0x1f9)](__dirname+_0x454e43(0x1ca),_0x454e43(0x1e3),(_0x579f5f,_0x344a58)=>{const _0x2dcb68=_0x454e43;if(_0x579f5f)return _0x52d6cb[_0x2dcb68(0x1d8)](0xc8)[_0x2dcb68(0x21d)]([]);const _0x2fd9c7=_0x344a58[_0x2dcb68(0x246)]('\x0a');_0x2fd9c7['splice'](0x0,0x1);const _0x503e0a=_0x2fd9c7[_0x2dcb68(0x1e4)](','),_0x2545ca=_0x2dcb68(0x199)+_0x503e0a+']}',_0x3d465a=JSON['parse'](_0x2545ca);_0x52d6cb[_0x2dcb68(0x1d8)](0xc8)[_0x2dcb68(0x21d)](_0x3d465a);});},'getHealthgetDBAnalytics':(_0x33268d,_0x46c6b4)=>{const _0x3baaf8=_0x362e57;fs[_0x3baaf8(0x1f9)](__dirname+'/../../log/dbAnalytics.log',_0x3baaf8(0x1e3),(_0x2ffa73,_0x2244da)=>{const _0x5f1b8c=_0x3baaf8;if(_0x2ffa73)return _0x46c6b4[_0x5f1b8c(0x1d8)](0xc8)[_0x5f1b8c(0x21d)]([]);const _0x321796=_0x2244da[_0x5f1b8c(0x246)]('\x0a');_0x321796['splice'](0x0,0x1);const _0x48d389=_0x321796[_0x5f1b8c(0x1e4)](','),_0x2b00e7=_0x5f1b8c(0x199)+_0x48d389+']}',_0xd268ff=JSON['parse'](_0x2b00e7);_0x46c6b4[_0x5f1b8c(0x1d8)](0xc8)['json'](_0xd268ff);});},'mapLifecycleState':(_0xe1b6ce,_0x2b8757)=>{const _0x59afea=_0x362e57,{params:{nodetype:_0x27fc65,fromState:_0x281ceb,toState:_0x543501}}=_0xe1b6ce;let _0x305866=_0x59afea(0x207)+_0x27fc65+_0x59afea(0x1a0)+_0x543501+_0x59afea(0x20f);_0x281ceb!==_0x59afea(0x1e6)&&(_0x305866='MATCH\x20(n:'+_0x27fc65+_0x59afea(0x214)+_0x281ceb+_0x59afea(0x256)+_0x543501+_0x59afea(0x20f));const _0x3284e1=driver['session']();_0x3284e1[_0x59afea(0x1e2)](_0x305866)[_0x59afea(0x25f)](_0x5097f8=>{const _0x4841a0=_0x59afea;_0x3284e1[_0x4841a0(0x245)]();if(_0x5097f8['records'][_0x4841a0(0x24e)]>0x0)return console[_0x4841a0(0x217)]('#\x20updated\x20states',_0x5097f8[_0x4841a0(0x22e)][_0x4841a0(0x24e)]),_0x2b8757[_0x4841a0(0x1d8)](0xc8)[_0x4841a0(0x21d)]({'isSuccess':!![]});return logAndReturn(_0x4841a0(0x260),!![],_0x2b8757,0x1f4,_0x4841a0(0x24b),_0x4841a0(0x1b5),_0x4841a0(0x26a),_0x305866);})['catch'](_0x20f751=>{const _0x5d79ab=_0x59afea;return _0x3284e1[_0x5d79ab(0x245)](),logAndReturn(_0x5d79ab(0x260),!![],_0x2b8757,0x1f4,_0x5d79ab(0x24b),_0x5d79ab(0x1b5),_0x20f751[_0x5d79ab(0x1b1)],_0x305866,_0x20f751);});}};
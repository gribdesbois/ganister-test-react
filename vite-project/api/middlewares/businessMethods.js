const _0x7f6e5a=_0x1b0b;(function(_0x578a67,_0x42460d){const _0x1af43e=_0x1b0b,_0xf6f681=_0x578a67();while(!![]){try{const _0x142a74=-parseInt(_0x1af43e(0xf5))/0x1*(parseInt(_0x1af43e(0x155))/0x2)+parseInt(_0x1af43e(0x162))/0x3*(-parseInt(_0x1af43e(0xb8))/0x4)+-parseInt(_0x1af43e(0xe3))/0x5+parseInt(_0x1af43e(0xb4))/0x6+parseInt(_0x1af43e(0x159))/0x7+-parseInt(_0x1af43e(0x151))/0x8*(-parseInt(_0x1af43e(0x121))/0x9)+-parseInt(_0x1af43e(0xcc))/0xa*(-parseInt(_0x1af43e(0xd5))/0xb);if(_0x142a74===_0x42460d)break;else _0xf6f681['push'](_0xf6f681['shift']());}catch(_0x44db7e){_0xf6f681['push'](_0xf6f681['shift']());}}}(_0x3504,0xe975e));const NODEU=require(_0x7f6e5a(0x16a)),_=require(_0x7f6e5a(0x134)),driver=require(_0x7f6e5a(0x129))['db'],{FORK,SUPFORK,PATCH,MINOR,MAJOR,INTERCHANGEABLE,NONINTERCHANGEABLE}=require(_0x7f6e5a(0x170)),maxRevDepthSearch=0x14,getOutgoingRelsQueries=(_0x1b4ad2,_0x5283db,_0xcaf4dc,_0x37ca58)=>{const _0x4f8f58=_0x7f6e5a,_0x1d409c=[_0x4f8f58(0x125),_0x4f8f58(0x158),_0x4f8f58(0x117)],_0x379fa2=[],_0x202929=_0x1b4ad2[_0x4f8f58(0xcf)](_0x1e30e7=>{const _0x117bd9=_0x4f8f58,_0x1d6223={..._0x1e30e7[_0x117bd9(0x14f)](_0x117bd9(0xdd))['properties'],'_type':_0x1e30e7[_0x117bd9(0x14f)](_0x117bd9(0xdd))[_0x117bd9(0xe5)][0x0]},_0x49836c={..._0x1e30e7[_0x117bd9(0x14f)](_0x117bd9(0xef))['properties']},_0x17928c=_0x1e30e7[_0x117bd9(0x14f)](_0x117bd9(0xef))[_0x117bd9(0xfb)];if(_0x1d409c['includes'](_0x49836c[_0x117bd9(0xec)])||_0x379fa2[_0x117bd9(0x167)](_0x49836c[_0x117bd9(0xe8)]))return![];_0x49836c[_0x117bd9(0xe8)]=NODEU['v1'](),_0x49836c['_createdBy']=_0xcaf4dc[_0x117bd9(0xe8)],_0x49836c[_0x117bd9(0x15d)]=_0xcaf4dc[_0x117bd9(0xcb)],_0x49836c['_createdOn']=_0x37ca58;const _0x28b740=[];Object[_0x117bd9(0xe7)](_0x49836c)[_0x117bd9(0xcf)](_0x40f7fe=>{const _0x56a5c8=_0x117bd9;let _0x1b1bb0=_0x49836c[_0x40f7fe];_0x1b1bb0&&(typeof _0x1b1bb0===_0x56a5c8(0x10c)&&(_0x1b1bb0='\x27'+_0x1b1bb0+'\x27'),Array[_0x56a5c8(0x16d)](_0x1b1bb0)&&(_0x1b1bb0=JSON[_0x56a5c8(0xd9)](_0x1b1bb0)),_0x28b740['push'](_0x40f7fe+':\x20'+_0x1b1bb0));});const _0x2b9413=_0x28b740['join'](','),_0x371b58=_0x117bd9(0x14a)+_0x5283db[_0x117bd9(0xec)]+'\x20{_id:\x22'+_0x5283db['_id']+_0x117bd9(0xd7)+_0x1d6223[_0x117bd9(0xec)]+_0x117bd9(0x14d)+_0x1d6223[_0x117bd9(0xe8)]+_0x117bd9(0x11a)+_0x17928c+'\x20{'+_0x2b9413+'}]->(endNode)';return _0x371b58;});return _0x202929[_0x4f8f58(0x146)](_0x1d1638=>_0x1d1638);},copyOutgoingRels=async(_0x351adb,_0x566cf6,_0x18731b,_0x4caa1b,_0x52fab1)=>{const _0xc02843=_0x7f6e5a,_0x50dafd='\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(sourceNode:'+_0x566cf6[_0xc02843(0xec)]+_0xc02843(0x15b),_0x4ae96c='\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(sourceNode:'+_0x566cf6[_0xc02843(0xec)]+_0xc02843(0x137)+maxRevDepthSearch+_0xc02843(0x163);let _0x522ebb=[];try{const _0x80a0f6=await _0x351adb['run'](_0x50dafd,{'sourceNodeId':_0x566cf6['_id']});if(_0x80a0f6[_0xc02843(0xe1)][_0xc02843(0x10b)]>0x0){const _0x123ece=getOutgoingRelsQueries(_0x80a0f6[_0xc02843(0xe1)],_0x18731b,_0x4caa1b,_0x52fab1);_0x522ebb=[..._0x522ebb,..._0x123ece];}}catch(_0x4111ba){console['error'](_0x4111ba);}try{const _0x4785d7=await _0x351adb[_0xc02843(0x157)](_0x4ae96c,{'sourceNodeId':_0x566cf6[_0xc02843(0xe8)]});if(_0x4785d7[_0xc02843(0xe1)]['length']>0x0){const _0x43c166=getOutgoingRelsQueries(_0x4785d7['records'],_0x18731b,_0x4caa1b,_0x52fab1);_0x522ebb=[..._0x522ebb,..._0x43c166];}}catch(_0x1b203d){console[_0xc02843(0x169)](_0x1b203d);}const _0x3f224a=_0x522ebb[_0xc02843(0xcf)](_0x3973b9=>{return _0x351adb['run'](_0x3973b9);}),_0x59fd29={'errors':[],'success':[]},_0x5da1f7=Promise['all'](_0x3f224a)[_0xc02843(0xf4)](_0x64a6d5=>{_0x64a6d5['map'](_0x2efb5f=>{const _0x442adb=_0x1b0b;_0x2efb5f[_0x442adb(0x166)]['counters'][_0x442adb(0x165)]['relationshipsCreated']!==0x1?_0x59fd29[_0x442adb(0x11f)]['push'](_0x2efb5f):_0x59fd29[_0x442adb(0xff)]['push'](_0x2efb5f);});})[_0xc02843(0x11b)](_0x49c6e5=>{const _0x904696=_0xc02843;console[_0x904696(0x169)](_0x49c6e5);});return _0x5da1f7;},copyIncomingRels=async(_0xee580,_0x5794fc,_0x54f479,_0x287616,_0x2626a5,_0x40b6cc)=>new Promise(_0x25c764=>{const _0x4187d7=_0x7f6e5a,_0x353964=[_0x4187d7(0x125),'revises',_0x4187d7(0x117),_0x4187d7(0xeb),'accessRole'],_0x27739a={'errors':[],'success':[]},_0x28a52d=_0x4187d7(0x142)+_0x5794fc['_type']+_0x4187d7(0x11c);_0xee580[_0x4187d7(0x157)](_0x28a52d,{'sourceNodeId':_0x5794fc[_0x4187d7(0xe8)]})[_0x4187d7(0xf4)](_0x2a58a6=>{const _0x277b62=_0x4187d7;if(_0x2a58a6[_0x277b62(0xe1)][_0x277b62(0x10b)]>0x0){const _0x132872=_0x2a58a6['records'],_0x36970e=_0x132872['map'](_0x531f17=>{const _0x3e6df3=_0x277b62,_0x4d124=_0x531f17[_0x3e6df3(0x14f)]('n'),_0x58a338=_0x531f17[_0x3e6df3(0x14f)]('s'),_0x5be696=_0x531f17[_0x3e6df3(0x14f)]('rels'),_0x138d3c=_0x5be696[_0x3e6df3(0xfb)];if(_0x353964['includes'](_0x138d3c))return _0x25c764(_0x27739a);const _0x27ae79={'_type':_0x4d124[_0x3e6df3(0xe5)][0x0],..._0x4d124[_0x3e6df3(0xbf)]},_0x4380ee={'_type':_0x58a338[_0x3e6df3(0xe5)][0x0],..._0x58a338[_0x3e6df3(0xbf)]},_0x3b0428={..._0x5be696[_0x3e6df3(0xbf)]},_0x3d5b9d=global[_0x3e6df3(0x15f)][_0x3e6df3(0x13a)]['find'](_0x391073=>_0x391073[_0x3e6df3(0xcb)]===_0x27ae79[_0x3e6df3(0xec)]),_0x49fe1b=global[_0x3e6df3(0x15f)][_0x3e6df3(0x13a)][_0x3e6df3(0xf2)](_0x42f256=>_0x42f256['name']===_0x4380ee[_0x3e6df3(0xec)]),_0x241e75=global[_0x3e6df3(0x15f)][_0x3e6df3(0x13a)][_0x3e6df3(0xf2)](_0x182a3d=>{const _0x46f458=_0x3e6df3,{elementType:_0x65b10f,core:_0x33d884,directions:directions=[]}=_0x182a3d;if(_0x65b10f===_0x46f458(0xdc)||_0x33d884)return;return directions[_0x46f458(0xf2)](_0x4ef35a=>_0x4ef35a[_0x46f458(0xd1)]===_0x3d5b9d?.['id']&&_0x4ef35a[_0x46f458(0x148)]===_0x49fe1b?.['id']);});if(_0x40b6cc===NONINTERCHANGEABLE){const _0x1d6fa9=_0x3d5b9d&&_0x3d5b9d[_0x3e6df3(0x112)][_0x3e6df3(0xc1)]['find'](_0x4c592c=>_0x4c592c[_0x3e6df3(0xcb)]===_0x27ae79[_0x3e6df3(0xd4)]);if(_0x1d6fa9&&_0x1d6fa9[_0x3e6df3(0x15e)]){const _0x411efb='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20()-[r{_id:$relId}]-()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20r._frozen\x20=\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20r';return _0xee580[_0x3e6df3(0x157)](_0x411efb,{'relId':_0x3b0428[_0x3e6df3(0xe8)]})[_0x3e6df3(0x11b)](_0x4612fc=>{const _0x20bab7=_0x3e6df3;console[_0x20bab7(0x169)](_0x4612fc);});}if(_0x241e75&&_0x241e75[_0x3e6df3(0xf9)])return _0x25c764(_0x27739a);}const _0x55e126=NODEU['v1'](),_0x10d938=_0x3b0428[_0x3e6df3(0xe8)]||_0x3e6df3(0x14e);_0x3b0428['_id']=_0x55e126,_0x3b0428[_0x3e6df3(0x113)]=_0x287616[_0x3e6df3(0xe8)],_0x3b0428[_0x3e6df3(0x15d)]=_0x287616[_0x3e6df3(0xcb)],_0x3b0428[_0x3e6df3(0x144)]=_0x2626a5;const _0x4e1fc3=[];Object[_0x3e6df3(0xe7)](_0x3b0428)['map'](_0x379e31=>{const _0x1db493=_0x3e6df3;let _0x3dcead=_0x3b0428[_0x379e31];_0x3b0428[_0x379e31]&&(typeof _0x3dcead===_0x1db493(0x10c)&&(_0x3dcead='\x27'+_0x3dcead+'\x27'),Array[_0x1db493(0x16d)](_0x3dcead)&&(_0x3dcead=JSON['stringify'](_0x3dcead)),_0x4e1fc3[_0x1db493(0xc5)](_0x379e31+':\x20'+_0x3dcead));});const _0x2f0f9d=_0x4e1fc3['join'](',');let _0x575428='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startNode:'+_0x27ae79[_0x3e6df3(0xec)]+_0x3e6df3(0xd6)+_0x54f479[_0x3e6df3(0xec)]+_0x3e6df3(0x120)+_0x138d3c+'\x20{'+_0x2f0f9d+_0x3e6df3(0xc3);const _0x617b6f=_[_0x3e6df3(0xf2)](global[_0x3e6df3(0x15f)][_0x3e6df3(0x13a)],{'name':_0x27ae79[_0x3e6df3(0xec)]}),_0x1ec28e=_[_0x3e6df3(0xf2)](_0x617b6f['lifecycle']['states'],{'start':!![]});let _0x93e195=_0x3e6df3(0xd2);return _0x1ec28e&&(_0x93e195=_0x1ec28e[_0x3e6df3(0xcb)]),_0x27ae79['_state']===_0x93e195&&(_0x575428='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startNode:'+_0x27ae79[_0x3e6df3(0xec)]+_0x3e6df3(0xbe)+_0x54f479[_0x3e6df3(0xec)]+_0x3e6df3(0x14b)+_0x138d3c+'\x20{'+_0x2f0f9d+'}]->(endNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REMOVE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20rel._frozen'),_0xee580[_0x3e6df3(0x157)](_0x575428,{'startNodeId':_0x27ae79[_0x3e6df3(0xe8)],'targetNodeId':_0x54f479[_0x3e6df3(0xe8)],'oldRelId':_0x10d938})[_0x3e6df3(0xf4)](_0x224b56=>{const _0x17132f=_0x3e6df3;_0x224b56[_0x17132f(0x166)][_0x17132f(0x12a)][_0x17132f(0x165)][_0x17132f(0xbd)]!==0x1?_0x27739a[_0x17132f(0x11f)][_0x17132f(0xc5)](_0x224b56):_0x27739a[_0x17132f(0xff)][_0x17132f(0xc5)](_0x224b56);})[_0x3e6df3(0x11b)](_0x19eed8=>{const _0x426c39=_0x3e6df3;console[_0x426c39(0x169)]('copyIncomingRels2',_0x19eed8);});});return Promise[_0x277b62(0xe2)](_0x36970e)['then'](()=>{_0x25c764(_0x27739a);});}_0x25c764(_0x27739a);})['catch'](_0x4686a8=>{console['error']('copyIncomingRels1',_0x4686a8);});}),findLatestNode=async _0x2c6e77=>new Promise(_0x219137=>{const _0x5420fd=_0x7f6e5a,_0x44a65b=driver[_0x5420fd(0x119)](),_0x1d1146='\x0a\x20\x20MATCH\x0a\x20\x20\x20\x20(n{_id:$nodeId})\x0a\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20(n)<-[r:revises*1..'+maxRevDepthSearch+_0x5420fd(0x138);_0x44a65b[_0x5420fd(0x157)](_0x1d1146,{'nodeId':_0x2c6e77})[_0x5420fd(0xf4)](_0x4c4162=>{const _0x323d70=_0x5420fd;_0x44a65b[_0x323d70(0x115)]();if(_0x4c4162['records'][_0x323d70(0x10b)]){const _0x5168a3=_0x4c4162[_0x323d70(0xe1)][0x0][_0x323d70(0x14f)](_0x323d70(0xdd)),_0x4fd519=_0x5168a3?_0x5168a3['properties']:![],_0x2ba379=_0x4c4162['records'][0x0]['get']('n')[_0x323d70(0xbf)];_0x219137(_0x4fd519||_0x2ba379);}});});function deleteGeneratedNodes(_0xf81938){return new Promise((_0x3e739d,_0x3c2940)=>{const _0x4e8287=_0x1b0b,_0x142eac=driver[_0x4e8287(0x119)]();let _0x5eb469='\x0a\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20(ECO\x20{_id:$ecoId})-[generated:generated]->(nodes)\x0a\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20(nodes)-[rels]-()\x0a\x20\x20\x20\x20\x20\x20DELETE\x0a\x20\x20\x20\x20\x20\x20\x20\x20rels,nodes\x0a\x20\x20\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20\x20\x20nodes';_0x142eac[_0x4e8287(0x157)](_0x5eb469,{'ecoId':_0xf81938[_0x4e8287(0xe8)]})[_0x4e8287(0xf4)](_0x404eaf=>{const _0x7461f=_0x4e8287;_0x5eb469=_0x7461f(0x104),_0x142eac['run'](_0x5eb469,{'ecoId':_0xf81938['_id']})['then'](_0x4b021d=>{const _0x58677f=_0x7461f;_0x142eac[_0x58677f(0x115)](),_0x3e739d(_0x4b021d);})[_0x7461f(0x11b)](_0xb42657=>{const _0xab72f9=_0x7461f;console[_0xab72f9(0x169)]('deleteGeneratedNodes-error-a',_0xb42657),_0x3c2940(_0x404eaf),_0x142eac[_0xab72f9(0x115)]();});})[_0x4e8287(0x11b)](_0x2daffd=>{const _0x31d729=_0x4e8287;console['error'](_0x31d729(0xd3),_0x2daffd),_0x142eac[_0x31d729(0x115)](),_0x3c2940(_0x2daffd);});});}function _0x3504(){const _0xf23fff=['relationshipsCreated','\x20{_id:$startNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(endNode:','properties','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20\x20(newNode:','states','relChildNodeId','}]->(endNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REMOVE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20rel._frozen','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._lockable\x20=\x20','push','clone\x20query\x20did\x20not\x20produce\x20any\x20result','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','copyAccesses','\x27,\x20role:\x27','._id\x20=\x20\x22','name','22468640fnhYyi','currentChildNodeId',']->(alternativeNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel\x20=\x20currentRel,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._id\x20=\x20\x27','map','MATCH\x20','source','draft','deleteGeneratedNodes-error-b','_state','11axQQPA','\x20{_id:$startNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(endNode:','\x22}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20(endNode:',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._createdBy\x20=\x20\x22','stringify','linkName','(accNode','node','latestNode','commit','childNode','\x27},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._version\x20=\x20\x22','records','all','9070965RWRoRO','\x0a\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20(eco:eco\x20{_id:$nodeId})-[handle:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]->(controlledItem)\x0a\x20\x20\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20\x20\x20controlledItem,\x20handle,\x20eco\x0a\x20\x20\x20\x20','labels','action','keys','_id','handle','Action\x20not\x20found\x20or\x20action\x20is\x20wrong','generated','_type','Source\x20Node\x20ID\x20undefined.','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._createdByName\x20=\x20\x22','rel','controlledItem','pick\x20alternative','find','\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20DELETE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20relParentToCurrentChildRels','then','1rFQgLM','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._createdByName\x20=\x20\x27','pick\x20fork','_version','parentConfigFreeze','released','type','._createdByName\x20=\x20\x22','(targetNode)<-[:accessRole{\x20_type:\x20\x27','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','An\x20error\x20occured\x20while\x20cloning\x20nodes.','No\x20query\x20results',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._createdBy\x20=\x20\x27','\x20{_id:$nodeId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20(ECO\x20{_id:$ecoId})-[hco:handlesChangeOf]->(nodes)\x0a\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20hco._handled\x20=false,\x0a\x20\x20\x20\x20\x20\x20\x20\x20nodes._state\x20=\x20\x27released\x27\x0a\x20\x20\x20\x20\x20\x20REMOVE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20hco._versioned,\x0a\x20\x20\x20\x20\x20\x20\x20\x20nodes._releasedUntil\x0a\x20\x20\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20\x20\x20nodes','\x27,_id:\x20\x27','relationshipLinkName','._revType\x20=\x20\x22','join','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20',',(eco)-[generated:generated\x20{\x20_type:\x20\x27generated\x27\x20}]->(newNode)','length','string','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(currentParentNode\x20{_id:$currentParentNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(currentChildNode\x20{_id:$currentChildNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode\x20{\x20_id:\x20$relParentNodeId\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relChildNode\x20{\x20_id:\x20$relChildNodeId\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20()-[currentRel:','role','(ECO)\x20unknown\x20handle\x20action','relParentNodeId',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode\x20=\x20s\x20{.*,\x20_id:\x27','lifecycle','_createdBy','{\x20name:\x20\x27','close','executed','handlesChangeOf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','session','\x22})\x0a\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20(startNode)-[rel:','catch','\x20{_id:$sourceNodeId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT((n)<-[:revises]-())\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n,rels,s','\x20MATCH\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(n:','split','errors','\x20{_id:$targetNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20()-[oldRel\x20{_id:$oldRelId}]->()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20oldRel._versioned\x20=\x20true,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20oldRel._isLatest\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startNode)-[rel:','1575IYaPgl','\x20MATCH\x20(s:','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._createdOn\x20=\x20','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','forks','getProjectAssignments','beginTransaction','processECOActions','../../config/config','counters','\x20{\x20_id:\x20\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','._createdBy\x20=\x20\x22','isOpen','obsolete','relationshipId',']->(relChildNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode)-[newRel:','Link\x20Name\x20must\x20be\x20forks\x20or\x20revises','\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._versionedOn\x20=\x20','lodash','\x20{_id:\x20$relationshipId}]->()\x0a\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(currentParentNode)-[currentParentToNewChildRels:','cancelVersionnedItems','\x20{_id:$sourceNodeId})-[rel]->()<-[r:revises*1..',']-(latestNode)\x0a\x20\x20WHERE\x0a\x20\x20\x20\x20NOT(latestNode)<-[:revises]-()\x0a\x20\x20RETURN\x0a\x20\x20\x20\x20n,\x20latestNode','._createdOn\x20=\x20','nodetypeDefinitions',',(eco:eco\x20{_id:$ecoId}),(eco)-[handlesChangeOf:handlesChangeOf\x20{\x20_handled:\x20false}]->(s)','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','newRef','revType','{\x20_id:\x20\x27','isEmpty',']->(relChildNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode)-[newParentToNewChildRels:','\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(n)-[rels]->(s:','forEach','_createdOn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(currentParentNode\x20{_id:$currentParentNodeId}),\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode\x20{\x20_id:\x20$relParentNodeId\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relChildNode\x20{\x20_id:\x20$relChildNodeId\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(alternativeNode\x20{\x20_id:\x20$alternativeNode\x20}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20()-[currentRel:','filter','\x0a\x20\x20\x20\x20MATCH\x20(p:project{_id:$projectId})-[r:manages\x20{\x20_type:\x20\x27projectActivities\x27\x20}]->(a:assignment)\x0a\x20\x20\x20\x20WITH\x20a,\x20r\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(a:assignment)-[r2:hasPredecessor\x20{\x20_type:\x20\x27predecessor\x27\x20}]->(a2:assignment)\x0a\x20\x20\x20\x20RETURN\x20a,\x20r,\x20a2\x0a\x20\x20','target','\x27\x20})\x20','\x0a\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20(startNode:','\x20{_id:$targetNodeId}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20()-[oldRel\x20{_id:$oldRelId}]->()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20oldRel._versioned\x20=\x20true,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20oldRel._isLatest\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(startNode)-[rel:','\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._createdOn\x20=\x20','\x20{_id:\x22','empty','get','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._rootRelId\x20=\x20\x27','5824nepivn','\x0a\x20\x20MATCH\x0a\x20\x20\x20\x20(sourceNode:',']->(relChildNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel\x20=\x20currentRel,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._id\x20=\x20\x27','value','3463534liOSYP','_fields','run','revises','12490968NioCUk','\x27\x20})','\x20{_id:$sourceNodeId})-[rel]->(latestNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20NOT\x20(latestNode)<-[:revises]-()\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20sourceNode,\x20rel,\x20latestNode','\x20{_id:\x20$nodeId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n._state\x20=\x20\x27obsolete\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n._releasedUntil\x20=\x20timestamp()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20n','_createdByName','configFreeze','datamodel','now','(ECO)\x20node\x20not\x20in\x20released\x20state','9OtNXPJ',']-(latestNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20((rel._versioned\x20IS\x20NULL\x20OR\x20rel._versioned=false)\x20AND\x20NOT\x20(latestNode)<-[:revises]-())\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20sourceNode,\x20rel,\x20latestNode;\x0a\x20\x20\x20\x20','alternativeNode','_stats','summary','includes','oldNodeId','error','uuid','linkActions','summary.counters','isArray','\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(ECO{_id:$ecoId})-[handle:forks|versions]->(impactedItem)\x20\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20impactedItem,handle,ECO','\x20{_id:\x20$relationshipId}]->()\x0a\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode)-[relParentToCurrentChildRels:','../constants',']-(newNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','parse','9831954EWXuiN',',s._lockable\x20=\x20false','methods',',\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','1726844POYeEc','\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20DELETE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newParentToNewChildRels','._type\x20=\x20\x27','648','currentParentNodeId'];_0x3504=function(){return _0xf23fff;};return _0x3504();}function _0x1b0b(_0x5338d4,_0x2fbafe){const _0x35042e=_0x3504();return _0x1b0b=function(_0x1b0b2c,_0x5c155e){_0x1b0b2c=_0x1b0b2c-0xb3;let _0x31edfe=_0x35042e[_0x1b0b2c];return _0x31edfe;},_0x1b0b(_0x5338d4,_0x2fbafe);}const returnVersioningRule=(_0x140638,_0x260c33)=>{const _0x118a1d=_0x7f6e5a,_0x1e795b=_[_0x118a1d(0xf2)](global[_0x118a1d(0x15f)][_0x118a1d(0x13a)],{'name':_0x140638[_0x118a1d(0xec)]}),{versioningRule:_0x533735}=_0x1e795b;if(_0x533735[_0x260c33])return _0x533735[_0x260c33];return _0x260c33;},returnNewVersion=(_0x19efef,_0x4c3411)=>{const _0x2e6969=_0x7f6e5a,{_version:_version=''}=_0x19efef['properties'],_0x48b6db=_version[_0x2e6969(0x11e)]('.');switch(_0x4c3411){case MAJOR[_0x2e6969(0x154)]:_0x48b6db[0x0]=parseInt(_0x48b6db[0x0],0xa)+0x1,_0x48b6db[0x1]=0x0,_0x48b6db[0x2]=0x0;break;case MINOR['value']:_0x48b6db[0x1]=parseInt(_0x48b6db[0x1],0xa)+0x1,_0x48b6db[0x2]=0x0;break;case PATCH['value']:_0x48b6db[0x2]=parseInt(_0x48b6db[0x2],0xa)+0x1;break;case FORK[_0x2e6969(0x154)]:case SUPFORK['value']:_0x48b6db[0x0]=0x1,_0x48b6db[0x1]=0x0,_0x48b6db[0x2]=0x0;break;case _0x2e6969(0x12f):break;default:console['error'](_0x2e6969(0xea));break;}const _0x419f03=_0x48b6db[_0x2e6969(0x108)]('.');return _0x419f03;},updateLinkActions=(_0x17f3fd,_0x2e5adc)=>{const _0xa5f190=_0x7f6e5a,_0x29dd76=driver[_0xa5f190(0x119)](),_0xba6e24=_0x29dd76[_0xa5f190(0x127)](),_0x570b65=[];return _0x17f3fd[_0xa5f190(0x143)](_0x2ce277=>{const _0x2c3a18=_0xa5f190,{currentParentNodeId:_0x14aab3,currentChildNodeId:_0x45f68c,relParentNodeId:_0x29bf20,relChildNodeId:_0x263aec,alternativeNode:_0x19e0e8,action:_0x5b8254,relationshipId:_0x49a5d7,relationshipLinkName:_0x1b5ea6}=_0x2ce277;let _0x2c24d3='';const _0x290cd1=NODEU['v1']();_0x5b8254===_0x2c3a18(0xf1)&&(_0x2c24d3=_0x2c3a18(0x145)+_0x1b5ea6+_0x2c3a18(0x135)+_0x1b5ea6+_0x2c3a18(0x141)+_0x1b5ea6+_0x2c3a18(0x131)+_0x1b5ea6+_0x2c3a18(0xce)+_0x290cd1+_0x2c3a18(0x150)+_0x290cd1+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._createdOn\x20=\x20'+Date[_0x2c3a18(0x160)]()+_0x2c3a18(0x102)+_0x2e5adc[_0x2c3a18(0xe8)]+_0x2c3a18(0xf6)+_0x2e5adc[_0x2c3a18(0xcb)]+_0x2c3a18(0xb9),_0x570b65['push'](_0xba6e24[_0x2c3a18(0x157)](_0x2c24d3,{'currentParentNodeId':_0x14aab3,'relParentNodeId':_0x29bf20,'relChildNodeId':_0x263aec,'currentChildNodeId':_0x45f68c,'relationshipId':_0x49a5d7,'alternativeNode':_0x19e0e8}))),_0x5b8254===_0x2c3a18(0xf7)&&(_0x2c24d3=_0x2c3a18(0x10d)+_0x1b5ea6+_0x2c3a18(0x16f)+_0x1b5ea6+']->(currentChildNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(relParentNode)-[newRel:'+_0x1b5ea6+_0x2c3a18(0x153)+_0x290cd1+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newRel._rootRelId\x20=\x20\x27'+_0x290cd1+_0x2c3a18(0x123)+Date[_0x2c3a18(0x160)]()+_0x2c3a18(0x102)+_0x2e5adc[_0x2c3a18(0xe8)]+_0x2c3a18(0xf6)+_0x2e5adc[_0x2c3a18(0xcb)]+_0x2c3a18(0xf3),_0x570b65[_0x2c3a18(0xc5)](_0xba6e24['run'](_0x2c24d3,{'currentParentNodeId':_0x14aab3,'relParentNodeId':_0x29bf20,'relChildNodeId':_0x263aec,'currentChildNodeId':_0x45f68c,'relationshipId':_0x49a5d7,'alternativeNode':_0x19e0e8})));}),Promise[_0xa5f190(0xe2)](_0x570b65)[_0xa5f190(0xf4)](_0x375318=>{const _0x3b2d13=_0xa5f190;return _0xba6e24[_0x3b2d13(0xde)](),_0x375318[_0x3b2d13(0xcf)](_0x147d6a=>_[_0x3b2d13(0x14f)](_0x147d6a,_0x3b2d13(0x16c)));});},copyAccesses=async(_0x44c21c,_0x25fcb1,_0xb92107)=>new Promise((_0x22b586,_0x573b34)=>{const _0x5ae4bf=_0x7f6e5a,_0x2788a1=_0x5ae4bf(0x152)+_0x25fcb1[_0x5ae4bf(0xec)]+'\x20{_id:$sourceNodeId})<-[ar:accessRole]-(ac)\x0a\x20\x20RETURN\x0a\x20\x20\x20\x20ar,\x20ac';_0x44c21c[_0x5ae4bf(0x12e)]()?_0x44c21c[_0x5ae4bf(0x157)](_0x2788a1,{'sourceNodeId':_0x25fcb1['_id']})[_0x5ae4bf(0xf4)](_0xb94d96=>{const _0x2a31cc=_0x5ae4bf,_0xc43936=[],_0x1adb0c=['(targetNode:'+_0xb92107['_type']+_0x2a31cc(0x12b)+_0xb92107['_id']+_0x2a31cc(0x149)];_0xb94d96[_0x2a31cc(0xe1)][_0x2a31cc(0x143)]((_0x1d8fab,_0x3a2e94)=>{const _0xdfb76d=_0x2a31cc,_0xed7a7d=_0x1d8fab['get']('ar'),_0x389c26=_0x1d8fab[_0xdfb76d(0x14f)]('ac');_0x389c26[_0xdfb76d(0xbf)][_0xdfb76d(0xe8)]?_0x1adb0c[_0xdfb76d(0xc5)]('(accNode'+_0x3a2e94+':'+_0x389c26[_0xdfb76d(0xe5)][0x0]+_0xdfb76d(0x13f)+_0x389c26[_0xdfb76d(0xbf)][_0xdfb76d(0xe8)]+'\x27\x20})'):_0x1adb0c[_0xdfb76d(0xc5)](_0xdfb76d(0xdb)+_0x3a2e94+':'+_0x389c26['labels'][0x0]+_0xdfb76d(0x114)+_0x389c26[_0xdfb76d(0xbf)]['name']+_0xdfb76d(0x15a)),_0xc43936[_0xdfb76d(0xc5)](_0xdfb76d(0xfd)+_0xed7a7d[_0xdfb76d(0xbf)]['_type']+_0xdfb76d(0xc9)+_0xed7a7d[_0xdfb76d(0xbf)][_0xdfb76d(0x10e)]+_0xdfb76d(0x105)+NODEU['v1']()+'\x27}]-(accNode'+_0x3a2e94+')');});if(_0xb94d96[_0x2a31cc(0xe1)][_0x2a31cc(0x10b)]>0x0){const _0x24c494=_0x2a31cc(0xd0)+_0x1adb0c[_0x2a31cc(0x108)](',')+_0x2a31cc(0x109)+_0xc43936[_0x2a31cc(0x108)](',');_0x44c21c[_0x2a31cc(0x157)](_0x24c494)[_0x2a31cc(0xf4)](_0x547bd4=>{_0x22b586(_0x547bd4);})[_0x2a31cc(0x11b)](_0xdaa409=>{const _0x1cdc9d=_0x2a31cc;console[_0x1cdc9d(0x169)](_0x1cdc9d(0xc8),_0xdaa409),_0x573b34(_0xdaa409);});}else _0x22b586();})[_0x5ae4bf(0x11b)](_0x5c8796=>{const _0x48f898=_0x5ae4bf;console['error'](_0x48f898(0xc8),_0x5c8796),_0x573b34(_0x5c8796);}):_0x573b34();}),nodeCloning=(_0x88b3a8,_0x4e79b2,_0x28f089,_0x1ac327,_0x1905aa,_0x591829,_0x44cf90,_0x7060f7,_0x19c13e,_0x2eda4a)=>new Promise(_0x27207b=>{const _0x4c5a9c=_0x7f6e5a,_0xac489=_[_0x4c5a9c(0xf2)](global[_0x4c5a9c(0x15f)]['nodetypeDefinitions'],{'name':_0x4e79b2[_0x4c5a9c(0xec)]}),_0x1a5b40=_0xac489[_0x4c5a9c(0x112)]['states'][_0x4c5a9c(0xf2)](_0x5e3ce1=>_0x5e3ce1['start']===!![]),{lockable:_0x423798}=_0x1a5b40,_0x12e2d5=global[_0x4c5a9c(0x15f)]['nodetypeDefinitions']['find'](_0xdca63f=>{const _0x415755=_0x4c5a9c;if(_0xdca63f[_0x415755(0xda)]===_0x591829)return _0xdca63f['directions'][_0x415755(0xf2)](_0x3158de=>{const _0x54096e=_0x415755;return _0x3158de[_0x54096e(0xd1)]===_0xac489['id']&&_0x3158de[_0x54096e(0x148)]===_0xac489['id'];});}),_0x1d8b1b=NODEU['v1'](),_0xcbe530=NODEU['v1']();_0x591829!==_0x4c5a9c(0x125)&&_0x591829!==_0x4c5a9c(0x158)&&(console[_0x4c5a9c(0x169)](_0x4c5a9c(0x132)),_0x27207b([_0x4c5a9c(0x132)]));const {_ref:_ref='',_labelRef:_labelRef=_ref,_createdOn:_0x3be390}=_0x4e79b2['properties'];let _0x2b84c0;if(_0x591829===_0x4c5a9c(0x158))_0x1905aa=_labelRef,_0x2b84c0=_0x3be390;else _0x591829===_0x4c5a9c(0x125)&&(!_0x1905aa&&(_0x1905aa=Date['now']()),_0x2b84c0=Date['now']());let _0x2ee339='',_0x5456e2='',_0x1eb9f0='',_0xf78da5='';const _0x1ba0e0={'_createdOn':Date[_0x4c5a9c(0x160)](),'_createdBy':_0x28f089[_0x4c5a9c(0xe8)],'_createdByName':_0x28f089[_0x4c5a9c(0xbf)][_0x4c5a9c(0xcb)],'action':_0x7060f7,'linkName':_0x591829,'_id':NODEU['v1']()};_0x44cf90&&(_0x2ee339=_0x4c5a9c(0x13b),_0x5456e2=_0x4c5a9c(0x10a),_0xf78da5='SET\x0a\x20\x20\x20\x20handlesChangeOf._type\x20=\x20\x27handlesChangeOf\x27,\x0a\x20\x20\x20\x20handlesChangeOf._handled\x20=\x20true,\x0a\x20\x20\x20\x20handlesChangeOf.type\x20=\x20\x22'+_0x591829+'\x22,\x0a\x20\x20\x20\x20handlesChangeOf._handledState\x20=\x20s._state',_0x1eb9f0=',generated\x20=\x20$generatedProps,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20generated._changeComment\x20=\x20handlesChangeOf._changeComment,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20generated._sourceNode=\x20s._id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20generated._type\x20=\x20\x27generated\x27');let _0x3ddc02='';_0x591829===_0x4c5a9c(0x158)&&(_0x3ddc02=_0x4c5a9c(0xb5));let _0x8fb5e0='';if(!_[_0x4c5a9c(0x140)](_0x2eda4a)){const _0x3df907=[];Object['keys'](_0x2eda4a)['forEach'](_0x5b0573=>{const _0x244dae=_0x4c5a9c;let _0x151d62;typeof _0x2eda4a[_0x5b0573]===_0x244dae(0x10c)?_0x151d62=''+_0x2eda4a[_0x5b0573]:_0x151d62=_0x2eda4a[_0x5b0573],_0x3df907[_0x244dae(0xc5)](_0x591829+'.'+_0x5b0573+'\x20=\x20'+_0x151d62);}),_0x8fb5e0=','+_0x3df907[_0x4c5a9c(0x108)](',');}const _0x348671=_0x4c5a9c(0x122)+_0x4e79b2['_type']+_0x4c5a9c(0x103)+_0x2ee339+_0x4c5a9c(0xc7)+_0xf78da5+_0x4c5a9c(0xc0)+_0x4e79b2[_0x4c5a9c(0xec)]+'),\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(s)<-['+_0x591829+':'+_0x591829+_0x4c5a9c(0x171)+_0x5456e2+_0x4c5a9c(0x118)+_0x591829+_0x4c5a9c(0xba)+_0x12e2d5['name']+_0x4c5a9c(0xfe)+_0x591829+_0x4c5a9c(0xca)+_0xcbe530+_0x4c5a9c(0x124)+_0x591829+_0x4c5a9c(0x139)+_0x3be390+_0x4c5a9c(0xb7)+_0x591829+_0x4c5a9c(0x12d)+_0x28f089['_id']+_0x4c5a9c(0x124)+_0x591829+_0x4c5a9c(0x107)+_0x19c13e+_0x4c5a9c(0x124)+_0x591829+_0x4c5a9c(0xfc)+_0x28f089[_0x4c5a9c(0xcb)]+_0x4c5a9c(0x13c)+_0x8fb5e0+_0x4c5a9c(0x12c)+_0x1eb9f0+_0x4c5a9c(0x12c)+_0x3ddc02+_0x4c5a9c(0x111)+_0x1d8b1b+_0x4c5a9c(0xe0)+_0x1ac327+_0x4c5a9c(0x133)+Date['now']()+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._lockState\x20=\x20false,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._state\x20=\x20\x22'+_0x1a5b40[_0x4c5a9c(0xcb)]+'\x22,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._ref\x20=\x20\x22'+_0x1905aa+_0x4c5a9c(0x14c)+_0x2b84c0+_0x4c5a9c(0xd8)+_0x28f089[_0x4c5a9c(0xe8)]+_0x4c5a9c(0xee)+_0x28f089[_0x4c5a9c(0xcb)]+_0x4c5a9c(0xc4)+_0x423798+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REMOVE\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._lockedBy,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._lockedOn,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._lockedByName,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._modifiedOn,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20newNode._releasedOn\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20\x20newNode';_0x88b3a8[_0x4c5a9c(0x157)](_0x348671,{'ecoId':_0x44cf90,'nodeId':_0x4e79b2[_0x4c5a9c(0xe8)],'userId':_0x28f089[_0x4c5a9c(0xe8)],'generatedProps':_0x1ba0e0})[_0x4c5a9c(0xf4)](async _0x469c1b=>{const _0x5c5677=_0x4c5a9c;if(_0x469c1b[_0x5c5677(0xe1)][_0x5c5677(0x10b)]>0x0){const _0x49acbb={'_id':_0x1d8b1b,'_type':_0x4e79b2['_type'],'_version':_0x1ac327,'oldNodeId':_0x4e79b2[_0x5c5677(0xe8)],'oldNodeVersion':_0x4e79b2[_0x5c5677(0xf8)],'_createdOn':_0x3be390,'action':_0x7060f7,'revType':_0x19c13e},_0x221143=[];await copyAccesses(_0x88b3a8,_0x4e79b2,_0x49acbb),_0x27207b(_0x49acbb);}else console[_0x5c5677(0x169)](_0x5c5677(0xc6)),_0x27207b(![]);})[_0x4c5a9c(0x11b)](_0x51a853=>{const _0x277eca=_0x4c5a9c;console[_0x277eca(0x169)](_0x277eca(0xbb),_0x51a853),_0x27207b(![]);});}),nodeObsolete=async(_0x484fca,_0x5d9298)=>{const _0x493fe2=_0x7f6e5a,_0x2b9fe4=_0x493fe2(0x11d)+_0x5d9298[_0x493fe2(0xec)]+_0x493fe2(0x15c),_0x39c28c=await _0x484fca['run'](_0x2b9fe4,{'nodeId':_0x5d9298[_0x493fe2(0xe8)]});if(_0x39c28c[_0x493fe2(0xe1)][_0x493fe2(0x10b)]>0x0)return!![];return![];};exports[_0x7f6e5a(0x128)]=async _0x37fa6b=>{const _0x3d8770=_0x7f6e5a;try{const _0xf08f1f=[FORK[_0x3d8770(0x154)],SUPFORK[_0x3d8770(0x154)],MAJOR['value'],MINOR[_0x3d8770(0x154)],PATCH[_0x3d8770(0x154)],_0x3d8770(0x12f)],{user:_0x41b95e}=_0x37fa6b,_0x532cf0=driver['session'](),_0xce759b=_0x3d8770(0xe4),_0x720c7a=await _0x532cf0['run'](_0xce759b,{'nodeId':_0x37fa6b[_0x3d8770(0xe8)]});if(!_0x720c7a['records'])throw new Error(_0x3d8770(0x101));let _0x498542=!![];const _0x1efae3=[];_0x720c7a[_0x3d8770(0xe1)]['forEach'](_0x1e926b=>{const _0x5b3e89=_0x3d8770,_0x11e8dc=_0x1e926b[_0x5b3e89(0x14f)]('handle')['properties'],[_0x280820]=_0x1e926b[_0x5b3e89(0x14f)](_0x5b3e89(0xf0))[_0x5b3e89(0xe5)],{properties:_0x2536f0}=_0x1e926b[_0x5b3e89(0x14f)](_0x5b3e89(0xf0)),{_id:_0xe5b20c}=_0x2536f0,_0x4a8727={'_type':_0x280820,'_id':_0xe5b20c,'properties':_0x2536f0};!_0xf08f1f[_0x5b3e89(0x167)](_0x11e8dc[_0x5b3e89(0xe6)])&&(console['error'](_0x5b3e89(0x10f)),_0x498542=![]);!_0x498542&&(_0x11e8dc['action']===FORK[_0x5b3e89(0x154)]||_0x11e8dc[_0x5b3e89(0xe6)]===SUPFORK[_0x5b3e89(0x154)])&&!_0x11e8dc[_0x5b3e89(0x13d)]&&(console['error']('(ECO)\x20missing\x20new\x20ref'),_0x498542=![]);const _0x376ca9=global['datamodel']['nodetypeDefinitions'][_0x5b3e89(0xf2)](_0x20922b=>_0x20922b['name']===_0x4a8727[_0x5b3e89(0xec)]),_0x1938a0=_0x376ca9[_0x5b3e89(0x112)][_0x5b3e89(0xc1)][_0x5b3e89(0xf2)](_0x47440d=>_0x47440d[_0x5b3e89(0xcb)]===_0x4a8727[_0x5b3e89(0xd4)]);!_0x498542&&!_0x1938a0[_0x5b3e89(0xfa)]&&(console[_0x5b3e89(0x169)](_0x5b3e89(0x161)),_0x498542=![]);if(_0x498542&&_0x11e8dc['linkActions']){const _0x4b8dbe=JSON[_0x5b3e89(0xb3)](_0x11e8dc[_0x5b3e89(0x16b)]);_0x4b8dbe[_0x5b3e89(0xcf)](_0x561e57=>{const _0x41da46=_0x5b3e89,_0x19576e={'currentParentNodeId':_0x4a8727[_0x41da46(0xe8)],'relParentNodeId':_0x4a8727[_0x41da46(0xe8)],'currentChildNodeId':_0x561e57['childNode'],'relChildNodeId':_0x561e57[_0x41da46(0xdf)],'action':_0x561e57[_0x41da46(0xe6)],'alternativeNode':_0x561e57[_0x41da46(0x164)],'relationshipId':_0x561e57[_0x41da46(0x130)],'relationshipLinkName':_0x561e57[_0x41da46(0x106)]};_0x1efae3[_0x41da46(0xc5)](_0x19576e),_0x19576e[_0x41da46(0xe6)]===_0x41da46(0xf1)&&!_0x19576e['alternativeNode']&&_0x11e8dc[_0x41da46(0xe6)]!==FORK[_0x41da46(0x154)]&&_0x11e8dc[_0x41da46(0xe6)]!==SUPFORK[_0x41da46(0x154)]&&(console[_0x41da46(0x169)]('(ECO)\x20missing\x20alternative'),_0x498542=![]);});}});if(!_0x498542)throw new Error('Missing\x20Requirements');const _0xcc8f98=_0x532cf0[_0x3d8770(0x127)](),_0x3e69cf=_0x720c7a['records']['map'](async _0x52d797=>{const _0x5c1e50=_0x3d8770,_0x4bb903=_0x52d797['get'](_0x5c1e50(0xe9))['properties'],[_0x32cabb]=_0x52d797['get'](_0x5c1e50(0xf0))[_0x5c1e50(0xe5)],{properties:_0x37fe87}=_0x52d797[_0x5c1e50(0x14f)](_0x5c1e50(0xf0)),{_id:_0x3f4283}=_0x37fe87,_0x2a3ce3={'_type':_0x32cabb,'_id':_0x3f4283,'properties':_0x37fe87},_0x15f8d0=_0x52d797[_0x5c1e50(0x14f)]('eco')[_0x5c1e50(0xbf)],_0x168259=returnVersioningRule(_0x2a3ce3,_0x4bb903[_0x5c1e50(0xe6)]),_0x10d1c0=returnNewVersion(_0x2a3ce3,_0x4bb903[_0x5c1e50(0xe6)]);let _0x20929e;switch(_0x168259){case INTERCHANGEABLE:_0x20929e=nodeCloning(_0xcc8f98,_0x2a3ce3,_0x41b95e,_0x10d1c0,![],_0x5c1e50(0x158),_0x15f8d0[_0x5c1e50(0xe8)],_0x4bb903[_0x5c1e50(0xe6)],INTERCHANGEABLE,![]);break;case NONINTERCHANGEABLE:_0x20929e=nodeCloning(_0xcc8f98,_0x2a3ce3,_0x41b95e,_0x10d1c0,![],_0x5c1e50(0x158),_0x15f8d0[_0x5c1e50(0xe8)],_0x4bb903[_0x5c1e50(0xe6)],NONINTERCHANGEABLE,![]);break;case FORK['value']:_0x20929e=nodeCloning(_0xcc8f98,_0x2a3ce3,_0x41b95e,_0x10d1c0,_0x4bb903[_0x5c1e50(0x13d)],_0x5c1e50(0x125),_0x15f8d0[_0x5c1e50(0xe8)],_0x4bb903[_0x5c1e50(0xe6)],NONINTERCHANGEABLE,![]);break;case SUPFORK[_0x5c1e50(0x154)]:_0x20929e=nodeCloning(_0xcc8f98,_0x2a3ce3,_0x41b95e,_0x10d1c0,_0x4bb903[_0x5c1e50(0x13d)],_0x5c1e50(0x125),_0x15f8d0[_0x5c1e50(0xe8)],_0x4bb903[_0x5c1e50(0xe6)],NONINTERCHANGEABLE,{'superseeded':!![]});break;case _0x5c1e50(0x12f):_0x20929e=nodeObsolete(_0xcc8f98,_0x2a3ce3);break;default:break;}return _0x20929e;}),_0x3fc451=await Promise['all'](_0x3e69cf);await _0xcc8f98['commit']();const _0x5d8d56=_0x532cf0[_0x3d8770(0x127)](),_0x2a1e79=_0x3fc451[_0x3d8770(0xcf)](async _0xb1941e=>{const _0x2e889d=_0x3d8770;try{if(!_0xb1941e||!_0xb1941e[_0x2e889d(0xec)])throw new Error(_0x2e889d(0x100));const _0x21ef44={'_type':_0xb1941e[_0x2e889d(0xec)],'_id':_0xb1941e[_0x2e889d(0x168)]},_0x37286f={'_type':_0xb1941e[_0x2e889d(0xec)],'_id':_0xb1941e[_0x2e889d(0xe8)]};if(!_0x21ef44[_0x2e889d(0xe8)])throw new Error(_0x2e889d(0xed));const _0x542653=await copyOutgoingRels(_0x5d8d56,_0x21ef44,_0x37286f,_0x41b95e,_0xb1941e[_0x2e889d(0x144)]);return _0x542653;}catch(_0x2cbcc6){return _0x2cbcc6;}});await Promise['all'](_0x2a1e79),await _0x5d8d56[_0x3d8770(0xde)]();const _0x235fd6=_0x532cf0[_0x3d8770(0x127)](),_0x12d5f6=_0x3fc451[_0x3d8770(0xcf)](async _0xbfcab2=>{const _0x353d8f=_0x3d8770;try{const _0x3a7009={'_type':_0xbfcab2[_0x353d8f(0xec)],'_id':_0xbfcab2['oldNodeId']},_0x42152c={'_type':_0xbfcab2[_0x353d8f(0xec)],'_id':_0xbfcab2[_0x353d8f(0xe8)]};if(!_0x3a7009['_id'])throw new Error(_0x353d8f(0xed));const _0x418c36=await copyIncomingRels(_0x235fd6,_0x3a7009,_0x42152c,_0x41b95e,_0xbfcab2[_0x353d8f(0x144)],_0xbfcab2[_0x353d8f(0x13e)]);return _0x418c36;}catch(_0x1eb703){return _0x1eb703;}});return await Promise['all'](_0x12d5f6),await _0x235fd6[_0x3d8770(0xde)](),_0x3fc451['forEach'](_0x144580=>{const _0x474ecd=_0x3d8770,_0x346f19=_0x1efae3['filter'](_0x347987=>_0x347987[_0x474ecd(0xcd)]===_0x144580[_0x474ecd(0x168)]),_0x12d164=_0x1efae3[_0x474ecd(0x146)](_0x58f763=>_0x58f763[_0x474ecd(0xbc)]===_0x144580['oldNodeId']);_0x346f19[_0x474ecd(0x10b)]&&_0x346f19['forEach'](_0x138a44=>{const _0x12abfb=_0x474ecd;_0x138a44[_0x12abfb(0xc2)]=_0x144580['_id'];}),_0x12d164[_0x474ecd(0x10b)]&&_0x12d164[_0x474ecd(0x143)](_0x1df95e=>{const _0x239f12=_0x474ecd;_0x1df95e[_0x239f12(0x110)]=_0x144580[_0x239f12(0xe8)];});}),await updateLinkActions(_0x1efae3,_0x41b95e),_0x37fa6b;}catch(_0x2c26bf){return console[_0x3d8770(0x169)](_0x2c26bf),_0x2c26bf;}},exports['cancelECO']=async _0x4e14d0=>{return await deleteGeneratedNodes(_0x4e14d0),_0x4e14d0;},exports['cancelVersionnedItems']=async _0x837969=>new Promise(_0x4ae43f=>{const _0x3d749f=_0x7f6e5a,{node:_0x2ca2af}=_0x837969,_0x321e80=driver[_0x3d749f(0x119)](),_0x3aff41=_0x3d749f(0x16e);_0x321e80[_0x3d749f(0x157)](_0x3aff41,{'ecoId':_0x2ca2af[_0x3d749f(0xe8)]})[_0x3d749f(0xf4)](()=>{const _0x467084=_0x3d749f;_0x837969[_0x467084(0xb6)][_0x467084(0xc5)]({'methodName':_0x467084(0x136),'state':_0x467084(0x116),'executionEnded':Date[_0x467084(0x160)](),'failed':![]}),_0x4ae43f(_0x837969);})['catch'](_0x400efd=>{const _0x58014f=_0x3d749f;console[_0x58014f(0x169)](_0x400efd);});}),exports[_0x7f6e5a(0x126)]=async _0x44c1f1=>{const _0x1c4087=_0x7f6e5a,_0x4b1b00=driver['session'](),_0x5cacc7=_0x1c4087(0x147),_0x587e4d=await _0x4b1b00[_0x1c4087(0x157)](_0x5cacc7,{'projectId':_0x44c1f1}),_0xc3ddfc=[];return _0x587e4d[_0x1c4087(0xe1)][_0x1c4087(0xcf)](_0x2082b0=>{const _0x55abe5=_0x1c4087;_0x2082b0[_0x55abe5(0x156)][_0x55abe5(0x143)]((_0x598ed0,_0x1fa65f)=>{const _0x1d50cb=_0x55abe5,_0x21b9d9={};if(_0x598ed0&&_0x598ed0[_0x1d50cb(0xe5)]){_0x1fa65f===0x2&&(_0x21b9d9['parentNode']={'_id':_0x2082b0['_fields'][0x0][_0x1d50cb(0xbf)][_0x1d50cb(0xe8)],'_type':_0x598ed0[_0x1d50cb(0xe5)][0x0]});_0x21b9d9[_0x1d50cb(0xbf)]=_0x598ed0['properties'];const [_0x218a1e]=_0x598ed0[_0x1d50cb(0xe5)];_0x21b9d9[_0x1d50cb(0xbf)][_0x1d50cb(0xec)]=_0x218a1e,_0x21b9d9['properties'][_0x1d50cb(0x130)]=_0x2082b0['_fields'][0x1]['properties'][_0x1d50cb(0xe8)],_0xc3ddfc[_0x1d50cb(0xc5)](_0x21b9d9);}});}),{'data':_0xc3ddfc,'length':_0xc3ddfc[_0x1c4087(0x10b)],'code':0xc8};};
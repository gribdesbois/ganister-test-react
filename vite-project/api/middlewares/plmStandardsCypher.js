const _0x495b8d=_0x3f6c;(function(_0x54fdd9,_0x104ea){const _0x4ef761=_0x3f6c,_0x31b092=_0x54fdd9();while(!![]){try{const _0x39c7d8=parseInt(_0x4ef761(0x1fc))/0x1+-parseInt(_0x4ef761(0x291))/0x2*(parseInt(_0x4ef761(0xc3))/0x3)+-parseInt(_0x4ef761(0x126))/0x4*(parseInt(_0x4ef761(0x142))/0x5)+-parseInt(_0x4ef761(0x290))/0x6+-parseInt(_0x4ef761(0xc9))/0x7+parseInt(_0x4ef761(0x294))/0x8*(-parseInt(_0x4ef761(0x133))/0x9)+parseInt(_0x4ef761(0x2b1))/0xa;if(_0x39c7d8===_0x104ea)break;else _0x31b092['push'](_0x31b092['shift']());}catch(_0x58763f){_0x31b092['push'](_0x31b092['shift']());}}}(_0x3cf2,0xbdf23));const _=require(_0x495b8d(0xff)),NODEU=require(_0x495b8d(0x105)),reportEngine=require(_0x495b8d(0x28a)),driver=require('../../config/config')['db'],basics=require('./basics'),config=require('../../config/config'),cadExchanger=require(_0x495b8d(0x11b)),dataConverters=require(_0x495b8d(0x2a7)),{customErrorCompact}=require('../helpers/errorsHelpers'),recursiveDepth=0x8,maxRevDepthSearch=0x14,booleize=_0x3111b5=>{const _0x1f8f03=_0x495b8d;if(_0x3111b5==='false'||_0x3111b5===_0x1f8f03(0x2b8))return![];return!!_0x3111b5;},customSuccess=_0x3d2414=>{return{'data':_0x3d2414,'code':0xc8,'error':![]};};function generateSetStatement(_0x205639){const _0xf2e7c1=[];return Object['keys'](_0x205639)['forEach'](_0x32635e=>{const _0x42a4c7=_0x3f6c;switch(typeof _0x205639[_0x32635e]){case'boolean':_0xf2e7c1['push'](_0x32635e+':'+_0x205639[_0x32635e]);break;case _0x42a4c7(0x174):case _0x42a4c7(0x1f8):_0xf2e7c1[_0x42a4c7(0xf0)](_0x32635e+':\x27'+_['escape'](_0x205639[_0x32635e])[_0x42a4c7(0x1c5)](/\\/g,'\x5c\x5c')['replace'](/(?:\r\n|\r|\n)/g,_0x42a4c7(0x19d))+'\x27');break;case'number':_0xf2e7c1[_0x42a4c7(0xf0)](_0x32635e+':'+_0x205639[_0x32635e]);break;case'array':_0xf2e7c1[_0x42a4c7(0xf0)](_0x32635e+':'+_0x205639[_0x32635e]);break;default:break;}}),_0xf2e7c1['join']();}const getNodePropsOptionalMatch=(_0x459d92,_0xd7b0c4,_0x4ee869=[])=>{const _0x5e2fd3=_0x495b8d,_0x2c05d6=[],_0x4edbfe=new Set();return _0x459d92[_0x5e2fd3(0x156)](_0x22900f=>{const _0x5a4c2f=_0x5e2fd3;if(!_0x4edbfe[_0x5a4c2f(0x1e4)](_0x22900f[_0x5a4c2f(0x25b)])){_0x4edbfe['add'](_0x22900f['name']);const _0x531e3e=_0x4ee869[_0x5a4c2f(0x18a)](_0x334d47=>_0x334d47[_0x5a4c2f(0x23f)]===_0x22900f['name']),_0x44bafb=global['datamodel'][_0x5a4c2f(0xba)][_0x5a4c2f(0x18a)](_0x19d841=>{const _0x7ecd20=_0x5a4c2f;return _0x19d841['id']===_0x22900f[_0x7ecd20(0x1a2)];});if(!_0x44bafb)return;const _0xe1f9b9=_0x44bafb[_0x5a4c2f(0x119)][_0x5a4c2f(0x18a)](_0x3c65d6=>{const _0x37410b=_0x5a4c2f;return _0x3c65d6[_0x37410b(0x21d)]===_0x22900f['sourceNodetype'];});if(!_0xe1f9b9)return;const _0x4538f3=global['datamodel'][_0x5a4c2f(0xba)][_0x5a4c2f(0x18a)](_0x27b9e5=>{return _0x27b9e5['id']===_0xe1f9b9['target'];});if(_0x531e3e){if(_0x44bafb){const _0x50cfdd=_0x4538f3['maidenName'][_0x5a4c2f(0x222)],_0x213147=_0x50cfdd[_0x5a4c2f(0x139)](_0x510b95=>{const _0x77e3da=_0x5a4c2f;return _0x77e3da(0x269)+_0x22900f[_0x77e3da(0x25b)]+'.'+_0x510b95+_0x77e3da(0x283)+_0x531e3e[_0x77e3da(0x1ff)]+'\x27)';});_0x2c05d6[_0x5a4c2f(0xf0)](_0x5a4c2f(0x2b2)+_0xd7b0c4+')-[r_'+_0x22900f[_0x5a4c2f(0x25b)]+':'+_0x44bafb[_0x5a4c2f(0x10f)]+_0x5a4c2f(0xd0)+_0x22900f[_0x5a4c2f(0x25b)]+':'+_0x4538f3[_0x5a4c2f(0x25b)]+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20'+_0x213147[_0x5a4c2f(0x217)](_0x5a4c2f(0x125)));}else console[_0x5a4c2f(0x131)](_0x5a4c2f(0xe0)+_0x22900f['relationship']);}else _0x44bafb?_0x2c05d6[_0x5a4c2f(0xf0)](_0x5a4c2f(0x255)+_0xd7b0c4+_0x5a4c2f(0x28e)+_0x22900f[_0x5a4c2f(0x25b)]+':'+_0x44bafb[_0x5a4c2f(0x10f)]+_0x5a4c2f(0xd0)+_0x22900f['name']+':'+_0x4538f3[_0x5a4c2f(0x25b)]+')'):console[_0x5a4c2f(0x131)]('error\x20finding\x20relInfo\x20data\x20for\x20rel:\x20'+_0x22900f[_0x5a4c2f(0x1a2)]);}}),_0x2c05d6;};function _0x3f6c(_0x3ae00f,_0xf1aeb6){const _0x3cf2c6=_0x3cf2();return _0x3f6c=function(_0x3f6cec,_0x3fca88){_0x3f6cec=_0x3f6cec-0x9f;let _0x40dab3=_0x3cf2c6[_0x3f6cec];return _0x40dab3;},_0x3f6c(_0x3ae00f,_0xf1aeb6);}function _0x3cf2(){const _0xb2baa4=['_fields','relationshipsDeleted','instanciations','getRevision','\x20is\x20set\x20to\x20','Nodetype\x20cadDocument\x20definition\x20not\x20found\x20in\x20datamodel','MERGE','inherited','substring','Not\x20the\x20latest\x20version\x20of\x20the\x20node','\x20MATCH\x20(node:','sourceBOM','childRelType','Ganister:\x20Assignment\x20Notification','toUpperCase','forEach','getNodeParents','commit','_lockedBy','fileUpdate','close','Graph\x20View\x20with\x20name\x20','\x22\x20is\x20already\x20in\x20ECO:\x20\x22','_id','\x20MATCH\x20(g:Group)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(g)<-[i:isMemberOf]-(h)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20(h:Group\x20OR\x20h:user)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20g\x20as\x20Node,\x20h\x20as\x20Member,i\x20as\x20Membership','Check\x20Unique\x20Fields\x20failed','getECOControlledNode','Cannot\x20Check\x20Lifecycle\x20State\x20Owner','deleteGroup','\x20{_id:$nodeId})-[relationship:','GraphView\x20exists\x20but\x20has\x20no\x20definition','_promotions','quantity','node.','then','time','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.encoding\x20=\x20\x22','impactedChildNodeLabels','\x20MATCH\x20(team:Group{_id:\x27','The\x20custom\x20Table\x20View\x20with\x20name\x20','childNode','lifecycle','handlesChangeOf._type\x20=\x20\x27handlesChangeOf\x27','linkActions','_ecoHandled','string','customTreeGridView','Nodes','Relationship\x20not\x20found','localizer','norelationshipbrowsing','\x20{_id:$nodeId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20$instanciationId\x20IN\x20n._serialized\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x20path=(n)-[r:','Report\x20Failed','Cannot\x20Get\x20Roles\x20Detail','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._handled\x20=\x20false,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._createdOn\x20=\x20','Custom\x20Table\x20View\x20does\x20not\x20exist','forks','password','checkLicenceNodes','getECOControlledItems','node._id','getNodePropsInfo','File\x20was\x20not\x20checkedOut','Instanciation\x20Target\x20Nodetype\x20not\x20found\x20in\x20datamodel','nodetypeCreationChange','SourceBOM,\x20TargetRel\x20and\x20TargetBOM\x20are\x20required\x20on\x20instanciation\x20config','cypher','find','getGrapgViewContent','\x0a\x20\x20\x20\x20MATCH\x20(node:','beginTransaction','isEqual','assignmentFor','cadDocument','fileRemoveCheckOut','impactedChildNode','Error\x20Removing\x20Node\x20from\x20ECO','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file._checkedOutOn\x20=\x20','firstName','changePasswordToken','parents','The\x20Cypher\x20statement\x20contains\x20an\x20editing\x20statement\x20forbidden\x20in\x20such\x20query','LabelsManaged','splice','checkUniqueFields','Cannot\x20Get\x20Part','<br>','canCreate','sourceNodetype','REMOVE','targetBOM','relationship','\x20{_id:$nodeId})<-[rel]-(parentNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20parentNode:user\x20AND\x20NOT\x20parentNode:PermissionSet\x20AND\x20NOT\x20parentNode:Group\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20parentNode,\x20rel','lockable','query','rel','locked','datamodel','apocInstalled','Error\x20Creating\x20Thumbnail\x20Node\x20for\x20CAD\x20Document\x20creation','Member','parentRelType','type','ðŸš«\x20you\x20have\x20no\x20rights\x20to\x20create\x20file\x20node','counters','getNodeLockState','\x20not\x20found\x20in\x20datamodel','indexOf','get','session','reports','toString','\x22}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(parentIN:','Cannot\x20create\x20Node','\x20=\x20','emit','handlesChangeOf.','parentRel','roles','relationshipId','\x0a\x20\x20\x20\x20MATCH\x20(sourceNode:','\x27},\x20\x0a\x20\x20\x20\x20\x20\x20newFile.url\x20=\x20\x22','\x22})\x20RETURN\x20n','title','timeEnd','root','replace','\x22\x20to\x20ECO','teamRoles','Cannot\x20Get\x20GraphView\x20Cypher\x20Statement\x20Working','Nodes\x20updated','template','getReportContent','updatePermissionGlobal','\x20MATCH\x20(node{_id:$nodeId})<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO{_id:$ecoId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20','Roles\x20not\x20initiated','finally','Selected\x20node:\x20\x22','impactedParentNode','Cannot\x20Get\x20Report\x20Content','Nodetype\x20','getTeamDetails','lcRole','orgHierarchy','identity','_serialized','unControlledParentNodeLabels','child','uniqBy','Error\x20Getting\x20ECO\x20Controlled\x20Node','getCustomTableViewContent','Error\x20Creating\x20part','Cad\x20Exchanger\x20Configuration\x20is\x20not\x20correct.\x20Check\x20your\x20clientId,\x20clientSecret\x20and\x20baseURl','alternativeNodeLabel','notification','filesize','{\x20_type:\x20\x27','has','length','targetRel','createCADDocument','isError','Error\x20Getting\x20ECO\x20Controlled\x20Nodes','\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)<-[handlesChangeOf:handlesChangeOf]-(ECO{_id:$ecoId})\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)-[childRel:','node','\x20{_id:\x20$nodeId})<-[rel:assignmentFor\x20{_id:\x20$relId}]-(assignment:assignment)\x0a\x20\x20\x20\x20WHERE\x20(sourceNode._lockState\x20=\x20false)\x20OR\x20(sourceNode._lockState\x20=\x20true\x20AND\x20sourceNode._lockedBy\x20=\x20$userId)\x0a\x20\x20\x20\x20DELETE\x20rel','1.0.0','boolean','\x20{_id:$nodeId})\x20RETURN\x20n','impactedNode','#(.*?)#','DELETE','The\x20Report\x20with\x20id\x20','Looks\x20like\x20node\x20is\x20not\x20controlled\x20from\x20that\x20eco','\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node{_id:$nodeId})<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO{_id:$ecoId})\x20\x0a\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20handlesChangeOf.linkActions\x20=\x20\x27',']-(unControlledParentNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20NOT((unControlledParentNode)-[:revises*]->()<-[:generated]-(ECO))\x20AND\x0a\x20\x20\x20\x20\x20\x20parentRel._versioned\x20IS\x20NULL\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20node,\x20LABELS(node)\x20as\x20LabelsHandled,\x20generated,\x20ECO,\x20unControlledChildNode,\x20LABELS(unControlledChildNode)\x20as\x20unControlledChildNodeLabels,\x20childRel,\x20type(childRel)\x20as\x20childRelType,\x20unControlledParentNode,\x20LABELS(unControlledParentNode)\x20as\x20unControlledParentNodeLabels,\x20parentRel,\x20type(parentRel)\x20as\x20parentRelType','Cannot\x20Check\x20Node\x20Creation\x20Right','richText','Import','\x0a\x20\x20\x20\x20MATCH\x20(cadDocument\x20{_id:\x20$id})-[hasNativeFileSourceRel:hasNativeFile]->(nativeFile:file)\x0a\x20\x20\x20\x20RETURN\x20cadDocument,\x20nativeFile','cadExchanger','1470558PARKZU','\x20with\x20id:\x20','records','value','_maidenName','initTeamRoles',']-(user:user)\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20user','Subscription\x20not\x20found','catch','thumbnail','stringify',']-(impactedParentNode)\x20\x0a\x20\x20WHERE\x20\x0a\x20\x20\x20\x20NOT((impactedParentNode)-[:revises]->()<-[:generated]-(ECO))\x20AND\x0a\x20\x20\x20\x20NOT((impactedParentNode)-[:revises*]->()<-[:handlesChangeOf]-(ECO))\x20AND\x0a\x20\x20\x20\x20NOT((impactedParentNode)<-[:revises]-()-[:','\x20RETURN\x20count(n)','Node\x20not\x20found','getGraphViewContent','members','relationships','handlesChangeOf','filename','displayNames',']-(latestNode)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20(latestNode)<-[:revises]-()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node,\x20latestNode,\x20handlesChangeOf\x20as\x20handle,\x20ECO','group\x20Id\x20is\x20required','mimetype','all','\x27}]->(instanciationNode)\x0a\x20\x20\x20\x20RETURN\x20instanciationNode','visitor','Node\x20subscription\x20failed','join','user','author',']->(impactedChildNode)\x0a\x20\x20WHERE\x20\x0a\x20\x20\x20\x20NOT((impactedChildNode)-[:revises]->()<-[:generated]-(ECO))\x20\x20\x20\x0a\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20(node)<-[parentRel:','ECO','\x20has\x20no\x20definition','source','\x20definition\x20not\x20found','owner','RETURN\x20apoc.version()','uniq','elements','\x20MATCH\x20(g:Group{_id:\x27','part','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file._checkedOutByName\x20=\x20\x22','MATCH\x20(n:','notifyIdentityChange','MATCH\x20(g:Group{_id:$groupId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(g)<-[]-(role:Group{groupType:\x27role\x27})\x20DETACH\x20DELETE\x20role\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DETACH\x20DELETE\x20g\x20','fileCheckIn',']->()<-[:handlesChangeOf]-(ECO))\x20\x20\x20AND\x0a\x20\x20\x20\x20\x20\x20parentRel._versioned\x20IS\x20NULL\x20AND\x20NOT(\x20(unControlledParentNode)<-[:generated]-(ECO{_id:$ecoId}))\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20node,\x20LABELS(node)\x20as\x20LabelsHandled,\x20handlesChangeOf,\x20ECO,\x20unControlledChildNode,\x20LABELS(unControlledChildNode)\x20as\x20unControlledChildNodeLabels,\x20childRel,\x20type(childRel)\x20as\x20childRelType,\x20unControlledParentNode,\x20LABELS(unControlledParentNode)\x20as\x20unControlledParentNodeLabels,\x20parentRel,\x20type(parentRel)\x20as\x20parentRelType','Cannot\x20Delete\x20Group','detachLifecycleAssignment','publicFile','sourceKey','parentNode',',\x20<br><br>You\x20have\x20been\x20linked\x20to\x20an\x20',']->(unControlledChildNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20NOT((unControlledChildNode)-[:revises]->()<-[:generated]-(ECO))\x20\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)<-[parentRel:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(endNode:','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.filename\x20=\x20\x22','Cannot\x20Get\x20CAD\x20Exchanger\x20Revision','fork','hasThumbnail','Node\x20not\x20found\x20in\x20ECO','tabs','getCadDocumentFlatList','publicCADDocument','unControlledChildNode','includes','isEmpty','\x0aMATCH\x20(a:','prop','fields','File\x20is\x20locked\x20in\x20','}]->(endNode),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(parentIN)-[r2:',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20node._id\x20<>\x20$nodeId\x20AND\x20NOT(node)<-[:revises]-()\x20AND\x20(','createPart','buildMaidenName','unControlledChildNode:','Nodetype\x20file\x20definition\x20not\x20found\x20in\x20datamodel','\x27\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20node,\x20handlesChangeOf\x20as\x20handle,\x20ECO','Cannot\x20Attach\x20Lifecycle\x20Assignment','unControlledParentNode:','}),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(iN)-[r:','\x20=\x20\x27','\x20=\x20\x22','pop','addNodeToECO','Looks\x20like\x20file\x20is\x20not\x20contained\x20in\x20any\x20node','nativeFile','Cannot\x20Get\x20Node\x20Assignments','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file._modifiedOn\x20=\x20','addNode','OPTIONAL\x20MATCH\x20(','\x20does\x20not\x20exist','summary','tracked','PermissionSets','\x22})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(permission:PermissionSet{name:\x22','name','Cannot\x20Init\x20Roles','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.encoding\x20=\x20\x22','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._createdByName\x20=\x20\x27','Error\x20Getting\x20ECO\x20Controlled\x20Items','Cannot\x20Upload\x20CAD\x20File\x20to\x20CAD\x20Exchanger','url','updateNodesStateConfig','updateECOControlledNodeLinkActions','\x20MATCH\x20(node\x20{_id:$nodeId}),(ECO{_id:$ecoId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20(node)<-[:revises]-()\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20(node)<-[handlesChangeOf:handlesChangeOf]-(ECO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._type\x20=\x20\x27handlesChangeOf\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._id\x20=\x20\x27','fileCheckOut','unControlledChildNodeLabels','\x27\x20}]->(iN)','message','toLower(t_','queries','relation','Change\x20Method\x20for\x20','\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node{_id:$nodeId})<-[handlesChangeOf:handlesChangeOf]-(ECO:eco{_id:$ecoId})\x20\x0a\x20\x20\x20\x20RETURN\x0a\x20\x20\x20\x20\x20\x20handlesChangeOf\x20as\x20handle','Cannot\x20Check\x20File','_stats','changeMethod','MATCH\x20(user:user{_id:$userId})-[subscription:subscribeTo]->(node:','operation','mapping','getECOControlledNodes','now','\x27}]-(:Group{groupType:\x27role\x27,_id:\x27Role_','_history','MATCH\x20(u:user)\x20RETURN\x20u','properties.','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.sourceKey\x20=\x20\x22','handle','Cannot\x20Get\x20CustomTableView\x20Cypher\x20Statement\x20Working','childRel','(g)<-[:isMemberOf{_type:\x27groupMember\x27,_id:\x27GM_','\x20MATCH\x20(n:','parse','elementType','getLifecycleAssignments',')\x20CONTAINS\x20toLower(\x27','_type','\x22,\x0a\x20\x20\x20\x20\x20\x20r._createdByName\x20=\x20\x22','_filterRemove','html','checkUserCreationRight','columns','ganister-cypher-reporter','Cannot\x20add\x20Node\x20\x22','generated','unControlledParentNode',')-[r_',']->(cadDocument:cadDocument)-[hasNativeFile:hasNativeFile]->(nativeFile:file)\x0a\x20\x20RETURN\x20cadDocument,\x20hasNativeFile,\x20nativeFile,\x20consumesRel','220020OsNvmF','870286AkbRuQ','Cannot\x20Get\x20Node','true','1582496PxXWAg','getECOProcessedItems',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf.action\x20=\x20\x27major\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handlesChangeOf._createdBy\x20=\x20\x27','newFile','\x22,\x0a\x20\x20\x20\x20\x20\x20r._id\x20=\x20\x22','some','updateECOControlledNode','uploadCADFileToCADExchanger','assignment','checkNodeCreationRight','\x27})<-[:isMemberOf]-(role:Group)<-[:isMemberOf]-(user:user)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20team,role,user','subscribeToNode','Cannot\x20Get\x20Parent\x20Node','getGroupsFullStructure','<br>\x20Â·\x20','uniqWith','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.filename\x20=\x20\x22','\x22,\x0a\x20\x20\x20\x20\x20\x20r._createdBy\x20=\x20\x22','uploadFile','../helpers/reportDataConverters','}]->(iN),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(permission)-[:accessRole{\x20_type:\x20\x27accessRole\x27,\x20role:\x27permissionSet\x27,\x20_id:\x20\x27','data','Node','\x20MATCH\x20(a:','The\x20actual\x20node\x20can\x27t\x20be\x20instanciated\x20due\x20to\x20its\x20configuration.','revision','properties._id','member','addRelationship','28887120lgahXO','MATCH\x20(','paths','removeAll','SET','\x22})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(iN:','_displayName','False','endNode',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.source\x20=\x20\x22','file','manages','ganister','\x27,\x0a\x20\x20\x20\x20\x20\x20_createdByName:\x20\x27','types','Error\x20Updating\x20ECO\x20Controlled\x20Node','remove',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20node._id=$nodeId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DELETE\x20subscription\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20subscription','orgJoin','cadConversion','Report\x20View\x20does\x20not\x20exist','\x20MATCH\x20(node{_id:$nodeId})<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO{_id:$ecoId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DELETE\x20handlesChangeOf\x20','merged','Error\x20Creating\x20File\x20Node\x20for\x20CAD\x20Document\x20creation','buildReport','run','\x20{_id:$nodeId})\x20RETURN\x20a._lockState\x20as\x20_lockState','role','Error\x20Updating\x20ECO\x20Controlled\x20Node\x20Link\x20Actions','CALL','eco','LabelsHandled','treeStructure','_labelRef','uxConfig','filter','\x0a\x20\x20MATCH\x20(node\x20{_id:\x20$id})-[consumesRel:consumes*1..','\x27,name:\x27','released','cadDocNativeFile','\x20{_state:\x20\x22','encoding','startNode','nodetypeDefinitions','_lockState','No\x20parent\x20node\x20found\x20for\x20file','Cypher\x20Query\x20Error','checkCADFileExt','You\x20have\x20exceeded\x20the\x20max\x20number\x20of\x20nodes\x20allowed.\x20(','This\x20version\x20of\x20node\x20is\x20not\x20the\x20latest','start','GraphView\x20does\x20not\x20exist','3dyWKph','Node\x20or\x20relationships\x20not\x20found','states','groupType',']->()<-[:handlesChangeOf]-(ECO))\x0a\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20(node)-[:revises]->(revision)<-[:handlesChangeOf]-(ECO)\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20(node)-[:forks]->(fork)<-[:handlesChangeOf]-(ECO)\x0a\x20\x20RETURN\x0a\x20\x20\x20\x20node,\x20revision,fork,\x20LABELS(node)\x20as\x20LabelsManaged,\x20type(manages)\x20as\x20ManageRelType,\x20manages,\x20ECO,\x20impactedChildNode,\x20LABELS(impactedChildNode)\x20as\x20impactedChildNodeLabels,\x20childRel,\x20type(childRel)\x20as\x20childRelType,\x20impactedParentNode,\x20LABELS(impactedParentNode)\x20as\x20impactedParentNodeLabels,\x20parentRel,\x20type(parentRel)\x20as\x20parentRelType','\x27,\x0a\x20\x20\x20\x20\x20\x20_createdOn:\x20timestamp()\x0a\x20\x20\x20\x20}','10092551zZOMYs','latestNode','Failed\x20to\x20create\x20','\x20definition\x20not\x20found\x20in\x20datamodel','graphView','parent','status',']->(t_','Property','labels','customTableView','revises','MATCH\x20(node:','\x20{_id:\x22','segments','send','\x27})\x0a\x20\x20\x20\x20\x20\x20RETURN\x20g','configManager','\x22\x20must\x20be\x20in\x20a\x20released\x20state','Cannot\x20Get\x20ECOs','instanciateNode',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20file._checkedOutBy\x20=\x20\x22','\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(startNode\x20{_id:$startNodeId})\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(permission:PermissionSet{name:$targetNodetypeDMName})\x0a\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20(instanciationNode:','error\x20finding\x20relInfo\x20data\x20for\x20rel:\x20','Custom\x20Table\x20View\x20exists\x20but\x20has\x20no\x20definition','integer','\x20MATCH\x20(node{_id:$nodeId})<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO{_id:$ecoId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node,handlesChangeOf,ECO','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile._modifiedOn\x20=\x20','attachLifecycleAssignment','maidenName','\x20{_id:\x20$nodeId})<-[rel:assignmentFor]-(nodes:\x20assignment)\x0a\x20\x20\x20\x20','Cannot\x20Detach\x20Lifecycle\x20Assignment','alternativeNodeVer','properties','groupBy','getECOAllItems','\x22\x20})\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(n)<-[actualAccess:accessRole]-(:PermissionSet)\x0a\x20\x20\x20\x20DELETE\x20actualAccess\x0a\x20\x20\x20\x20CREATE\x20(p)-[r:accessRole]->(n)\x0a\x20\x20\x20\x20SET\x20r\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20_type:\x20\x27accessRole\x27,\x0a\x20\x20\x20\x20\x20\x20_id:\x20randomUUID(),\x0a\x20\x20\x20\x20\x20\x20role:\x20\x27permissionSet\x27,\x0a\x20\x20\x20\x20\x20\x20canCreate:\x20false,\x0a\x20\x20\x20\x20\x20\x20_createdBy:\x20\x27','\x20definition\x20state\x20','handles','push','config','email','impactedNodes','CREATE','Dear\x20','Cannot\x20Instanciate\x20Node','hasOwnProperty','\x20AND\x20node._lockedBy\x20<>\x20$userId\x0a\x20\x20\x20\x20RETURN\x20node','sourceType','Error\x20Creating\x20Relationship\x20between\x20CAD\x20Document\x20and\x20cadFile','\x20MATCH\x20(g:Group)\x20\x0a\x20\x20OPTIONAL\x20MATCH\x20(g)<-[i:isMemberOf]-(h)\x0a\x20\x20WHERE\x20(h:Group\x20OR\x20h:user)\x20\x0a\x20\x20OPTIONAL\x20MATCH\x20(p:PermissionSet)<-[a:accessRole]-(g)\x20\x0a\x20\x20OPTIONAL\x20MATCH\x20(k:Group)<-[:isMemberOf]-(g)\x0a\x20\x20RETURN\x20DISTINCT(g)\x20as\x20Node,\x20COLLECT(DISTINCT(h))\x20as\x20Members,\x20COLLECT(a)\x20as\x20accessRoles,\x20COLLECT(p)\x20as\x20PermissionSets,\x20COLLECT(k)\x20as\x20Parent','\x20\x0a\x20\x20\x20\x20RETURN\x20DISTINCT\x20nodes\x20as\x20Nodes,\x20','getReverseEcos','Cannot\x20Update\x20Permission\x20Global','lodash','fileCheckInOutCheck','alternativeNode','nodes','keys','isArray','uuid','Node\x20unsubscribe\x20failed','_isContextual','core','removeNodeFromECO','findIndex','\x20for\x20','Cannot\x20Create\x20Node','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.size\x20=\x20','Error\x20Getting\x20ECO\x20Items','linkName','Relationship\x20between\x20ECO\x20and\x20Node\x20not\x20found','MATCH\x20(a:','\x22})\x20SET\x20n._lockable\x20=\x20','writer','separator','date','\x0a\x20\x20\x20\x20RETURN\x20newFile','checkLifecycleStateOwner','Parent','directions','Cannot\x20Subscribe/Unsubscribe\x20to\x20Node','./external-apis/cadExchanger','double','group','end','null','_state','{_id:$nodeId})-[:revises*0..30]->(n)<-[:generated|handlesChangeOf]-(ECO)\x0aRETURN\x20DISTINCT\x20ECO\x0a',']->(unControlledChildNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20NOT((unControlledChildNode)-[:revises]->()<-[:generated]-(ECO))\x20\x20\x20AND\x0a\x20\x20\x20\x20NOT((unControlledChildNode)-[:revises]-()<-[:handlesChangeOf]-(ECO))\x20\x20\x20AND\x0a\x20\x20\x20\x20\x20\x20childRel._versioned\x20IS\x20NULL\x20AND\x20NOT(\x20(unControlledChildNode)<-[:generated]-(ECO{_id:$ecoId}))\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)<-[parentRel:','_ref','accessRoles','\x20OR\x20','1923092QUhaks','permissionSets','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node,\x20handlesChangeOf\x20as\x20handle,\x20ECO','Non-unique\x20values\x20on\x20the\x20following\x20fields:\x20','FOREACH',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node','\x0a\x20\x20\x20\x20RETURN\x20file','owned','\x0a\x20\x20MATCH\x0a\x20\x20\x20\x20(node)<-[manages:handlesChangeOf|generated]-(ECO{_id:$ecoId})\x0a\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20(node)-[childRel:','Duplicate\x20Field\x20Value\x20found','impactedParentNodeLabels','error','match','54VbSjnU','count','\x27,\x20_isEffective:true}]-(node),\x0a\x20\x20\x20\x20\x20\x20(newFile)<-[ar:accessRole{\x20_type:\x20\x27accessRole\x27,\x20_id:\x27','_version','\x0a\x20\x20\x20\x20MATCH\x20(n:','\x27})<-[:accessRole{role:\x27permissionSet\x27}]-(PS)','map','\x0a\x20\x20\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})\x0a\x20\x20\x20\x20SET\x20file.url\x20=\x20\x22','split','\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.size\x20=\x20','Membership','add','capitalize','path','*..10]->(x)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20$instanciationId\x20IN\x20x._serialized\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20n,\x20path','5ECqRoq','Cannot\x20Get\x20Node\x20Lock\x20State','\x0a\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})<-[rel]-(node)\x0a\x20\x20WHERE\x20node._releasedOn\x20IS\x20NOT\x20NULL\x20AND\x20rel._isEffective\x20IS\x20NOT\x20NULL\x20AND\x20NOT\x20(type(rel)=\x27revises\x27)\x20\x20AND\x20NOT\x20(type(rel)=\x27accessRole\x27)\x20\x0a\x20\x20RETURN\x20node,rel','\x0a\x20\x20\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})<-[rel]-(node)\x0a\x20\x20\x20\x20WHERE\x20node._releasedOn\x20IS\x20NULL\x20AND\x20NOT\x20(type(rel)=\x27revises\x27)\x20\x20AND\x20NOT\x20(type(rel)=\x27accessRole\x27)\x20\x0a\x20\x20\x20\x20DELETE\x20rel\x0a\x20\x20\x20\x20RETURN\x20node,rel','targetNodeId'];_0x3cf2=function(){return _0xb2baa4;};return _0x3cf2();}function formatSingleNeoNode(_0x4b25c1,_0x1f73d9,_0x23e009,_0xd7926a=![]){const _0x2966fa=_0x495b8d,_0x3cdf20={};_0x3cdf20[_0x2966fa(0x15e)]=_[_0x2966fa(0x1b3)](_0x4b25c1['get'](_0x2966fa(0x176)),'properties._id','null'),_0x3cdf20['_type']=_[_0x2966fa(0x1b3)](_0x4b25c1['get'](_0x2966fa(0x176)),'labels[0]',_0x2966fa(0x11f)),_0x3cdf20[_0x2966fa(0xea)]=_[_0x2966fa(0x1b3)](_0x4b25c1[_0x2966fa(0x1b3)]('Nodes'),_0x2966fa(0xea),'null');if(_0x4b25c1[_0x2966fa(0x1e4)](_0x2966fa(0xad)))_0x3cdf20[_0x2966fa(0x173)]=_['get'](_0x4b25c1[_0x2966fa(0x1b3)]('eco'),_0x2966fa(0x2ae),_0x2966fa(0x11f));_0x3cdf20[_0x2966fa(0x284)]===_0x2966fa(0x218)&&(delete _0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0x180)],delete _0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0x196)]);if(_0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0xbb)]!==!![])_0x3cdf20[_0x2966fa(0x1a7)]=0x0;else _0x3cdf20[_0x2966fa(0xea)]['_lockState']===!![]&&_0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0x159)]===_0x23e009?_0x3cdf20[_0x2966fa(0x1a7)]=0x1:_0x3cdf20[_0x2966fa(0x1a7)]=0x2;if(!_0x3cdf20[_0x2966fa(0xea)]['_serialized'])_0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0x1d8)]=[];if(_0x1f73d9[_0x2966fa(0xe6)]){if(_0x1f73d9[_0x2966fa(0xe6)][_0x2966fa(0x222)]){const _0x1e4d9c=[];_0x1f73d9[_0x2966fa(0xe6)][_0x2966fa(0x222)][_0x2966fa(0x156)](_0x366aa1=>{const _0x5a5cf2=_0x2966fa;_0x1e4d9c[_0x5a5cf2(0xf0)](_[_0x5a5cf2(0x1b3)](_0x4b25c1[_0x5a5cf2(0x1b3)](_0x5a5cf2(0x176)),_0x5a5cf2(0x279)+_0x366aa1,_0x5a5cf2(0x11f)));}),_0x3cdf20[_0x2966fa(0xb0)]=_0x1e4d9c[_0x2966fa(0x217)](_0x1f73d9[_0x2966fa(0xe6)][_0x2966fa(0x114)]);}}else _0x3cdf20[_0x2966fa(0xb0)]=_0x3cdf20[_0x2966fa(0x15e)];delete _0x3cdf20[_0x2966fa(0x277)],delete _0x3cdf20[_0x2966fa(0xea)][_0x2966fa(0x277)];const _0x5cde76=_0x1f73d9['properties'][_0x2966fa(0xb2)](_0x229193=>_0x229193[_0x2966fa(0x1ad)]===_0x2966fa(0x1ee)&&(_0x229193[_0x2966fa(0x1a2)]||_0x229193[_0x2966fa(0x108)]));return _0x5cde76[_0x2966fa(0x139)](_0x290fe7=>{const _0x3c6492=_0x2966fa;!_0x3cdf20['properties'][_0x290fe7[_0x3c6492(0x25b)]]&&(_0x3cdf20['properties'][_0x290fe7[_0x3c6492(0x25b)]]=_0x3c6492(0x11f));}),_0x3cdf20;}const getUsers=async()=>{const _0x512407=_0x495b8d,_0x1597d7=[],_0x481ce3=driver[_0x512407(0x1b4)](),_0x1f1f44=_0x512407(0x278),_0x542dca=await _0x481ce3['run'](_0x1f1f44);return _0x481ce3[_0x512407(0x15b)](),_0x542dca['records']['length']>0x0&&_0x542dca['records'][_0x512407(0x139)](_0x20f132=>{const _0x3775a8=_0x512407,_0x2c4286=_0x20f132[_0x3775a8(0x1b3)]('u')[_0x3775a8(0xea)];_0x2c4286&&(delete _0x2c4286[_0x3775a8(0x180)],delete _0x2c4286[_0x3775a8(0x196)],_0x1597d7[_0x3775a8(0xf0)](_0x2c4286));}),_0x1597d7;};let nodeTypeCreationCache={};const checkUserNodeTypeCreation=(_0x304414,_0x460b3f)=>{const _0x1d6178=_0x495b8d,{_id:_0x59741b}=_0x460b3f;return global[_0x1d6178(0x187)]&&(nodeTypeCreationCache={},global[_0x1d6178(0x187)]=![]),!nodeTypeCreationCache[_0x1d6178(0xf7)](_0x59741b)&&(nodeTypeCreationCache[_0x59741b]={}),!nodeTypeCreationCache[_0x59741b]['hasOwnProperty'](_0x304414)&&(nodeTypeCreationCache[_0x59741b][_0x304414]=basics[_0x1d6178(0x288)](_0x304414,_0x460b3f)[_0x1d6178(0x169)](_0x2c88f5=>_0x2c88f5)),nodeTypeCreationCache[_0x59741b][_0x304414];},manipulateECOControlledNodeLinkActions=async(_0xdecc00,_0x1cb8d6,_0xfc1043)=>{const _0xa5f56a=_0x495b8d,_0xa32996=_0xa5f56a(0x26d),_0x1e3dfa=driver['session'](),_0x2b253b=await _0x1e3dfa[_0xa5f56a(0xa8)](_0xa32996,{'nodeId':_0x1cb8d6,'ecoId':_0xdecc00})['catch'](_0x5cf675=>{const _0x2d8830=_0xa5f56a;return customErrorCompact(_0x2d8830(0xbd),_0x5cf675[_0x2d8830(0x268)],0x1f4,'manipulateECOControlledNodeLinkActions',![],_0xa32996,_0x5cf675);});_0x1e3dfa['close']();if(_0x2b253b[_0xa5f56a(0x131)])return _0x2b253b;if(!_0x2b253b[_0xa5f56a(0x1fe)][_0xa5f56a(0x1e5)])return customErrorCompact(_0xa5f56a(0x110),_0xa5f56a(0x1f4),0x1f4,'manipulateECOControlledNodeLinkActions',![],!![]);const _0x3cfac7=_[_0xa5f56a(0x1b3)](_0x2b253b['records'][0x0][_0xa5f56a(0x1b3)]('handle'),_0xa5f56a(0xea),_0xa5f56a(0x11f));let _0xabbaab=[];return _0x3cfac7[_0xa5f56a(0x172)]&&(_0xabbaab=JSON[_0xa5f56a(0x280)](_0x3cfac7['linkActions'][_0xa5f56a(0x1c5)](/\\'/g,'\x27'))),_0x3cfac7['action']!=='obsolete'?_0xfc1043['map'](_0x1663d5=>{const _0x2508a3=_0xa5f56a,_0x3a6188=_['pick'](_0x1663d5,[_0x2508a3(0x16f),'childVersion',_0x2508a3(0x101),_0x2508a3(0xe9),_0x2508a3(0x1e0),'action',_0x2508a3(0x272),_0x2508a3(0x1be),'relationshipLinkName']);switch(_0x3a6188[_0x2508a3(0x272)]){case _0x2508a3(0x13e):_0xabbaab=_0xabbaab[_0x2508a3(0xb2)](_0x43826f=>_0x43826f['childNode']!==_0x3a6188[_0x2508a3(0x16f)]);!_0xabbaab[_0x2508a3(0x23c)](_0x3a6188)&&_0xabbaab[_0x2508a3(0xf0)](_0x3a6188);break;case _0x2508a3(0x9f):_0xabbaab=_0xabbaab[_0x2508a3(0xb2)](_0x45fdc2=>_0x45fdc2[_0x2508a3(0x16f)]!==_0x3a6188[_0x2508a3(0x16f)]);break;case _0x2508a3(0x2b4):_0xabbaab=[];break;default:}}):_0xabbaab=[],_0xabbaab;},checkIfAPOCisInstalled=async()=>{const _0xf38ad=_0x495b8d;if(global[_0xf38ad(0x1a9)]===undefined){const _0x133f81=driver['session'](),_0x12b58b=await _0x133f81[_0xf38ad(0xa8)](_0xf38ad(0x220))[_0xf38ad(0x169)](_0x182db6=>{global['apocInstalled']=!![];})[_0xf38ad(0x204)](_0x2ff347=>{const _0x36f242=_0xf38ad;global[_0x36f242(0x1a9)]=![];});_0x133f81[_0xf38ad(0x15b)]();}return global[_0xf38ad(0x1a9)];};checkIfAPOCisInstalled(),exports[_0x495b8d(0x19b)]=async(_0x119278,_0x3057b8,_0x2bf289)=>{const _0x57e829=_0x495b8d;if(!_0x2bf289[_0x57e829(0x1e5)]||!_0x119278||!_0x3057b8)return![];const _0x41b3fa=_['find'](global[_0x57e829(0x1a8)][_0x57e829(0xba)],{'name':_0x119278});if(!_0x41b3fa)return customErrorCompact('Cannot\x20Check\x20for\x20Unique\x20Fields',_0x57e829(0x1d3)+_0x119278+_0x57e829(0xcc),0x194);const _0x5b09a0=_0x2bf289['map'](_0x857c32=>{const _0x37dbf8=_0x57e829;switch(_0x857c32[_0x37dbf8(0x1ad)]){case _0x37dbf8(0xe2):case _0x37dbf8(0x115):return _0x37dbf8(0x168)+_0x857c32[_0x37dbf8(0x25b)]+'\x20=\x20'+parseInt(_0x857c32[_0x37dbf8(0x1ff)],0xa);case _0x37dbf8(0x11c):return _0x37dbf8(0x168)+_0x857c32[_0x37dbf8(0x25b)]+'\x20=\x20'+parseFloat(_0x857c32[_0x37dbf8(0x1ff)]);case'boolean':return _0x37dbf8(0x168)+_0x857c32[_0x37dbf8(0x25b)]+_0x37dbf8(0x1b9)+_0x857c32[_0x37dbf8(0x1ff)];default:return _0x37dbf8(0x168)+_0x857c32['name']+_0x37dbf8(0x24d)+_0x857c32[_0x37dbf8(0x1ff)]+'\x22';}}),_0x1655cb=_0x57e829(0x151)+_0x119278+_0x57e829(0x243)+_0x5b09a0[_0x57e829(0x217)]('\x20OR\x20')+_0x57e829(0x12b),_0x22afb7=driver[_0x57e829(0x1b4)](),_0x1ff638=await _0x22afb7[_0x57e829(0xa8)](_0x1655cb,{'nodeId':_0x3057b8})[_0x57e829(0x204)](_0x577f19=>{const _0x2357b3=_0x57e829;return customErrorCompact(_0x2357b3(0x160),_0x577f19['message'],0x1f4,_0x2357b3(0x19b),!![],_0x1655cb,_0x577f19);});_0x22afb7[_0x57e829(0x15b)]();if(_0x1ff638['error'])return _0x1ff638;if(_0x1ff638[_0x57e829(0x1fe)][_0x57e829(0x1e5)]){const _0x155f75=_0x1ff638['records'][_0x57e829(0x139)](_0x4e50ec=>_0x4e50ec[_0x57e829(0x1b3)](_0x57e829(0x1eb))['properties']),_0x31c054=_0x155f75['map'](_0x4d8274=>{const _0x1d63ca=_0x57e829,_0x32bb9b=_0x2bf289[_0x1d63ca(0xb2)](_0x42795e=>_0x4d8274[_0x42795e[_0x1d63ca(0x25b)]]===_0x42795e['value'])[_0x1d63ca(0x139)](_0x2ce588=>'#'+_0x2ce588[_0x1d63ca(0x25b)]+'#');return{'node':{'_labelRef':basics[_0x1d63ca(0x245)](_0x4d8274,_0x41b3fa),'_id':_0x4d8274[_0x1d63ca(0x15e)]},'fields':_0x32bb9b};}),_0x56cc84=_0x31c054['map']((_0x2b8ad2,_0x114e9a)=>{const _0x3dc469=_0x57e829;return _0x2b8ad2[_0x3dc469(0x240)][_0x3dc469(0x217)](_0x3dc469(0x2a2))+'<br>\x20Same\x20values\x20already\x20exist\x20for:\x20<br>'+(_0x114e9a+0x1)+')\x20'+_[_0x3dc469(0x13f)](_0x119278)+'\x20(ref:\x20'+_0x2b8ad2[_0x3dc469(0x1eb)][_0x3dc469(0xb0)]+',\x20ID:\x20'+_0x2b8ad2[_0x3dc469(0x1eb)][_0x3dc469(0x15e)]+')';}),_0xa957ea=_0x56cc84['join'](_0x57e829(0x19d));return customErrorCompact(_0x57e829(0x12f),_0x57e829(0x129)+_0xa957ea,0xc8,_0x57e829(0x19b),![],'',_0x31c054);}return customSuccess(!![]);},exports[_0x495b8d(0x157)]=async(_0x135e1c,_0x274990)=>{const _0x37832c=_0x495b8d,_0x14fdb6=_0x37832c(0x151)+_0x135e1c+_0x37832c(0x1a3),_0x3e37a3=driver['session'](),_0x38300d=await _0x3e37a3['run'](_0x14fdb6,{'nodeId':_0x274990})['catch'](_0x302ca2=>{const _0x529eda=_0x37832c;return customErrorCompact(_0x529eda(0x2a0),_0x302ca2[_0x529eda(0x268)],0x1f4,_0x529eda(0x157),!![],_0x14fdb6,_0x302ca2);});_0x3e37a3[_0x37832c(0x15b)]();if(_0x38300d[_0x37832c(0x131)])return _0x38300d;const _0x5d7c71=[];return _0x38300d['records'][_0x37832c(0x139)](_0x2ddf84=>{const _0x546f42=_0x37832c,_0x27d72a=_0x2ddf84[_0x546f42(0x1b3)](_0x546f42(0x22f)),_0x7f5ffa=_0x2ddf84['get'](_0x546f42(0x1a6)),_0x298555={..._0x27d72a[_0x546f42(0xea)],'_type':_0x27d72a[_0x546f42(0xd2)][0x0],'_version':_0x27d72a[_0x546f42(0xea)][_0x546f42(0x136)],'_rel':_0x7f5ffa['properties'],'_relType':_0x7f5ffa[_0x546f42(0x1ad)]},_0x438ff0=_['find'](global[_0x546f42(0x1a8)][_0x546f42(0xba)],{'name':_0x135e1c});_0x298555[_0x546f42(0xb0)]=basics[_0x546f42(0x245)](_0x298555,_0x438ff0),_0x5d7c71[_0x546f42(0xf0)](_0x298555);}),customSuccess(_0x5d7c71);},exports['addRelationships']=async(_0x248ad0,_0x51ce76,_0x1239ba,_0x1f97f8,_0x4b3f77)=>{const _0x4aa83d=_0x495b8d,_0x96d303=0x5;let _0x528902=[];const _0x1e15cf=[];while(_0x4b3f77[_0x4aa83d(0x1e5)]>_0x96d303){_0x1e15cf[_0x4aa83d(0xf0)](_0x4b3f77['splice'](0x0,_0x96d303));}_0x4b3f77[_0x4aa83d(0x1e5)]&&_0x1e15cf['push'](_0x4b3f77);const _0x1e7557=async()=>{const _0x2ad24f=_0x4aa83d;for(let _0x4c190d=0x0;_0x4c190d<_0x1e15cf['length'];_0x4c190d++){const _0x42a6d7=_0x1e15cf[_0x4c190d][_0x2ad24f(0x139)](_0x4ca20d=>this[_0x2ad24f(0x2b0)](_0x248ad0,_0x51ce76,_0x4ca20d['sourceNodeId'],_0x1f97f8,_0x1239ba,_0x4ca20d['targetNodeId'],_0x4ca20d['properties']||![],!![])),_0x9a9b85=await Promise[_0x2ad24f(0x213)](_0x42a6d7);_0x528902=[..._0x528902,..._0x9a9b85];}};return await _0x1e7557(),customSuccess(_0x528902);},exports[_0x495b8d(0xfd)]=async(_0x41223b,_0x46e366,_0xdac718)=>{const _0x53435f=_0x495b8d,_0x5a1d2c=_['find'](global[_0x53435f(0x1a8)]['nodetypeDefinitions'],{'name':_0x53435f(0xad)}),_0x1aa133=_0x5a1d2c[_0x53435f(0xea)]['filter'](_0x5cff90=>_0x5cff90[_0x53435f(0x1ad)]===_0x53435f(0x1eb)&&(_0x5cff90[_0x53435f(0x1a2)]||_0x5cff90[_0x53435f(0x108)])),_0x184e0e=_0x53435f(0x23e)+_0x46e366+_0x53435f(0x121),_0x476121=driver[_0x53435f(0x1b4)](),_0x168db=await _0x476121[_0x53435f(0xa8)](_0x184e0e,{'nodeId':_0xdac718})[_0x53435f(0x204)](_0x29c9c8=>{const _0x4cc217=_0x53435f;return customErrorCompact(_0x4cc217(0xdc),_0x29c9c8[_0x4cc217(0x268)],0x1f4,_0x4cc217(0xfd),!![],_0x184e0e,_0x29c9c8);});_0x476121['close']();if(_0x168db['error'])return _0x168db;const _0x4d8615=_0x168db[_0x53435f(0x1fe)][_0x53435f(0x139)](_0x504e87=>{const _0x505050=_0x53435f,_0x3f6dc2={'type':'eco','_type':'eco','_id':_0x504e87[_0x505050(0x1b3)](_0x505050(0x21b))[_0x505050(0xea)][_0x505050(0x15e)],'properties':_0x504e87[_0x505050(0x1b3)](_0x505050(0x21b))[_0x505050(0xea)]};if(_0x3f6dc2[_0x505050(0xea)][_0x505050(0xbb)]!==!![])_0x3f6dc2[_0x505050(0x1a7)]=0x0;else _0x3f6dc2['properties'][_0x505050(0xbb)]===!![]&&_0x3f6dc2[_0x505050(0xea)][_0x505050(0x159)]===_0x41223b?_0x3f6dc2['locked']=0x1:_0x3f6dc2[_0x505050(0x1a7)]=0x2;return _0x1aa133[_0x505050(0x139)](_0x299aec=>{const _0x5dd251=_0x505050,_0x2f7858=_0x504e87[_0x5dd251(0x103)][_0x5dd251(0x10a)](_0xc91b70=>_0xc91b70==='t_'+_0x299aec[_0x5dd251(0x25b)]);_0x3f6dc2['properties'][_0x299aec[_0x5dd251(0x25b)]]={};if(_0x2f7858>-0x1&&_0x504e87[_0x5dd251(0x147)][_0x2f7858]){const _0x517f4d=_0x504e87[_0x5dd251(0x147)][_0x2f7858];_0x3f6dc2['properties'][_0x299aec[_0x5dd251(0x25b)]]=basics[_0x5dd251(0x184)](_0x517f4d,_0x299aec);}}),_0x3f6dc2;});return customSuccess(_0x4d8615);},exports[_0x495b8d(0x117)]=async(_0x19a5e1,_0x459820,_0x4f1e1c)=>{const _0x5d0f8d=_0x495b8d,_0x361958=_[_0x5d0f8d(0x18a)](global[_0x5d0f8d(0x1a8)][_0x5d0f8d(0xba)],{'name':_0x459820});if(!_0x361958[_0x5d0f8d(0x170)])return customSuccess({'isLifecycleStateOwner':![]});const _0xb5ec05=_0x5d0f8d(0x2ab)+_0x459820+'\x20{_id:\x20$nodeId})-[role:lifecycleRole]-(b:user{_id:$userId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20role.role\x20as\x20lcRole,\x20a._state\x20as\x20_state',_0x4291d3=driver[_0x5d0f8d(0x1b4)](),_0x41405f=await _0x4291d3[_0x5d0f8d(0xa8)](_0xb5ec05,{'nodeId':_0x4f1e1c,'userId':_0x19a5e1})[_0x5d0f8d(0x204)](_0x371467=>{const _0x2f743d=_0x5d0f8d;return customErrorCompact(_0x2f743d(0x162),_0x371467[_0x2f743d(0x268)],0x1f4,'checkLifecycleSateOwner',!![],_0xb5ec05,_0x371467);});_0x4291d3[_0x5d0f8d(0x15b)]();if(_0x41405f[_0x5d0f8d(0x131)])return _0x41405f;if(!_0x41405f[_0x5d0f8d(0x1fe)][_0x5d0f8d(0x1e5)])return customSuccess({'isLifecycleStateOwner':![]});const _0x2cb88d=_0x41405f[_0x5d0f8d(0x1fe)][0x0][_0x5d0f8d(0x1b3)]('_state'),_0x2a0e67=_[_0x5d0f8d(0x18a)](_0x361958[_0x5d0f8d(0x170)][_0x5d0f8d(0xc5)],{'name':_0x2cb88d})[_0x5d0f8d(0x21f)],_0x92395f=_[_0x5d0f8d(0x18a)](_0x361958['lifecycle'][_0x5d0f8d(0x1bd)],{'id':_0x2a0e67});let _0x387ad2=![];return _0x92395f&&_0x41405f[_0x5d0f8d(0x1fe)][_0x5d0f8d(0x156)](_0x50272a=>{const _0x5b6aa5=_0x5d0f8d;_0x50272a['get'](_0x5b6aa5(0x1d5))===_0x92395f[_0x5b6aa5(0x25b)]&&(_0x387ad2=!![]);}),customSuccess({'isLifecycleStateOwner':_0x387ad2});},exports[_0x495b8d(0x1b0)]=async(_0x569fd2,_0x2e77ac)=>{const _0x5462d0=_0x495b8d,_0x3e764a=_0x5462d0(0x111)+_0x569fd2+_0x5462d0(0xa9),_0x3022fd=driver[_0x5462d0(0x1b4)](),_0x5b3f9c=await _0x3022fd['run'](_0x3e764a,{'nodeId':_0x2e77ac})[_0x5462d0(0x204)](_0xf31c1a=>{const _0x2ffd99=_0x5462d0;return customErrorCompact('Cannot\x20Get\x20Node\x20Lock\x20State',_0xf31c1a[_0x2ffd99(0x268)],0x1f4,_0x2ffd99(0x1b0),!![],_0x3e764a,_0xf31c1a);});_0x3022fd[_0x5462d0(0x15b)]();if(_0x5b3f9c['error'])return _0x5b3f9c;if(!_0x5b3f9c['records']['length'])return customErrorCompact(_0x5462d0(0x143),_0x5462d0(0x209),0x194,'getNodeLockState');const _0xaba4cf=_0x5b3f9c[_0x5462d0(0x1fe)][0x0][_0x5462d0(0x1b3)](_0x5462d0(0xbb));return customSuccess(_0xaba4cf);},exports[_0x495b8d(0x29f)]=async(_0x4a15f6,_0x579c8f,_0x19c11d,_0x586e47)=>{const _0x55e200=_0x495b8d,_0xd747c9=_0x586e47===_0x55e200(0x293)?_0x55e200(0xd5)+_0x579c8f+')\x20,\x20(user:user{_id:$userId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20node._id=$nodeId\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MERGE\x20(user)-[subscription:subscribeTo]->(node)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20subscription':_0x55e200(0x271)+_0x579c8f+_0x55e200(0xa0),_0x57f1ce=driver[_0x55e200(0x1b4)](),_0x596c21=await _0x57f1ce[_0x55e200(0xa8)](_0xd747c9,{'userId':_0x4a15f6,'nodeId':_0x19c11d})[_0x55e200(0x204)](_0x39261b=>{const _0x308db3=_0x55e200;return customErrorCompact(_0x308db3(0x11a),_0x39261b[_0x308db3(0x268)],0x1f4,'subscribeToNode',!![],_0xd747c9,_0x39261b);});_0x57f1ce[_0x55e200(0x15b)]();if(_0x596c21[_0x55e200(0x131)])return _0x596c21;if(!_0x596c21[_0x55e200(0x1fe)][_0x55e200(0x1e5)]){if(_0x586e47===_0x55e200(0x293))return customErrorCompact(_0x55e200(0x216),_0x55e200(0x209),0x194,'subscribeToNode');return customErrorCompact(_0x55e200(0x106),_0x55e200(0x203),0x194,_0x55e200(0x29f));}return customSuccess(!![]);},exports['getLifecycleAssignments']=async(_0x401b68,_0x230290,_0x1549ca)=>{const _0x2e381b=_0x495b8d,_0x387d20=_[_0x2e381b(0x18a)](global[_0x2e381b(0x1a8)][_0x2e381b(0xba)],{'name':_0x2e381b(0x29c)}),_0x5b921b=_0x387d20['properties'][_0x2e381b(0xb2)](_0x4a7e3d=>{const _0x537dd5=_0x2e381b;_0x4a7e3d[_0x537dd5(0x19f)]=_0x387d20['id'];if(_0x4a7e3d[_0x537dd5(0x1ad)]===_0x537dd5(0x1eb)){if(_0x4a7e3d[_0x537dd5(0x25b)]==='_thumbnail'&&!_0x387d20[_0x537dd5(0x236)])return;return _0x4a7e3d[_0x537dd5(0x1a2)]&&_0x4a7e3d[_0x537dd5(0x108)];}return _0x4a7e3d[_0x537dd5(0x1ad)]==='node'&&(_0x4a7e3d['relationship']||_0x4a7e3d['core']);}),_0x1d1407=getNodePropsOptionalMatch(_0x5b921b,_0x2e381b(0x102))[_0x2e381b(0x217)]('\x20'),_0x4c139c=_0x5b921b[_0x2e381b(0x139)](_0x396acc=>'t_'+_0x396acc['name']);let _0x25eae4='';_0x4c139c[_0x2e381b(0x1e5)]&&(_0x25eae4=_0x4c139c[_0x2e381b(0x217)](',')+',\x20');const _0x3fe8cf=_0x2e381b(0x1bf)+_0x230290+_0x2e381b(0xe7)+_0x1d1407+_0x2e381b(0xfc)+_0x25eae4+'\x20rel',_0x5b37bb=driver[_0x2e381b(0x1b4)](),_0xc3fde=await _0x5b37bb['run'](_0x3fe8cf,{'nodeId':_0x1549ca})['catch'](_0x1d279f=>{const _0x36ff45=_0x2e381b;return customErrorCompact(_0x36ff45(0x252),_0x1d279f[_0x36ff45(0x268)],0x1f4,_0x36ff45(0x282),!![],_0x3fe8cf,_0x1d279f);});_0x5b37bb[_0x2e381b(0x15b)]();if(_0xc3fde['error'])return _0xc3fde;if(!_0xc3fde[_0x2e381b(0x1fe)][_0x2e381b(0x1e5)])return customSuccess([]);const _0x5e7fb9=_0xc3fde[_0x2e381b(0x1fe)][_0x2e381b(0x139)](_0x22a81a=>{const _0x5b43ae=_0x2e381b,_0x10b30c=formatSingleNeoNode(_0x22a81a,_0x387d20,_0x401b68[_0x5b43ae(0x15e)]),_0x270274=_0x22a81a[_0x5b43ae(0x1b3)](_0x5b43ae(0x1a6));return{'properties':_0x10b30c[_0x5b43ae(0xea)],'_id':_0x10b30c[_0x5b43ae(0x15e)],'_type':_0x10b30c[_0x5b43ae(0x284)],'_rel':_0x270274['properties']};});return customSuccess(_0x5e7fb9);},exports[_0x495b8d(0xe5)]=async(_0x4a0cca,_0x41cb5b,_0x489279,_0x463578,_0x56a773)=>{const _0x152731=_0x495b8d,_0x3d120c=_[_0x152731(0x18a)](global[_0x152731(0x1a8)][_0x152731(0xba)],{'name':_0x41cb5b});if(!_0x3d120c)return customErrorCompact(_0x152731(0x249),'Nodetype\x20'+_0x41cb5b+_0x152731(0xcc),0x194,_0x152731(0xe5));const _0x74016b=_0x3d120c['lifecycle'][_0x152731(0xc5)][_0x152731(0x18a)](_0x885da0=>_0x885da0[_0x152731(0x25b)]===_0x56a773);if(!_0x74016b)return customErrorCompact(_0x152731(0x249),'Nodetype\x20'+_0x41cb5b+_0x152731(0xee)+_0x56a773+_0x152731(0x1b1),0x194,_0x152731(0xe5));const _0x1f27e2=_0x152731(0x18c)+_0x41cb5b+'\x20{_id:\x20$nodeId}),\x20(a:assignment\x20{_id:\x20$assignmentId})\x0a\x20\x20\x20\x20CREATE\x20(a)-[r:assignmentFor]->(node)\x0a\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20r._state\x20=\x20\x22'+_0x56a773+_0x152731(0x2a5)+_0x4a0cca['_id']+_0x152731(0x285)+_0x4a0cca['name']+_0x152731(0x298)+NODEU['v1']()+'\x22\x0a\x20\x20\x20\x20RETURN\x20a\x20as\x20assignment,\x20r\x20as\x20assignmentFor,\x20node',_0x39122e=driver['session'](),_0x295c93=await _0x39122e[_0x152731(0xa8)](_0x1f27e2,{'nodeId':_0x489279,'assignmentId':_0x463578})[_0x152731(0x204)](_0x22468c=>{const _0x564022=_0x152731;return customErrorCompact(_0x564022(0x249),_0x22468c['message'],0x1f4,'attachLifecycleAssignment',!![],_0x1f27e2,_0x22468c);});_0x39122e[_0x152731(0x15b)]();if(_0x295c93[_0x152731(0x131)])return _0x295c93;if(!_0x295c93[_0x152731(0x1fe)][_0x152731(0x1e5)])return customErrorCompact(_0x152731(0x249),_0x152731(0xc4),0x194,_0x152731(0xe5));const _0x4f7bb2=_0x295c93['records'][0x0],_0x57e27c={'node':{..._0x4f7bb2[_0x152731(0x1b3)](_0x152731(0x1eb))[_0x152731(0xea)],'_type':_0x4f7bb2[_0x152731(0x1b3)](_0x152731(0x1eb))[_0x152731(0xd2)][0x0]},'assignmentFor':{..._0x4f7bb2[_0x152731(0x1b3)](_0x152731(0x18f))[_0x152731(0xea)]},'assignment':{..._0x4f7bb2[_0x152731(0x1b3)](_0x152731(0x29c))[_0x152731(0xea)],'_type':'assignment'}};return customSuccess(_0x57e27c);},exports['detachLifecycleAssignment']=async(_0x49f002,_0x520859,_0x5db90c,_0x556e6b)=>{const _0x51253c=_0x495b8d,_0x52eee9=_['find'](global[_0x51253c(0x1a8)][_0x51253c(0xba)],{'name':_0x520859});if(!_0x52eee9)return customErrorCompact('Cannot\x20Detach\x20Lifecycle\x20Assignment','Nodetype\x20'+_0x520859+_0x51253c(0xcc),0x194);const _0x107cee=_0x51253c(0x1bf)+_0x520859+_0x51253c(0x1ec),_0x3e0a56=driver[_0x51253c(0x1b4)](),_0x1b4673=await _0x3e0a56[_0x51253c(0xa8)](_0x107cee,{'nodeId':_0x5db90c,'relId':_0x556e6b,'userId':_0x49f002[_0x51253c(0x15e)]})[_0x51253c(0x204)](_0xe80344=>{const _0x4fd290=_0x51253c;return customErrorCompact(_0x4fd290(0xe8),_0xe80344['message'],0x1f4,_0x4fd290(0x22c),!![],_0x107cee,_0xe80344);});_0x3e0a56[_0x51253c(0x15b)]();if(_0x1b4673[_0x51253c(0x131)])return _0x1b4673;if(!_0x1b4673[_0x51253c(0x257)][_0x51253c(0x1af)][_0x51253c(0x26f)][_0x51253c(0x148)])return customErrorCompact(_0x51253c(0xe8),_0x51253c(0x177),0x194);return customSuccess(!![]);},exports['getGroups']=async()=>{const _0x2037c2=_0x495b8d,_0x1ad219=_0x2037c2(0x15f),_0x531ff1=driver['session'](),_0x302ad7=await _0x531ff1[_0x2037c2(0xa8)](_0x1ad219)['catch'](_0x530d80=>{return customErrorCompact('Cannot\x20Get\x20Groups',_0x530d80['message'],0x1f4,'getGroups',!![],_0x1ad219,_0x530d80);});_0x531ff1[_0x2037c2(0x15b)]();if(_0x302ad7['error'])return _0x302ad7;if(!_0x302ad7['records']['length'])return customSuccess([]);let _0xb73ea5=_0x302ad7[_0x2037c2(0x1fe)]['map'](_0x452546=>{const _0x75ab=_0x2037c2,_0x290fa8={'name':_0x452546[_0x75ab(0x1b3)](_0x75ab(0x2aa))['properties'][_0x75ab(0x25b)],'groupType':_0x452546[_0x75ab(0x1b3)](_0x75ab(0x2aa))[_0x75ab(0xea)]['groupType']||_0x75ab(0x11d),'_id':_0x452546[_0x75ab(0x1b3)](_0x75ab(0x2aa))[_0x75ab(0xea)][_0x75ab(0x15e)]};return _0x452546['get']('Member')&&(_0x290fa8[_0x75ab(0x2af)]={'_id':_0x452546[_0x75ab(0x1b3)](_0x75ab(0x1ab))[_0x75ab(0xea)][_0x75ab(0x15e)],'role':_0x452546[_0x75ab(0x1b3)](_0x75ab(0x13d))['properties'][_0x75ab(0xaa)]||null,'status':_0x452546['get'](_0x75ab(0x13d))[_0x75ab(0xea)][_0x75ab(0xcf)]||null},_0x452546['get'](_0x75ab(0x1ab))[_0x75ab(0xd2)][0x0]===_0x75ab(0x218)?_0x290fa8[_0x75ab(0x2af)][_0x75ab(0x218)]=!![]:_0x290fa8[_0x75ab(0x2af)][_0x75ab(0x11d)]=!![]),_0x290fa8;});return _0xb73ea5=_(_0xb73ea5)[_0x2037c2(0xeb)](_0x2037c2(0x15e))['map'](_0x2910cd=>{const _0x4404be=_0x2037c2;if(_0x2910cd[0x0][_0x4404be(0x2af)])return{'name':_0x2910cd[0x0][_0x4404be(0x25b)],'_id':_0x2910cd[0x0][_0x4404be(0x15e)],'groupType':_0x2910cd[0x0][_0x4404be(0xc6)],'members':_['map'](_0x2910cd,_0x4404be(0x2af))};return{'name':_0x2910cd[0x0][_0x4404be(0x25b)],'groupType':_0x2910cd[0x0]['groupType'],'_id':_0x2910cd[0x0][_0x4404be(0x15e)],'members':[]};})[_0x2037c2(0x1ff)](),_0xb73ea5=_0xb73ea5[_0x2037c2(0x139)](_0x11d41b=>{const _0x56b052=_0x2037c2;let _0x5baa5c=[];return _0x11d41b['members']&&(_0x5baa5c=_0x11d41b[_0x56b052(0x20b)][_0x56b052(0x139)](_0x49f047=>{const _0x213d9c=_0x56b052,_0x2e3259=_['find'](_0xb73ea5,{'_id':_0x49f047[_0x213d9c(0x15e)]});if(_0x2e3259)return{'_id':_0x49f047['_id'],'title':_0x2e3259[_0x213d9c(0x25b)],'groupType':_0x2e3259[_0x213d9c(0xc6)],'group':!![],'status':_0x49f047['status'],'role':_0x49f047[_0x213d9c(0xaa)],'nodes':_0x2e3259['members']};return{'_id':_0x49f047[_0x213d9c(0x15e)],'status':_0x49f047['status'],'role':_0x49f047[_0x213d9c(0xaa)],'user':!![]};})),{'_id':_0x11d41b[_0x56b052(0x15e)],'title':_0x11d41b[_0x56b052(0x25b)],'group':!![],'groupType':_0x11d41b[_0x56b052(0xc6)],'nodes':_0x5baa5c};}),customSuccess(_0xb73ea5);},exports[_0x495b8d(0x2a1)]=async()=>{const _0x10431e=_0x495b8d,_0x67ffc1=_0x10431e(0xfb),_0x1c7e66=driver['session'](),_0x262bee=await _0x1c7e66[_0x10431e(0xa8)](_0x67ffc1)[_0x10431e(0x204)](_0x581b42=>{return customErrorCompact('Cannot\x20Get\x20Groups',_0x581b42['message'],0x1f4,'getGroups',!![],_0x67ffc1,_0x581b42);});_0x1c7e66[_0x10431e(0x15b)]();const _0x3db26b=_0x262bee[_0x10431e(0x1fe)][_0x10431e(0x139)](_0x59b4d6=>{const _0x474600=_0x10431e,_0x500b7b=_0x59b4d6['get'](_0x474600(0x2aa)),_0x3460fd=_0x59b4d6[_0x474600(0x1b3)]('Members'),_0x5184bc=_0x59b4d6[_0x474600(0x1b3)](_0x474600(0x124)),_0x414562=_0x59b4d6[_0x474600(0x1b3)](_0x474600(0x259)),_0x30a352=_0x59b4d6[_0x474600(0x1b3)](_0x474600(0x118)),_0x2c9d3e=[],_0x782dbb=[];return{..._0x500b7b['properties'],'Members':_0x3460fd[_0x474600(0x139)](_0x31beb1=>{const _0x1772a2=_0x474600;let _0x1d81b5=_0x31beb1[_0x1772a2(0xd2)][0x0];if(_0x31beb1[_0x1772a2(0xc6)])_0x1d81b5=_0x31beb1[_0x1772a2(0xc6)];return{..._0x31beb1['properties'],'type':_0x1d81b5};}),'permissionSets':_0x414562['map']((_0x42efb6,_0x114226)=>{const _0x4604c6=_0x474600;return{...{'name':_0x42efb6[_0x4604c6(0xea)][_0x4604c6(0x25b)]},'role':_0x5184bc[_0x114226][_0x4604c6(0xea)][_0x4604c6(0xaa)],'canCreate':_0x5184bc[_0x114226][_0x4604c6(0xea)][_0x4604c6(0x19e)]||![]};})[_0x474600(0xb2)](_0xbdde63=>{const _0x3afa5a=_0x474600;if(_0x782dbb[_0x3afa5a(0x23c)](_0xbdde63[_0x3afa5a(0x25b)]))return![];return _0x782dbb[_0x3afa5a(0xf0)](_0xbdde63[_0x3afa5a(0x25b)]),!![];}),'parents':_0x30a352[_0x474600(0x139)](_0x588c9e=>{const _0x2488cb=_0x474600;return _0x588c9e[_0x2488cb(0xea)];})[_0x474600(0xb2)](_0x2ad628=>{const _0x392fbf=_0x474600;if(_0x2c9d3e[_0x392fbf(0x23c)](_0x2ad628[_0x392fbf(0x15e)]))return![];return _0x2c9d3e[_0x392fbf(0xf0)](_0x2ad628['_id']),!![];})};}),_0x36d275=[],_0x3f9183=[];let _0x23ca1e=0x0;const _0x41a68a=[_0x10431e(0x215),'reader',_0x10431e(0x113),'manager'];while(_0x36d275[_0x10431e(0x1e5)]<_0x3db26b[_0x10431e(0x1e5)]&&_0x23ca1e<0x4){_0x23ca1e++;const _0x330c38=_0x3db26b['filter'](_0x10029b=>{const _0x228589=_0x10431e;if(_0x36d275[_0x228589(0x23c)](_0x10029b['_id']))return![];if(_0x10029b['parents']['length']===0x0)return!![];let _0x5efd3c=!![];return _0x10029b['parents'][_0x228589(0x156)](_0x168136=>{const _0x5d4012=_0x228589;!_0x36d275[_0x5d4012(0x23c)](_0x168136['_id'])&&(_0x5efd3c=![]);}),_0x5efd3c;});_0x330c38[_0x10431e(0x156)](_0x4b83c6=>{const _0x541f92=_0x10431e;_0x36d275[_0x541f92(0xf0)](_0x4b83c6[_0x541f92(0x15e)]);const _0x54ee97=_0x4b83c6;_0x4b83c6[_0x541f92(0x197)][_0x541f92(0x156)](_0x3c89a0=>{const _0x4c56b4=_0x541f92,_0x198c08=_[_0x4c56b4(0x18a)](_0x3db26b,{'_id':_0x3c89a0[_0x4c56b4(0x15e)]});_0x198c08[_0x4c56b4(0x127)][_0x4c56b4(0x156)](_0x4fda4b=>{const _0x2cd166=_0x4c56b4,_0x267669=_0x4fda4b[_0x2cd166(0x25b)],_0x126ad8=_[_0x2cd166(0x18a)](_0x4b83c6[_0x2cd166(0x127)],{'name':_0x267669});if(_0x126ad8){if(!_0x126ad8['inherited'])_0x126ad8[_0x2cd166(0x14e)]={};_0x126ad8['inherited']={'canCreate':booleize(_0x126ad8['inherited']['canCreate']||_0x4fda4b[_0x2cd166(0xa5)][_0x2cd166(0x19e)]||![]),'role':_0x41a68a[_0x2cd166(0x1b2)](_0x126ad8[_0x2cd166(0x14e)][_0x2cd166(0xaa)])>_0x41a68a['indexOf'](_0x4fda4b[_0x2cd166(0xa5)][_0x2cd166(0xaa)])?_0x126ad8['inherited'][_0x2cd166(0xaa)]:_0x4fda4b[_0x2cd166(0xa5)][_0x2cd166(0xaa)]};}else _0x4b83c6['permissionSets'][_0x2cd166(0xf0)]({'name':_0x267669,'inherited':{'role':_0x4fda4b['merged'][_0x2cd166(0xaa)],'canCreate':booleize(_0x4fda4b[_0x2cd166(0xa5)][_0x2cd166(0x19e)]||![])}});});}),_0x54ee97[_0x541f92(0x127)][_0x541f92(0x156)](_0x28e565=>{const _0x258ffc=_0x541f92;if(!_0x28e565[_0x258ffc(0x14e)])_0x28e565[_0x258ffc(0x14e)]={'role':null,'canCreate':![]};_0x28e565[_0x258ffc(0x12d)]={'role':_0x28e565[_0x258ffc(0xaa)],'canCreate':_0x28e565['canCreate']||![]},_0x28e565[_0x258ffc(0xa5)]={'canCreate':_0x28e565['owned'][_0x258ffc(0x19e)]||_0x28e565[_0x258ffc(0x14e)][_0x258ffc(0x19e)]||![],'role':_0x41a68a[_0x258ffc(0x1b2)](_0x28e565[_0x258ffc(0x12d)][_0x258ffc(0xaa)])>_0x41a68a[_0x258ffc(0x1b2)](_0x28e565[_0x258ffc(0x14e)][_0x258ffc(0xaa)])?_0x28e565[_0x258ffc(0x12d)][_0x258ffc(0xaa)]:_0x28e565[_0x258ffc(0x14e)][_0x258ffc(0xaa)]},delete _0x28e565['role'],delete _0x28e565[_0x258ffc(0x19e)];}),_0x3f9183[_0x541f92(0xf0)](_0x54ee97);});}return customSuccess(_0x3f9183);},exports[_0x495b8d(0x163)]=async _0x89e801=>{const _0x5ceb72=_0x495b8d,_0x16562b=_0x5ceb72(0x228),_0x6f51d3=driver['session'](),_0x17f46c=await _0x6f51d3['run'](_0x16562b,{'groupId':_0x89e801})['catch'](_0x52a2aa=>{const _0x1652ab=_0x5ceb72;return customErrorCompact(_0x1652ab(0x22b),_0x52a2aa[_0x1652ab(0x268)],0x1f4,'deleteGroup',!![],_0x16562b,_0x52a2aa);});_0x6f51d3['close']();if(_0x17f46c[_0x5ceb72(0x131)])return _0x17f46c;return customSuccess(_0x89e801);},exports['initTeamRoles']=async(_0x3e1001,_0x199da7)=>{const _0x301807=_0x495b8d;if(!_0x3e1001)return customErrorCompact(_0x301807(0x25c),_0x301807(0x211),0x1f4,_0x301807(0x201));const _0x3f41e2=[];!global[_0x301807(0x1a8)]['uxConfig'][_0x301807(0x1c7)]&&(global['datamodel']['uxConfig'][_0x301807(0x1c7)]=[]);global[_0x301807(0x1a8)][_0x301807(0xb1)][_0x301807(0x1c7)][_0x301807(0x156)](_0x1a4899=>{const _0xe6d915=_0x301807;_0x3f41e2[_0xe6d915(0xf0)](_0xe6d915(0x27e)+NODEU['v1']()+_0xe6d915(0x276)+NODEU['v1']()+_0xe6d915(0xb4)+_0x1a4899[_0xe6d915(0x25b)]+_0xe6d915(0x138));});let _0x1e27e1='\x20MATCH\x20(g:Group{_id:\x27'+_0x3e1001+'\x27})<-[:isMemberOf]-(oldRoles:Group)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DETACH\x20DELETE\x20oldRoles\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20g';const _0x30b5ee=driver[_0x301807(0x1b4)](),_0x18b1fc=_0x30b5ee[_0x301807(0x18d)]();let _0x357051=await _0x18b1fc['run'](_0x1e27e1)[_0x301807(0x204)](_0x2f62ec=>{const _0x4ff5d9=_0x301807;return customErrorCompact(_0x4ff5d9(0x25c),_0x2f62ec[_0x4ff5d9(0x268)],0x1f4,_0x4ff5d9(0x201),!![],_0x1e27e1,_0x2f62ec);});global[_0x301807(0x1a8)][_0x301807(0xb1)][_0x301807(0x1c7)][_0x301807(0x1e5)]>0x0?_0x1e27e1=_0x301807(0x223)+_0x3e1001+'\x27}),(PS:PermissionSet{name:\x27Group\x27})\x0a\x20\x20\x20\x20\x20\x20CREATE\x20'+_0x3f41e2[_0x301807(0x217)](',')+'\x0a\x20\x20\x20\x20\x20\x20RETURN\x20g':_0x1e27e1='\x20MATCH\x20(g:Group{_id:\x27'+_0x3e1001+_0x301807(0xd9);_0x357051=await _0x18b1fc[_0x301807(0xa8)](_0x1e27e1)['catch'](_0x49b13c=>{const _0x1a02ff=_0x301807;return customErrorCompact(_0x1a02ff(0x25c),_0x49b13c['message'],0x1f4,'initTeamRoles',!![],_0x1e27e1,_0x49b13c);}),await _0x18b1fc['commit'](),_0x30b5ee[_0x301807(0x15b)]();if(_0x357051[_0x301807(0x131)])return _0x357051;if(!_0x357051[_0x301807(0x1fe)][_0x301807(0x1e5)])return customErrorCompact('Cannot\x20Init\x20Roles',_0x301807(0x1ce),0x1f4,_0x301807(0x201));return customSuccess(!![]);},exports[_0x495b8d(0x1d4)]=async(_0x48c43d,_0x3b254c)=>{const _0x347f94=_0x495b8d;if(!_0x48c43d)return customErrorCompact(_0x347f94(0x17c),_0x347f94(0x211),0x1f4,_0x347f94(0x1d4));const _0x47fc32=_0x347f94(0x16d)+_0x48c43d+_0x347f94(0x29e),_0x6ec750=driver[_0x347f94(0x1b4)](),_0x2042d2=_0x6ec750['beginTransaction'](),_0x39d399=await _0x2042d2['run'](_0x47fc32)[_0x347f94(0x204)](_0x253b25=>{const _0x5cf37f=_0x347f94;return customErrorCompact('Cannot\x20Get\x20Roles\x20Detail',_0x253b25['message'],0x1f4,_0x5cf37f(0x1d4),!![],_0x47fc32,_0x253b25);});await _0x2042d2[_0x347f94(0x158)](),_0x6ec750[_0x347f94(0x15b)]();if(_0x39d399[_0x347f94(0x131)])return _0x39d399;if(!_0x39d399[_0x347f94(0x1fe)][_0x347f94(0x1e5)])return customErrorCompact(_0x347f94(0x17c),_0x347f94(0x1ce),0x1f4,_0x347f94(0x1d4));const _0x3edd3b=_0x39d399[_0x347f94(0x1fe)][_0x347f94(0x139)](_0x26a801=>{const _0xcbfc77=_0x347f94;return{'role':_0x26a801['get']('role')['properties'],'user':_0x26a801[_0xcbfc77(0x1b3)](_0xcbfc77(0x218))[_0xcbfc77(0xea)]};});return customSuccess(_0x3edd3b);},exports[_0x495b8d(0x227)]=async(_0x104881,_0x265f9c,_0x1cb367,_0x541cc2)=>{const _0x3fe345=_0x495b8d,_0x41d6de=global[_0x3fe345(0x1a8)][_0x3fe345(0xba)]['find'](_0x6cb15f=>_0x6cb15f['id']===_0x541cc2);if(!_0x41d6de)return customErrorCompact('Cannot\x20Notify\x20Identity\x20Change','Relationship\x20not\x20found',0x194);const _0x6890b2=_0x3fe345(0x151)+_0x265f9c+_0x3fe345(0x164)+_0x41d6de[_0x3fe345(0x10f)]+_0x3fe345(0x202),_0x44649b=driver[_0x3fe345(0x1b4)](),_0x114e4f=await _0x44649b['run'](_0x6890b2,{'nodeId':_0x1cb367})[_0x3fe345(0x204)](_0x3fad4e=>{const _0xc2ebe5=_0x3fe345;return customErrorCompact('Cannot\x20Notify\x20Identity\x20Change',_0x3fad4e[_0xc2ebe5(0x268)],0x1f4,_0xc2ebe5(0x227),!![],_0x6890b2,_0x3fad4e);});_0x44649b[_0x3fe345(0x15b)]();if(_0x114e4f[_0x3fe345(0x131)])return _0x114e4f;if(!_0x114e4f[_0x3fe345(0x1fe)][_0x3fe345(0x1e5)])return customErrorCompact('Cannot\x20Notify\x20Identity\x20Change','Relationship\x20not\x20found',0x1f4);const _0xfe4220=_0x114e4f[_0x3fe345(0x1fe)][0x0][_0x3fe345(0x1b3)](_0x3fe345(0x218))[_0x3fe345(0xea)];if(_0xfe4220[_0x3fe345(0x15e)]!==_0x104881){const _0x1e64e4=_0x3fe345(0xf5)+_0xfe4220[_0x3fe345(0x195)]+_0x3fe345(0x230)+_0x265f9c+'\x20node\x20as\x20'+_0x41d6de[_0x3fe345(0x25b)]+'.';ganisterMail[_0x3fe345(0xd8)]({'type':_0x3fe345(0x1e1),'to':_0xfe4220[_0x3fe345(0xf2)],'subject':_0x3fe345(0x154),'text':_0x1e64e4});}return customSuccess(!![]);},exports[_0x495b8d(0x262)]=async _0x483dd4=>{const _0x354394=_0x495b8d,_0x321cbf=driver[_0x354394(0x1b4)]();try{const _0x602c7b=_[_0x354394(0x18a)](global[_0x354394(0x1a8)][_0x354394(0xba)],{'name':_0x483dd4});if(!_0x602c7b)return customErrorCompact('Cannot\x20Update\x20Nodes\x20State\x20Configuration','Nodetype\x20'+_0x483dd4+_0x354394(0x21e),0x194);const _0x1992b4=_0x321cbf['beginTransaction'](),_0x14fd65=_0x602c7b['lifecycle']['states'][_0x354394(0x139)](_0x1f7277=>{const _0x58c5a4=_0x354394,_0x24b8a1=_0x1f7277['tracked']||![],_0x4d2b43=_0x1f7277[_0x58c5a4(0x1a4)]||![],_0x469ace='MATCH\x20(n:'+_0x483dd4+_0x58c5a4(0xb7)+_0x1f7277['name']+_0x58c5a4(0x112)+_0x4d2b43+',\x20n._tracked\x20=\x20'+_0x24b8a1+_0x58c5a4(0x208);return _0x1992b4[_0x58c5a4(0xa8)](_0x469ace);});return await Promise[_0x354394(0x213)](_0x14fd65),await _0x1992b4['commit'](),customSuccess({'success':!![],'message':_0x354394(0x1c9)});}finally{await _0x321cbf[_0x354394(0x15b)]();}},exports[_0x495b8d(0x1cc)]=async(_0x1e7bb5,_0x38eebc)=>{const _0x432352=_0x495b8d,_0x331daf=_0x432352(0x137)+_0x38eebc+'),\x20(p:PermissionSet\x20{\x20name:\x20\x22'+_0x38eebc+_0x432352(0xed)+_0x1e7bb5[_0x432352(0x15e)]+_0x432352(0x2be)+_0x1e7bb5[_0x432352(0x25b)]+_0x432352(0xc8),_0x201e18=driver['session'](),_0x199ff3=await _0x201e18[_0x432352(0xa8)](_0x331daf)[_0x432352(0x204)](_0x23ba08=>{const _0x431f5b=_0x432352;return customErrorCompact(_0x431f5b(0xfe),_0x23ba08[_0x431f5b(0x268)],0x1f4,_0x431f5b(0x1cc),!![],_0x331daf,_0x23ba08);});_0x201e18[_0x432352(0x15b)]();if(_0x199ff3[_0x432352(0x131)])return _0x199ff3;return customSuccess(!![]);},exports[_0x495b8d(0x29d)]=async(_0x28c20d,_0x3e52c3)=>{const _0x48a1e1=_0x495b8d;try{const _0x3d95e6=await checkUserNodeTypeCreation(_0x3e52c3,_0x28c20d);return customSuccess({'canCreate':_0x3d95e6});}catch(_0x44acf2){return customErrorCompact(_0x48a1e1(0x1f7),_0x44acf2[_0x48a1e1(0x268)],0x1f4,_0x48a1e1(0x29d),!![],'',_0x44acf2);}},exports[_0x495b8d(0x24f)]=async(_0x4a4533,_0x4b7bc9,_0xf3e375)=>{const _0x39086e=_0x495b8d;let _0x7a2c47='\x20MATCH\x20(node{_id:$nodeId})\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(node)<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO:\x20eco)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20OPTIONAL\x20MATCH\x20(node)<-[:revises*1..'+maxRevDepthSearch+_0x39086e(0x210);const _0xacca17=driver[_0x39086e(0x1b4)]();let _0x391d56=await _0xacca17[_0x39086e(0xa8)](_0x7a2c47,{'nodeId':_0x4b7bc9})[_0x39086e(0x204)](_0x42adfc=>{const _0x5d6dca=_0x39086e;return customErrorCompact(_0x5d6dca(0x28b)+_0x4b7bc9+'\x22\x20to\x20ECO',_0x42adfc[_0x5d6dca(0x268)],0x1f4,'addNodeToECO',!![],_0x7a2c47,_0x42adfc);});if(_0x391d56[_0x39086e(0x131)])return _0x391d56;if(!_0x391d56['records'][_0x39086e(0x1e5)])return customErrorCompact(_0x39086e(0x28b)+_0x4b7bc9+_0x39086e(0x1c6),'Node\x20not\x20found',0x1f4,_0x39086e(0x24f),![],_0x7a2c47,!![]);const _0x4ff085=_0x391d56['records'][0x0][_0x39086e(0x1b3)](_0x39086e(0x1eb)),_0x576f1f=_0x391d56[_0x39086e(0x1fe)][0x0][_0x39086e(0x1b3)](_0x39086e(0xca))?_0x391d56['records'][0x0][_0x39086e(0x1b3)](_0x39086e(0xca))[_0x39086e(0xea)]:_0x4ff085['properties'],_0x3ff115=_0x391d56['records'][0x0][_0x39086e(0x1b3)](_0x39086e(0x21b)),_0x181cf9=_0x391d56[_0x39086e(0x1fe)][0x0]['get'](_0x39086e(0x27b));if(_0x576f1f['_id']!==_0x4b7bc9)return customErrorCompact(_0x39086e(0x28b)+_0x4b7bc9+_0x39086e(0x1c6),_0x39086e(0x150),0x1f4,_0x39086e(0x24f),!![],_0x7a2c47,!![]);const _0x374038=_0x4ff085[_0x39086e(0xd2)][0x0],_0x22a925=_[_0x39086e(0x18a)](global[_0x39086e(0x1a8)]['nodetypeDefinitions'],{'name':_0x374038}),_0x43f9bc=basics['buildMaidenName'](_0x4ff085,_0x22a925),_0x3c3385=_0x22a925[_0x39086e(0x170)][_0x39086e(0xc5)][_0x39086e(0x18a)](_0x5eae00=>_0x5eae00['name']===_0x4ff085[_0x39086e(0xea)][_0x39086e(0x120)]);if(!_0x3c3385[_0x39086e(0xb5)])return customErrorCompact(_0x39086e(0x28b)+_0x43f9bc+_0x39086e(0x1c6),'Node\x20\x22'+_0x43f9bc+_0x39086e(0xdb),0x1f4,'addNodeToECO',![],_0x7a2c47,!![]);if(_0x22a925[_0x39086e(0x270)]!==_0x39086e(0xad))return customErrorCompact('Cannot\x20add\x20Node\x20\x22'+_0x43f9bc+_0x39086e(0x1c6),_0x39086e(0x26c)+_0x374038+_0x39086e(0x14b)+_0x22a925[_0x39086e(0x270)],0x1f4,_0x39086e(0x24f),![],_0x7a2c47,!![]);if(_0x181cf9){const _0x1d6fca=basics[_0x39086e(0x245)](_0x3ff115,_0x22a925);return customErrorCompact(_0x39086e(0x28b)+_0x43f9bc+_0x39086e(0x1c6),_0x39086e(0x1d0)+_0x43f9bc+_0x39086e(0x15d)+_0x1d6fca+'\x22',0x1f4,_0x39086e(0x24f),![],_0x7a2c47,!![]);}_0x7a2c47=_0x39086e(0x264)+NODEU['v1']()+_0x39086e(0x17d)+Date[_0x39086e(0x275)]()+_0x39086e(0x296)+_0xf3e375[_0x39086e(0x15e)]+_0x39086e(0x25e)+_0xf3e375['name']+'\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node,handlesChangeOf,ECO',_0x391d56=await _0xacca17[_0x39086e(0xa8)](_0x7a2c47,{'nodeId':_0x4b7bc9,'ecoId':_0x4a4533})[_0x39086e(0x204)](_0x4a876c=>{const _0x365b42=_0x39086e;return customErrorCompact(_0x365b42(0x28b)+_0x43f9bc+_0x365b42(0x1c6),_0x4a876c[_0x365b42(0x268)],0x1f4,_0x365b42(0x24f),!![],_0x7a2c47,_0x4a876c);}),_0xacca17['close']();if(_0x391d56['error'])return _0x391d56;if(!_0x391d56['records'][_0x39086e(0x1e5)])return customErrorCompact(_0x39086e(0x28b)+_0x43f9bc+_0x39086e(0x1c6),_0x39086e(0xc0),0x1f4,_0x39086e(0x24f),![],_0x7a2c47,!![]);const _0x47114d={};return _0x47114d[_0x39086e(0x1e8)]=![],_0x47114d[_0x39086e(0xad)]=_0x391d56[_0x39086e(0x1fe)][0x0][_0x39086e(0x1b3)](_0x39086e(0x21b))[_0x39086e(0xea)],_0x47114d[_0x39086e(0x27b)]=_0x391d56[_0x39086e(0x1fe)][0x0]['get'](_0x39086e(0x20d))['properties'],_0x47114d[_0x39086e(0x1eb)]=_0x391d56[_0x39086e(0x1fe)][0x0][_0x39086e(0x1b3)](_0x39086e(0x1eb))[_0x39086e(0xea)],customSuccess(_0x47114d);},exports[_0x495b8d(0x274)]=async _0x5b8d53=>{const _0x58d94d=_0x495b8d,_0x5640e3='\x20MATCH\x20(node)<-[handlesChangeOf:handlesChangeOf\x20{\x20_type:\x20\x27handlesChangeOf\x27\x20}]-(ECO{_id:$ecoId})\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20RETURN\x20node,handlesChangeOf,ECO',_0x156f38=driver[_0x58d94d(0x1b4)](),_0x58e582=await _0x156f38[_0x58d94d(0xa8)](_0x5640e3,{'ecoId':_0x5b8d53})[_0x58d94d(0x204)](_0x365fb6=>{const _0xbfd6dd=_0x58d94d;return customErrorCompact(_0xbfd6dd(0x1e9),_0x365fb6[_0xbfd6dd(0x268)],0x1f4,_0xbfd6dd(0x274),!![],_0x5640e3,_0x365fb6);});_0x156f38['close']();if(_0x58e582[_0x58d94d(0x131)])return _0x58e582;const _0x47732d={};return _0x47732d[_0x58d94d(0x1e8)]=![],_0x47732d[_0x58d94d(0xad)]=_0x58e582[_0x58d94d(0x1fe)][0x0][_0x58d94d(0x1b3)](_0x58d94d(0x21b))[_0x58d94d(0xea)],_0x47732d[_0x58d94d(0xad)][_0x58d94d(0xef)]=[],_0x58e582[_0x58d94d(0x1fe)][_0x58d94d(0x156)](_0x2c6fcb=>{const _0x3f0183=_0x58d94d,_0x13d412=_0x2c6fcb[_0x3f0183(0x1b3)](_0x3f0183(0x20d))['properties'];_0x13d412[_0x3f0183(0x1eb)]=_0x2c6fcb[_0x3f0183(0x1b3)]('node')[_0x3f0183(0xea)],_0x47732d[_0x3f0183(0xad)][_0x3f0183(0xef)][_0x3f0183(0xf0)](_0x13d412);}),customSuccess(_0x47732d);},exports['getECOControlledNode']=async(_0x98e363,_0x10ec5b)=>{const _0x178edc=_0x495b8d,_0x30ef1a=_0x178edc(0xe3),_0xab5be5=driver[_0x178edc(0x1b4)](),_0x3f38b3=await _0xab5be5[_0x178edc(0xa8)](_0x30ef1a,{'nodeId':_0x10ec5b,'ecoId':_0x98e363})[_0x178edc(0x204)](_0x5f3781=>{const _0xcf86f4=_0x178edc;return customErrorCompact(_0xcf86f4(0x1dc),_0x5f3781[_0xcf86f4(0x268)],0x1f4,_0xcf86f4(0x161),!![],_0x30ef1a,_0x5f3781);});_0xab5be5[_0x178edc(0x15b)]();if(_0x3f38b3[_0x178edc(0x131)])return _0x3f38b3;const _0xcb38e4={};return _0xcb38e4[_0x178edc(0x1e8)]=![],_0xcb38e4['eco']=_0x3f38b3['records'][0x0][_0x178edc(0x1b3)](_0x178edc(0x21b))[_0x178edc(0xea)],_0xcb38e4[_0x178edc(0xad)][_0x178edc(0xef)]=[],_0x3f38b3[_0x178edc(0x1fe)][_0x178edc(0x156)](_0x4ff0ee=>{const _0x5ad1ca=_0x178edc,_0x105420=_0x4ff0ee['get'](_0x5ad1ca(0x20d))[_0x5ad1ca(0xea)];_0x105420[_0x5ad1ca(0x1eb)]=_0x4ff0ee[_0x5ad1ca(0x1b3)](_0x5ad1ca(0x1eb))[_0x5ad1ca(0xea)],_0xcb38e4[_0x5ad1ca(0xad)][_0x5ad1ca(0xef)][_0x5ad1ca(0xf0)](_0x105420);}),customSuccess(_0xcb38e4);},exports[_0x495b8d(0x29a)]=async(_0x1b074d,_0x250a56,_0x2d7888)=>{const _0x2461c2=_0x495b8d;let _0xe35ece=_0x2461c2(0x171);if(_0x2d7888['singleValue'])_0xe35ece=_0x2461c2(0x1bb)+_0x2d7888['param']+_0x2461c2(0x24c)+_0x2d7888[_0x2461c2(0x1ff)]+'\x27';else{const _0x178185=[];Object[_0x2461c2(0x103)](_0x2d7888)[_0x2461c2(0x156)](_0x4e68c9=>{const _0x17b2e7=_0x2461c2;_0x178185[_0x17b2e7(0xf0)]('handlesChangeOf.'+_0x4e68c9+_0x17b2e7(0x24c)+_0x2d7888[_0x4e68c9]+'\x27');}),_0xe35ece=_0x178185[_0x2461c2(0x217)](',');}const _0xb5f682=_0x2461c2(0x1cd)+_0xe35ece+_0x2461c2(0x128),_0x5dd7bd=driver[_0x2461c2(0x1b4)](),_0x53b58a=await _0x5dd7bd[_0x2461c2(0xa8)](_0xb5f682,{'nodeId':_0x250a56,'ecoId':_0x1b074d})[_0x2461c2(0x204)](_0x30144d=>{const _0x156a57=_0x2461c2;return customErrorCompact(_0x156a57(0x2c0),_0x30144d[_0x156a57(0x268)],0x1f4,_0x156a57(0x29a),!![],_0xb5f682,_0x30144d);});_0x5dd7bd[_0x2461c2(0x15b)]();if(_0x53b58a[_0x2461c2(0x131)])return _0x53b58a;const _0x4432a4=_[_0x2461c2(0x1b3)](_0x53b58a['records'][0x0][_0x2461c2(0x1b3)](_0x2461c2(0x1eb)),'labels',null),_0x20db82=_['get'](_0x53b58a['records'][0x0][_0x2461c2(0x1b3)](_0x2461c2(0x1eb)),_0x2461c2(0xea),{}),_0x50b1f5={..._0x20db82,'type':_0x4432a4[0x0]},_0x20d647=_['get'](_0x53b58a[_0x2461c2(0x1fe)][0x0][_0x2461c2(0x1b3)](_0x2461c2(0x27b)),_0x2461c2(0xea),null);return customSuccess({'node':_0x50b1f5,'handle':_0x20d647});},exports['updateECOControlledNodeLinkActions']=async(_0x52085d,_0x31ed77,_0x3ede1a)=>{const _0x330a64=_0x495b8d,_0x5073b1=await manipulateECOControlledNodeLinkActions(_0x52085d,_0x31ed77,_0x3ede1a),_0x4007a7=JSON[_0x330a64(0x206)](_0x5073b1)[_0x330a64(0x1c5)](/'/g,'\x5c\x27'),_0x36d0c0=_0x330a64(0x1f5)+_0x4007a7+_0x330a64(0x248),_0x2f6820=driver[_0x330a64(0x1b4)](),_0x33abf4=await _0x2f6820[_0x330a64(0xa8)](_0x36d0c0,{'nodeId':_0x31ed77,'ecoId':_0x52085d})[_0x330a64(0x204)](_0x45ba5c=>{const _0x32ece3=_0x330a64;return customErrorCompact(_0x32ece3(0xab),_0x45ba5c['message'],0x1f4,_0x32ece3(0x263),!![],_0x36d0c0,_0x45ba5c);});_0x2f6820[_0x330a64(0x15b)]();if(_0x33abf4[_0x330a64(0x131)])return _0x33abf4;if(!_0x33abf4[_0x330a64(0x1fe)][_0x330a64(0x1e5)])return customErrorCompact(_0x330a64(0xab),'No\x20results\x20found',0x1f4,_0x330a64(0x263),![],_0x36d0c0);const _0x2b5d75=_[_0x330a64(0x1b3)](_0x33abf4['records'][0x0][_0x330a64(0x1b3)](_0x330a64(0x1eb)),_0x330a64(0xd2),[]),_0x4f8b1b=_[_0x330a64(0x1b3)](_0x33abf4['records'][0x0][_0x330a64(0x1b3)](_0x330a64(0x1eb)),_0x330a64(0xea),{}),_0x3e5833={..._0x4f8b1b,'type':_0x2b5d75[0x0]},_0x18f7c7=_[_0x330a64(0x1b3)](_0x33abf4[_0x330a64(0x1fe)][0x0]['get'](_0x330a64(0x27b)),_0x330a64(0xea),'null');return customSuccess({'node':_0x3e5833,'handle':_0x18f7c7});},exports['removeNodeFromECO']=async(_0x3dbde5,_0x587dfb)=>{const _0x40402b=_0x495b8d,_0x5dfe7a=_0x40402b(0xa4),_0x1592a6=driver[_0x40402b(0x1b4)](),_0x58b943=await _0x1592a6[_0x40402b(0xa8)](_0x5dfe7a,{'nodeId':_0x587dfb,'ecoId':_0x3dbde5})[_0x40402b(0x204)](_0x3f1274=>{const _0x1e425d=_0x40402b;return customErrorCompact(_0x1e425d(0x193),_0x3f1274[_0x1e425d(0x268)],0x1f4,'removeNodeFromECO',!![],_0x5dfe7a,_0x3f1274);});_0x1592a6[_0x40402b(0x15b)]();if(_0x58b943[_0x40402b(0x131)])return _0x58b943;if(!_0x58b943[_0x40402b(0x257)][_0x40402b(0x1af)][_0x40402b(0x26f)]['relationshipsDeleted'])return customErrorCompact('Error\x20Removing\x20Node\x20from\x20ECO',_0x40402b(0x237),0x194,_0x40402b(0x109),![],_0x5dfe7a,!![]);return customSuccess(!![]);},exports[_0x495b8d(0xec)]=async _0x2b31a0=>{const _0x1b68db=_0x495b8d,_0x4f200b=global[_0x1b68db(0x1a8)]['nodetypeDefinitions'][_0x1b68db(0xb2)](_0x46fbb1=>_0x46fbb1['changeMethod']===_0x1b68db(0xad)),_0xc5d142=global[_0x1b68db(0x1a8)][_0x1b68db(0xba)][_0x1b68db(0xb2)](_0x13447e=>_0x13447e[_0x1b68db(0xda)]&&_0x13447e[_0x1b68db(0x281)]===_0x1b68db(0x1a2)),_0x5dd053=_0x4f200b[_0x1b68db(0x139)](_0x370888=>'unControlledChildNode:'+_0x370888[_0x1b68db(0x25b)])[_0x1b68db(0x217)]('\x20OR\x20'),_0xf1813e=_0x4f200b[_0x1b68db(0x139)](_0xb74bf0=>'unControlledParentNode:'+_0xb74bf0[_0x1b68db(0x25b)])[_0x1b68db(0x217)](_0x1b68db(0x125));let _0x30c263=_[_0x1b68db(0x221)](_0xc5d142[_0x1b68db(0x139)](_0x2e6d24=>''+_0x2e6d24['linkName']))['join']('|');_0xc5d142[_0x1b68db(0x1e5)]===0x0&&(_0x30c263=_0x1b68db(0x179));const _0x590b1d=_0x1b68db(0x12e)+_0x30c263+_0x1b68db(0x21a)+_0x30c263+_0x1b68db(0x207)+_0x30c263+_0x1b68db(0xc7),_0x112371=driver['session'](),_0x556a0e=await _0x112371['run'](_0x590b1d,{'ecoId':_0x2b31a0})[_0x1b68db(0x204)](_0x2d8726=>{const _0x4debf0=_0x1b68db;return customErrorCompact(_0x4debf0(0x10e),_0x2d8726['message'],0x1f4,_0x4debf0(0xec),!![],_0x590b1d,_0x2d8726);});_0x112371[_0x1b68db(0x15b)]();if(_0x556a0e[_0x1b68db(0x131)])return _0x556a0e;if(_0x556a0e[_0x1b68db(0x1fe)][_0x1b68db(0x1e5)]===0x0)return customSuccess([]);let _0x4c5e01=[];return _0x556a0e[_0x1b68db(0x1fe)][_0x1b68db(0x156)](_0x42aab9=>{const _0x2adb3a=_0x1b68db,_0x4d4ee2=_0x42aab9['get'](_0x2adb3a(0x2bc))&&_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x2bc))[_0x2adb3a(0xea)];_0x4d4ee2['node']=_0x42aab9['get'](_0x2adb3a(0x1eb))&&_0x42aab9[_0x2adb3a(0x1b3)]('node')[_0x2adb3a(0xea)],delete _0x4d4ee2[_0x2adb3a(0x1eb)]['_history'],delete _0x4d4ee2[_0x2adb3a(0x1eb)]['_promotions'],[_0x4d4ee2[_0x2adb3a(0x1eb)]['_type']]=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x199)),_0x4d4ee2[_0x2adb3a(0x1eb)]['control']=_0x42aab9[_0x2adb3a(0x1b3)]('ManageRelType'),_0x4d4ee2['targetNodeId']=_0x4d4ee2[_0x2adb3a(0x1eb)]['_id'];const _0x7ae00a=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x2ad))&&_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x2ad))[_0x2adb3a(0xea)];_0x7ae00a&&(_0x4d4ee2[_0x2adb3a(0xd4)]=_0x7ae00a[_0x2adb3a(0x15e)]);const _0x2706bf=_0x42aab9['get'](_0x2adb3a(0x235))&&_0x42aab9['get'](_0x2adb3a(0x235))['properties'];_0x2706bf&&(_0x4d4ee2[_0x2adb3a(0x17f)]=_0x2706bf['_id']);const _0x57c87a=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x1bc))&&_0x42aab9[_0x2adb3a(0x1b3)]('parentRel')[_0x2adb3a(0xea)],_0x3aa713=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x1ac)),_0x2b5d43=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x1d1))&&_0x42aab9['get'](_0x2adb3a(0x1d1))[_0x2adb3a(0xea)],_0x443f99=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x130)),_0x1d06a2=_0x42aab9['get'](_0x2adb3a(0x27d))&&_0x42aab9[_0x2adb3a(0x1b3)]('childRel')['properties'],_0xe7f687=_0x42aab9['get'](_0x2adb3a(0x153)),_0x269ff0=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x192))&&_0x42aab9['get']('impactedChildNode')[_0x2adb3a(0xea)],_0x1467d8=_0x42aab9[_0x2adb3a(0x1b3)](_0x2adb3a(0x16c));if(_0x2b5d43){const _0x2a9080={..._0x4d4ee2};_0x2a9080['impactedNode']=_0x2b5d43,delete _0x2a9080[_0x2adb3a(0x1f0)]['_history'],delete _0x2a9080[_0x2adb3a(0x1f0)][_0x2adb3a(0x166)],[_0x2a9080[_0x2adb3a(0x1f0)][_0x2adb3a(0x284)]]=_0x443f99,_0x2a9080['impactedNode'][_0x2adb3a(0x26b)]='parent',_0x2a9080[_0x2adb3a(0x1f0)][_0x2adb3a(0x1a6)]={..._0x57c87a,'linkName':_0x3aa713},_0x4c5e01[_0x2adb3a(0xf0)](_0x2a9080);}if(_0x269ff0){const _0x3f0209={..._0x4d4ee2};_0x3f0209[_0x2adb3a(0x1f0)]=_0x269ff0,delete _0x3f0209[_0x2adb3a(0x1f0)][_0x2adb3a(0x277)],delete _0x3f0209[_0x2adb3a(0x1f0)][_0x2adb3a(0x166)],[_0x3f0209[_0x2adb3a(0x1f0)][_0x2adb3a(0x284)]]=_0x1467d8,_0x3f0209['impactedNode'][_0x2adb3a(0x26b)]=_0x2adb3a(0x1da),_0x3f0209['impactedNode'][_0x2adb3a(0x1a6)]={..._0x1d06a2,'linkName':_0xe7f687},_0x4c5e01[_0x2adb3a(0xf0)](_0x3f0209);}!_0x269ff0&&!_0x2b5d43&&_0x4c5e01[_0x2adb3a(0xf0)]({..._0x4d4ee2});}),_0x4c5e01[_0x1b68db(0x156)](_0xb12c05=>{const _0x4fa89f=_0x1b68db,_0x34184d=global[_0x4fa89f(0x1a8)][_0x4fa89f(0xba)][_0x4fa89f(0x18a)](_0x6a3cf5=>_0x6a3cf5[_0x4fa89f(0x25b)]===_0xb12c05['node'][_0x4fa89f(0x284)]);_0xb12c05[_0x4fa89f(0x1eb)]['_maidenName']=basics['buildMaidenName'](_0xb12c05[_0x4fa89f(0x1eb)],_0x34184d);if(!_[_0x4fa89f(0x23d)](_0xb12c05[_0x4fa89f(0x1f0)])){const _0x5cb4c8=global[_0x4fa89f(0x1a8)][_0x4fa89f(0xba)][_0x4fa89f(0x18a)](_0x19a957=>_0x19a957[_0x4fa89f(0x25b)]===_0xb12c05[_0x4fa89f(0x1f0)][_0x4fa89f(0x284)]);_0xb12c05[_0x4fa89f(0x1f0)][_0x4fa89f(0x200)]=basics[_0x4fa89f(0x245)](_0xb12c05[_0x4fa89f(0x1f0)],_0x5cb4c8);}}),_0x4c5e01=_(_0x4c5e01)[_0x1b68db(0xeb)](_0x1b68db(0x183))['map'](_0x1ae4b6=>{const _0x37b5ad=_0x1b68db,_0x56edf6=_0x1ae4b6[0x0];return _0x56edf6[_0x37b5ad(0xf3)]=_0x1ae4b6[_0x37b5ad(0x139)](_0x35d5ce=>_0x35d5ce[_0x37b5ad(0x1f0)]),delete _0x56edf6[_0x37b5ad(0x1f0)],_0x56edf6;}),_0x4c5e01=_0x4c5e01[_0x1b68db(0x139)](_0xa819dc=>{const _0x5a0ab5=_0x1b68db;delete _0xa819dc['node'][_0x5a0ab5(0x166)];const _0x51611d=_[_0x5a0ab5(0x2a3)](_0xa819dc[_0x5a0ab5(0xf3)],_[_0x5a0ab5(0x18e)])[_0x5a0ab5(0xb2)](_0x4fef5b=>_0x4fef5b!==undefined);return _0x51611d?_0xa819dc['impactedNodes']=_0x51611d:_0xa819dc['impactedNodes']=[],_0xa819dc;}),customSuccess(_0x4c5e01);},exports[_0x495b8d(0x182)]=async _0xcc3bb6=>{const _0x471115=_0x495b8d,_0xa1e99c=global[_0x471115(0x1a8)][_0x471115(0xba)]['filter'](_0x54701c=>_0x54701c[_0x471115(0x270)]===_0x471115(0xad)),_0x4e2661=global[_0x471115(0x1a8)][_0x471115(0xba)][_0x471115(0xb2)](_0x52a4c5=>_0x52a4c5[_0x471115(0xda)]&&_0x52a4c5[_0x471115(0x281)]===_0x471115(0x1a2)),_0x19c10d=_0xa1e99c[_0x471115(0x139)](_0x29dc99=>_0x471115(0x246)+_0x29dc99[_0x471115(0x25b)])[_0x471115(0x217)](_0x471115(0x125)),_0x334b87=_0xa1e99c[_0x471115(0x139)](_0x75e405=>_0x471115(0x24a)+_0x75e405[_0x471115(0x25b)])['join'](_0x471115(0x125));let _0x3a6de2=_['uniq'](_0x4e2661['map'](_0x33fb49=>''+_0x33fb49[_0x471115(0x10f)]))[_0x471115(0x217)]('|');_0x4e2661[_0x471115(0x1e5)]===0x0&&(_0x3a6de2='norelationshipbrowsing');const _0x3f9321=_0x471115(0x1ea)+_0x3a6de2+_0x471115(0x122)+_0x3a6de2+']-(unControlledParentNode)\x0a\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20NOT((unControlledParentNode)-[:revises]->()<-[:generated]-(ECO))\x20\x20\x20AND\x0a\x20\x20\x20\x20\x20\x20NOT((unControlledParentNode)-[:revises]-()<-[:handlesChangeOf]-(ECO))\x20\x20\x20AND\x0a\x20\x20\x20\x20\x20\x20NOT((unControlledParentNode)<-[:revises]-()-[:'+_0x3a6de2+_0x471115(0x22a),_0x15f16e=driver[_0x471115(0x1b4)](),_0x3cfff9=await _0x15f16e[_0x471115(0xa8)](_0x3f9321,{'ecoId':_0xcc3bb6})[_0x471115(0x204)](_0x17e93e=>{const _0x3b77d4=_0x471115;return customErrorCompact(_0x3b77d4(0x25f),_0x17e93e['message'],0x1f4,_0x3b77d4(0x182),!![],_0x3f9321,_0x17e93e);});_0x15f16e['close']();if(_0x3cfff9[_0x471115(0x131)])return _0x3cfff9;if(_0x3cfff9[_0x471115(0x1fe)][_0x471115(0x1e5)]===0x0)return customSuccess([]);let _0x56bb7d=[];return _0x3cfff9[_0x471115(0x1fe)]['forEach'](_0x408c03=>{const _0x1a4b10=_0x471115,_0x1c1e80=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x20d))&&_0x408c03[_0x1a4b10(0x1b3)]('handlesChangeOf')['properties'];_0x1c1e80[_0x1a4b10(0x1eb)]=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x1eb))&&_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x1eb))[_0x1a4b10(0xea)],[_0x1c1e80[_0x1a4b10(0x1eb)]['_type']]=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0xae)),_0x1c1e80[_0x1a4b10(0x146)]=_0x1c1e80[_0x1a4b10(0x1eb)][_0x1a4b10(0x15e)];const _0x5b75bc=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x1bc))&&_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x1bc))[_0x1a4b10(0xea)],_0x4630ea=_0x408c03[_0x1a4b10(0x1b3)]('parentRelType'),_0x400a9d=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x28d))&&_0x408c03[_0x1a4b10(0x1b3)]('unControlledParentNode')[_0x1a4b10(0xea)],_0x2b9a30=_0x408c03[_0x1a4b10(0x1b3)]('unControlledParentNodeLabels'),_0x34a36b=_0x408c03[_0x1a4b10(0x1b3)]('childRel')&&_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x27d))[_0x1a4b10(0xea)],_0x5e1fab=_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x153)),_0x58564c=_0x408c03['get'](_0x1a4b10(0x23b))&&_0x408c03[_0x1a4b10(0x1b3)](_0x1a4b10(0x23b))['properties'],_0x3d8865=_0x408c03['get'](_0x1a4b10(0x266));if(_0x400a9d){const _0x4d4d31={..._0x1c1e80};_0x4d4d31['impactedNode']=_0x400a9d,[_0x4d4d31[_0x1a4b10(0x1f0)][_0x1a4b10(0x284)]]=_0x2b9a30,_0x4d4d31['impactedNode'][_0x1a4b10(0x26b)]=_0x1a4b10(0xce),_0x4d4d31[_0x1a4b10(0x1f0)]['rel']={..._0x5b75bc,'linkName':_0x4630ea},_0x56bb7d[_0x1a4b10(0xf0)](_0x4d4d31);}if(_0x58564c){const _0x4971bc={..._0x1c1e80};_0x4971bc[_0x1a4b10(0x1f0)]=_0x58564c,[_0x4971bc['impactedNode'][_0x1a4b10(0x284)]]=_0x3d8865,_0x4971bc[_0x1a4b10(0x1f0)][_0x1a4b10(0x26b)]=_0x1a4b10(0x1da),_0x4971bc[_0x1a4b10(0x1f0)][_0x1a4b10(0x1a6)]={..._0x34a36b,'linkName':_0x5e1fab},_0x56bb7d[_0x1a4b10(0xf0)](_0x4971bc);}!_0x58564c&&!_0x400a9d&&_0x56bb7d[_0x1a4b10(0xf0)]({..._0x1c1e80});}),_0x56bb7d[_0x471115(0x156)](_0x33c8e0=>{const _0x1b906f=_0x471115,_0x29e43d=global[_0x1b906f(0x1a8)][_0x1b906f(0xba)]['find'](_0x5033e2=>_0x5033e2[_0x1b906f(0x25b)]===_0x33c8e0['node']['_type']);_0x33c8e0[_0x1b906f(0x1eb)][_0x1b906f(0x200)]=basics[_0x1b906f(0x245)](_0x33c8e0[_0x1b906f(0x1eb)],_0x29e43d);if(!_['isEmpty'](_0x33c8e0['impactedNode'])){const _0x2552e6=global[_0x1b906f(0x1a8)][_0x1b906f(0xba)]['find'](_0x947ba8=>_0x947ba8[_0x1b906f(0x25b)]===_0x33c8e0[_0x1b906f(0x1f0)][_0x1b906f(0x284)]);_0x33c8e0[_0x1b906f(0x1f0)][_0x1b906f(0x200)]=basics[_0x1b906f(0x245)](_0x33c8e0['impactedNode'],_0x2552e6);}}),_0x56bb7d=_(_0x56bb7d)[_0x471115(0xeb)]('node._id')[_0x471115(0x139)](_0x50a39d=>{const _0x3892ff=_0x471115,_0x4ad577=_0x50a39d[0x0];return _0x4ad577[_0x3892ff(0xf3)]=_0x50a39d['map'](_0x56add1=>_0x56add1['impactedNode']),delete _0x4ad577[_0x3892ff(0x1f0)],_0x4ad577;}),_0x56bb7d=_0x56bb7d[_0x471115(0x139)](_0x48156a=>{const _0xe1ad6d=_0x471115;delete _0x48156a[_0xe1ad6d(0x1eb)][_0xe1ad6d(0x166)];const _0x2c5586=_[_0xe1ad6d(0x2a3)](_0x48156a[_0xe1ad6d(0xf3)],_[_0xe1ad6d(0x18e)])[_0xe1ad6d(0xb2)](_0x1e5565=>_0x1e5565!==undefined);return _0x2c5586?_0x48156a[_0xe1ad6d(0xf3)]=_0x2c5586:_0x48156a[_0xe1ad6d(0xf3)]=[],_0x48156a;}),customSuccess(_0x56bb7d);},exports[_0x495b8d(0x295)]=async _0x35a1fc=>{const _0x577641=_0x495b8d,_0x3bc348=global[_0x577641(0x1a8)][_0x577641(0xba)][_0x577641(0xb2)](_0x1fd4a5=>_0x1fd4a5[_0x577641(0x270)]===_0x577641(0xad)),_0x751018=global[_0x577641(0x1a8)][_0x577641(0xba)][_0x577641(0xb2)](_0x28f34a=>_0x28f34a['configManager']&&_0x28f34a[_0x577641(0x281)]==='relationship'),_0x3375bf=_0x3bc348[_0x577641(0x139)](_0x16fce7=>_0x577641(0x246)+_0x16fce7[_0x577641(0x25b)])['join'](_0x577641(0x125)),_0x4296f2=_0x3bc348[_0x577641(0x139)](_0x5c7fd7=>_0x577641(0x24a)+_0x5c7fd7[_0x577641(0x25b)])[_0x577641(0x217)](_0x577641(0x125));let _0x1daba1=_[_0x577641(0x221)](_0x751018[_0x577641(0x139)](_0x412214=>''+_0x412214[_0x577641(0x10f)]))[_0x577641(0x217)]('|');_0x751018['length']===0x0&&(_0x1daba1='norelationshipbrowsing');const _0x333f51='\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)<-[generated:generated]-(ECO{_id:$ecoId})\x0a\x20\x20\x20\x20OPTIONAL\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(node)-[childRel:'+_0x1daba1+_0x577641(0x231)+_0x1daba1+_0x577641(0x1f6),_0x2bbc58=driver[_0x577641(0x1b4)](),_0x2c429c=await _0x2bbc58[_0x577641(0xa8)](_0x333f51,{'ecoId':_0x35a1fc})[_0x577641(0x204)](_0x394f34=>{const _0x4ef567=_0x577641;return customErrorCompact('Error\x20Getting\x20ECO\x20Controlled\x20Items',_0x394f34[_0x4ef567(0x268)],0x1f4,_0x4ef567(0x182),!![],_0x333f51,_0x394f34);});_0x2bbc58[_0x577641(0x15b)]();if(_0x2c429c['error'])return _0x2c429c;if(_0x2c429c[_0x577641(0x1fe)]['length']===0x0)return customSuccess([]);let _0x5c8ae4=[];return _0x2c429c[_0x577641(0x1fe)][_0x577641(0x156)](_0xf53c49=>{const _0x40c556=_0x577641,_0x47cd92=_0xf53c49[_0x40c556(0x1b3)]('generated')&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x28c))[_0x40c556(0xea)];_0x47cd92['node']=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x1eb))&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x1eb))[_0x40c556(0xea)],[_0x47cd92[_0x40c556(0x1eb)][_0x40c556(0x284)]]=_0xf53c49[_0x40c556(0x1b3)]('LabelsHandled'),_0x47cd92[_0x40c556(0x146)]=_0x47cd92[_0x40c556(0x1eb)][_0x40c556(0x15e)];const _0x1ecc0a=_0xf53c49['get'](_0x40c556(0x1bc))&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x1bc))[_0x40c556(0xea)],_0x2f5c06=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x1ac)),_0x4750b9=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x28d))&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x28d))[_0x40c556(0xea)],_0x51fea6=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x1d9)),_0xcc0ccf=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x27d))&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x27d))[_0x40c556(0xea)],_0x1218a8=_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x153)),_0x5dfc9c=_0xf53c49['get']('unControlledChildNode')&&_0xf53c49[_0x40c556(0x1b3)](_0x40c556(0x23b))[_0x40c556(0xea)],_0x1afddb=_0xf53c49[_0x40c556(0x1b3)]('unControlledChildNodeLabels');if(_0x4750b9){const _0x39e257={..._0x47cd92};_0x39e257[_0x40c556(0x1f0)]=_0x4750b9,[_0x39e257[_0x40c556(0x1f0)][_0x40c556(0x284)]]=_0x51fea6,_0x39e257['impactedNode'][_0x40c556(0x26b)]=_0x40c556(0xce),_0x39e257[_0x40c556(0x1f0)][_0x40c556(0x1a6)]={..._0x1ecc0a,'linkName':_0x2f5c06},_0x5c8ae4[_0x40c556(0xf0)](_0x39e257);}if(_0x5dfc9c){const _0x4d312c={..._0x47cd92};_0x4d312c[_0x40c556(0x1f0)]=_0x5dfc9c,[_0x4d312c[_0x40c556(0x1f0)][_0x40c556(0x284)]]=_0x1afddb,_0x4d312c[_0x40c556(0x1f0)][_0x40c556(0x26b)]='child',_0x4d312c[_0x40c556(0x1f0)][_0x40c556(0x1a6)]={..._0xcc0ccf,'linkName':_0x1218a8},_0x5c8ae4['push'](_0x4d312c);}!_0x5dfc9c&&!_0x4750b9&&_0x5c8ae4[_0x40c556(0xf0)]({..._0x47cd92});}),_0x5c8ae4['forEach'](_0x23bac2=>{const _0x28f121=_0x577641,_0x4b8d75=global[_0x28f121(0x1a8)]['nodetypeDefinitions'][_0x28f121(0x18a)](_0x5b49cf=>_0x5b49cf['name']===_0x23bac2[_0x28f121(0x1eb)][_0x28f121(0x284)]);_0x23bac2['node']['_maidenName']=basics[_0x28f121(0x245)](_0x23bac2[_0x28f121(0x1eb)],_0x4b8d75);if(!_[_0x28f121(0x23d)](_0x23bac2[_0x28f121(0x1f0)])){const _0x216af9=global[_0x28f121(0x1a8)]['nodetypeDefinitions'][_0x28f121(0x18a)](_0x4a0236=>_0x4a0236['name']===_0x23bac2[_0x28f121(0x1f0)]['_type']);_0x23bac2[_0x28f121(0x1f0)][_0x28f121(0x200)]=basics[_0x28f121(0x245)](_0x23bac2['impactedNode'],_0x216af9);}}),_0x5c8ae4=_(_0x5c8ae4)['groupBy']('node._id')[_0x577641(0x139)](_0x4dd1e8=>{const _0x3c8d11=_0x577641,_0x27e6d0=_0x4dd1e8[0x0];return _0x27e6d0[_0x3c8d11(0xf3)]=_0x4dd1e8[_0x3c8d11(0x139)](_0x10ab42=>{return _0x10ab42['impactedNode'];}),delete _0x27e6d0[_0x3c8d11(0x1f0)],_0x27e6d0;}),_0x5c8ae4=_0x5c8ae4['map'](_0x13dff5=>{const _0x21276f=_0x577641;delete _0x13dff5[_0x21276f(0x1eb)][_0x21276f(0x166)];const _0x151106=_[_0x21276f(0x2a3)](_0x13dff5[_0x21276f(0xf3)],_[_0x21276f(0x18e)])[_0x21276f(0xb2)](_0x441e54=>_0x441e54!==undefined);return _0x151106?_0x13dff5[_0x21276f(0xf3)]=_0x151106:_0x13dff5['impactedNodes']=[],_0x13dff5;}),customSuccess(_0x5c8ae4);},exports[_0x495b8d(0xdd)]=async(_0x1df6a3,_0x4558a0,_0x5bc12a,_0x41bc70)=>{const _0x5bd15b=_0x495b8d;let _0x5a9d3a=[];const _0x350365=_[_0x5bd15b(0x18a)](global[_0x5bd15b(0x1a8)]['nodetypeDefinitions'],{'name':_0x4558a0}),_0x5e6013=_[_0x5bd15b(0x1b3)](_0x350365,_0x5bd15b(0x149),[])[_0x5bd15b(0x18a)](_0x593c23=>_0x593c23['id']===_0x41bc70);if(!_0x5e6013[_0x5bd15b(0x1e6)]||!_0x5e6013['sourceBOM']||!_0x5e6013['targetBOM'])return customErrorCompact(_0x5bd15b(0xf6),_0x5bd15b(0x188),0x1f4,_0x5bd15b(0xdd),!![],'',!![]);const _0x485eaf=_['find'](global[_0x5bd15b(0x1a8)][_0x5bd15b(0xba)],{'id':_0x5e6013['targetRel']}),_0x1f1d63=_['find'](global['datamodel'][_0x5bd15b(0xba)],{'id':_0x5e6013[_0x5bd15b(0x152)]}),_0x24b1d5=_['find'](global[_0x5bd15b(0x1a8)][_0x5bd15b(0xba)],{'id':_0x5e6013[_0x5bd15b(0x1a1)]});if(!_0x485eaf||!_0x1f1d63||!_0x24b1d5)return customErrorCompact(_0x5bd15b(0xf6),'Check\x20if\x20SourceBOM,\x20TargetRel\x20and\x20TargetBOM\x20are\x20correctly\x20configured\x20in\x20instanciation\x20config',0x1f4,_0x5bd15b(0xdd),!![],'',!![]);const _0x4ef8cf=_0x24b1d5[_0x5bd15b(0x119)][0x0][_0x5bd15b(0x21d)],_0x5e98bc=_['find'](global[_0x5bd15b(0x1a8)][_0x5bd15b(0xba)],{'id':_0x4ef8cf});if(!_0x5e98bc)return customErrorCompact(_0x5bd15b(0xf6),_0x5bd15b(0x186),0x1f4,_0x5bd15b(0xdd),!![],'',!![]);const {linkName:_0x5d30d9}=_0x485eaf,_0x141615=_0x1f1d63[_0x5bd15b(0x10f)],_0x5c1635=_0x24b1d5[_0x5bd15b(0x10f)],_0x208d63=_[_0x5bd15b(0x18a)](_0x5e98bc['lifecycle'][_0x5bd15b(0xc5)],{'start':!![]});if(!_0x208d63)return customErrorCompact(_0x5bd15b(0xf6),'Instanciation\x20Target\x20Nodetype\x20has\x20no\x20start\x20State',0x1f4,_0x5bd15b(0xdd),!![],'',!![]);const _0x15b079=_0x221d9e=>{const _0x4c6ca0=_0x5bd15b,_0x2552a9={'_id':NODEU['v1']()[_0x4c6ca0(0x1b6)](),'_type':_0x5e98bc[_0x4c6ca0(0x25b)],'_promotions':[],'_history':[],'_serialized':[],'sourceRef':_0x221d9e['_ref'],'name':_0x221d9e['name'],'_state':_0x208d63[_0x4c6ca0(0x25b)],'_version':_0x4c6ca0(0x1ed),'_versionedOn':Date[_0x4c6ca0(0x275)](),'_tracked':_0x208d63[_0x4c6ca0(0x258)],'_lockable':_0x208d63['lockable'],'_lockState':![],'_createdOn':Date[_0x4c6ca0(0x275)](),'_createdBy':_0x1df6a3['_id'],'_createdByName':_0x1df6a3['name']};return _0x2552a9;},_0x4be0ce=_0x5bd15b(0x226)+_0x4558a0+_0x5bd15b(0x1ef),_0x173862=driver['session'](),_0xe5278a=await _0x173862[_0x5bd15b(0xa8)](_0x4be0ce,{'nodeId':_0x5bc12a});_0x173862[_0x5bd15b(0x15b)]();if(!_0xe5278a[_0x5bd15b(0x1fe)][_0x5bd15b(0x1e5)])return customErrorCompact(_0x5bd15b(0xf6),_0x5bd15b(0x209),0x1f4,_0x5bd15b(0xdd),!![],_0x4be0ce,!![]);const _0x3c99a5=_0xe5278a[_0x5bd15b(0x1fe)][0x0],{properties:_0x523c16}=_0x3c99a5[_0x5bd15b(0x1b3)]('n'),_0x1350b8={'_id':_0x5bc12a,'_type':_0x4558a0,'properties':_0x523c16};if(!_0x1350b8[_0x5bd15b(0xea)][_0x5bd15b(0x1d8)]||!_0x1350b8[_0x5bd15b(0xea)][_0x5bd15b(0x1d8)][_0x5bd15b(0x1e5)])return customErrorCompact(_0x5bd15b(0xf6),_0x5bd15b(0x2ac),0x1f4,_0x5bd15b(0xdd),!![],'');const _0x42b929=_0x5bd15b(0x27f)+_0x4558a0+_0x5bd15b(0x17a)+_0x141615+_0x5bd15b(0x141),_0x2bb780=driver[_0x5bd15b(0x1b4)](),_0x1428e8=await _0x2bb780[_0x5bd15b(0xa8)](_0x42b929,{'nodeId':_0x5bc12a,'instanciationId':_0x41bc70})[_0x5bd15b(0x204)](_0x5cb190=>{const _0x15b05f=_0x5bd15b;return _0x2bb780[_0x15b05f(0x15b)](),customErrorCompact(_0x15b05f(0xf6),_0x5cb190['message'],0x1f4,_0x15b05f(0xdd),!![],_0x42b929,_0x5cb190);});_0x2bb780['close']();if(_0x1428e8['error'])return _0x1428e8;if(!_0x1428e8['records']['length'])return customErrorCompact('Cannot\x20Instanciate\x20Node',_0x5bd15b(0x2ac),0x1f4,_0x5bd15b(0xdd),!![],_0x4be0ce,!![]);_0x1428e8[_0x5bd15b(0x1fe)][_0x5bd15b(0x139)](_0x1c4ef6=>{const _0x71c4f3=_0x5bd15b;if(_0x1c4ef6[_0x71c4f3(0x1b3)](_0x71c4f3(0x140))!==null){const {segments:_0x499576}=_0x1c4ef6[_0x71c4f3(0x1b3)](_0x71c4f3(0x140));_0x499576[_0x71c4f3(0x139)](_0x3734c0=>{const _0x2eb623=_0x71c4f3;if(_0x3734c0[_0x2eb623(0xc1)]['properties'][_0x2eb623(0x1d8)][_0x2eb623(0x23c)](_0x41bc70)&&_0x3734c0[_0x2eb623(0x11e)]['properties'][_0x2eb623(0x1d8)][_0x2eb623(0x23c)](_0x41bc70)){const _0x30acf9=_0x3734c0[_0x2eb623(0xc1)][_0x2eb623(0xea)];[_0x30acf9[_0x2eb623(0x284)]]=_0x3734c0[_0x2eb623(0xc1)][_0x2eb623(0xd2)];const _0x14b750=_0x3734c0[_0x2eb623(0x11e)][_0x2eb623(0xea)];[_0x14b750[_0x2eb623(0x284)]]=_0x3734c0[_0x2eb623(0x11e)][_0x2eb623(0xd2)];const _0x5e4d02=_0x3734c0[_0x2eb623(0x1a2)][_0x2eb623(0xea)];_0x5a9d3a[_0x2eb623(0xf0)]({'startNode':_0x30acf9,'endNode':_0x14b750,'relationship':_0x5e4d02});}});}}),_0x5a9d3a=_['uniqWith'](_0x5a9d3a,_[_0x5bd15b(0x18e)]);const _0x1a27c6=[],_0x147750=_0x1428e8[_0x5bd15b(0x1fe)][0x0][_0x5bd15b(0x1b3)]('n')[_0x5bd15b(0xea)],_0x1778ff=_0x15b079(_0x147750),_0x28f9cd=generateSetStatement(_0x1778ff),_0x259fbd=generateSetStatement({'_type':_0x485eaf[_0x5bd15b(0x25b)],'_createdOn':Date['now'](),'_createdBy':_0x1df6a3[_0x5bd15b(0x15e)],'_createdByName':_0x1df6a3['name'],'_id':NODEU['v1']()}),_0x4df58f=_0x5bd15b(0xdf)+_0x5e98bc['name']+'\x20{'+_0x28f9cd+'}),\x0a\x20\x20\x20\x20\x20\x20(instanciationNode)-[r:'+_0x5d30d9+'\x20{'+_0x259fbd+'}]->(startNode),\x0a\x20\x20\x20\x20\x20\x20(permission)-[:accessRole{role:\x27permissionSet\x27,_id:\x20\x27'+NODEU['v1']()+_0x5bd15b(0x214);_0x1a27c6[_0x5bd15b(0xf0)]({'part':_0x147750[_0x5bd15b(0x15e)],'node':_0x1778ff[_0x5bd15b(0x15e)]});const _0xd95947=[],_0x34263e=global[_0x5bd15b(0x1a8)][_0x5bd15b(0xba)]['find'](_0x31d6de=>{const _0xcead8f=_0x5bd15b;return _0x31d6de['id']===_0x24b1d5[_0xcead8f(0x119)][0x0][_0xcead8f(0x21d)];}),_0xf2985d=driver['session'](),_0x13a7f8=await _0xf2985d[_0x5bd15b(0xa8)](_0x4df58f,{'startNodeId':_0x147750[_0x5bd15b(0x15e)],'targetNodetypeDMName':_0x34263e[_0x5bd15b(0x25b)]})[_0x5bd15b(0x204)](_0x5d3c14=>{const _0x2acb9a=_0x5bd15b;return customErrorCompact(_0x2acb9a(0xf6),_0x5d3c14['message'],0x1f4,_0x2acb9a(0xdd),!![],_0x42b929,_0x5d3c14);});_0x2bb780[_0x5bd15b(0x15b)]();if(_0x13a7f8['error'])return _0x13a7f8;if(_0x13a7f8[_0x5bd15b(0x1fe)]['length']===0x0)return customErrorCompact(_0x5bd15b(0xf6),_0x5bd15b(0xcb)+_0x5e98bc['name'],0x1f4,_0x5bd15b(0xdd),!![],_0x42b929,!![]);const _0x87accf=_0x1778ff;_0x5a9d3a[_0x5bd15b(0x139)](_0x26503b=>{const _0x2cd199=_0x5bd15b,_0x339c9b=_0x26503b[_0x2cd199(0x1a2)][_0x2cd199(0x167)]?_0x26503b[_0x2cd199(0x1a2)][_0x2cd199(0x167)]:0x1;for(let _0x34593a=0x0;_0x34593a<_0x339c9b;_0x34593a+=0x1){const _0x43583c=_0x1a27c6['filter'](_0x3bf3ea=>_0x3bf3ea[_0x2cd199(0x224)]===_0x26503b[_0x2cd199(0xb9)][_0x2cd199(0x15e)]);_0x43583c[_0x2cd199(0x139)](_0x299d80=>{const _0x392cd0=_0x2cd199,_0x2565e5=_0x15b079(_0x26503b[_0x392cd0(0x2b9)]),_0x5ca30f=generateSetStatement(_0x2565e5),_0x1413d7=generateSetStatement({'_type':_0x24b1d5[_0x392cd0(0x25b)],'_createdOn':Date[_0x392cd0(0x275)](),'_createdBy':_0x1df6a3['_id'],'_createdByName':_0x1df6a3[_0x392cd0(0x25b)],'_id':NODEU['v1']()}),_0x5c2e44=generateSetStatement({'_type':_0x485eaf['name'],'_createdOn':Date[_0x392cd0(0x275)](),'_createdBy':_0x1df6a3[_0x392cd0(0x15e)],'_createdByName':_0x1df6a3[_0x392cd0(0x25b)],'_id':NODEU['v1']()});_0xd95947[_0x392cd0(0xf0)](_0x392cd0(0x232)+_0x26503b[_0x392cd0(0x2b9)][_0x392cd0(0x284)]+_0x392cd0(0xd6)+_0x26503b[_0x392cd0(0x2b9)][_0x392cd0(0x15e)]+_0x392cd0(0x1b7)+_0x5e98bc[_0x392cd0(0x25b)]+'\x20{_id:\x20\x22'+_0x299d80[_0x392cd0(0x1eb)]+_0x392cd0(0x25a)+_0x34263e[_0x392cd0(0x25b)]+_0x392cd0(0x2b6)+_0x5e98bc[_0x392cd0(0x25b)]+'\x20{'+_0x5ca30f+_0x392cd0(0x24b)+_0x5d30d9+'\x20{'+_0x5c2e44+_0x392cd0(0x242)+_0x5c1635+'\x20{'+_0x1413d7+_0x392cd0(0x2a8)+NODEU['v1']()+_0x392cd0(0x267)),_0x1a27c6[_0x392cd0(0xf0)]({'part':_0x26503b[_0x392cd0(0x2b9)][_0x392cd0(0x15e)],'node':_0x2565e5['_id']});});}});for(let _0x4c8927=0x0;_0x4c8927<_0xd95947[_0x5bd15b(0x1e5)];_0x4c8927++){const _0x260047=driver['session']();await _0x260047['run'](_0xd95947[_0x4c8927]);}return customSuccess(_0x87accf);},exports[_0x495b8d(0x1dd)]=async(_0x4b2af6,_0x49c1fc,_0x57d4cf,_0x225d21)=>{const _0x13b331=_0x495b8d,_0x30a96f={},_0x43a6e9=_[_0x13b331(0x18a)](global['datamodel'][_0x13b331(0xba)],{'name':_0x49c1fc}),_0x3be605=_['find'](_0x43a6e9['ui'][_0x13b331(0x238)],{'name':_0x225d21,'tabContentType':_0x13b331(0xd3)});if(!_0x3be605)return customErrorCompact(_0x13b331(0x17e),_0x13b331(0x16e)+_0x225d21+_0x13b331(0x10b)+_0x49c1fc+_0x13b331(0x256),0x194);if(!_0x3be605[_0x13b331(0xd3)])return customErrorCompact(_0x13b331(0xe1),_0x13b331(0x16e)+_0x225d21+_0x13b331(0x10b)+_0x49c1fc+_0x13b331(0x21c),0x193);let _0x1f5a3e=_0x3be605[_0x13b331(0xd3)][_0x13b331(0x189)];const _0x2b253f=_0x13b331(0x27f)+_0x49c1fc+'\x20{_id:$nodeId})\x20RETURN\x20n';let _0x2b97f1=driver[_0x13b331(0x1b4)]();const _0x3c8594=await _0x2b97f1['run'](_0x2b253f,{'nodeId':_0x57d4cf})[_0x13b331(0x204)](_0x1be85d=>{const _0x238607=_0x13b331;return customErrorCompact(_0x238607(0x292),_0x1be85d['message'],0x1f4,_0x238607(0x1dd),!![],_0x2b253f,_0x1be85d);})[_0x13b331(0x1cf)](()=>{const _0x758237=_0x13b331;_0x2b97f1[_0x758237(0x15b)]();}),_0x5abd2e=_0x3c8594['records'][0x0][_0x13b331(0x1b3)]('n')[_0x13b331(0xea)],_0x8d88f2=new RegExp(_0x13b331(0x1f1),'g'),_0x1492e4=_0x1f5a3e[_0x13b331(0x132)](_0x8d88f2);_0x1492e4&&_0x1492e4[_0x13b331(0x156)](_0x4975bc=>{const _0x49fdb3=_0x13b331,_0x3c24fb=_0x4975bc[_0x49fdb3(0x1c5)](/#/g,''),_0x141ad1=_0x3c24fb[_0x49fdb3(0x13b)]('.')[0x1],_0x1b6d51=_0x5abd2e[_0x141ad1];_0x1f5a3e=_0x1f5a3e['replace'](_0x4975bc,_0x1b6d51);});const _0x2dbe00=_0x3a195e=>{const _0x58b13c=_0x13b331;_0x3a195e=_0x3a195e[_0x58b13c(0x155)]();const _0x11ebe4=_0x1f5a3e[_0x58b13c(0x155)]();let _0x340198=![];return _0x1f5a3e[_0x58b13c(0x1b2)](_0x3a195e)>-0x1&&(_0x340198=!![]),_0x340198;},_0x57cd72=['CREATE',_0x13b331(0x2b5),_0x13b331(0x14d),_0x13b331(0x1f2),'REMOVE',_0x13b331(0x12a),'CALL',_0x13b331(0x1f9)];let _0x11e7ab=![];_0x57cd72[_0x13b331(0x156)](_0x9014fe=>{_0x11e7ab=_0x11e7ab||_0x2dbe00(_0x9014fe);});if(_0x11e7ab)return customErrorCompact('Cannot\x20Get\x20CustomTableView\x20Cypher\x20Statement\x20Working',_0x13b331(0x198),0x1f4,_0x13b331(0x1dd),!![]);_0x2b97f1=driver[_0x13b331(0x1b4)]();const _0x2b498e=await _0x2b97f1[_0x13b331(0xa8)](_0x1f5a3e)[_0x13b331(0x204)](_0x19f201=>{const _0xe32071=_0x13b331;return _0x2b97f1[_0xe32071(0x15b)](),customErrorCompact(_0xe32071(0x27c),_0x19f201[_0xe32071(0x268)],0x1f4,'getCustomTableViewContent',!![],_0x1f5a3e,_0x19f201);}),_0xc4b7ac=_0x3be605['customTableView'][_0x13b331(0x289)];return _0x30a96f['query']=_0x1f5a3e,_0x30a96f[_0x13b331(0x2a9)]=[],_0x30a96f['columns']=_0xc4b7ac,_0x2b498e[_0x13b331(0x1fe)]&&_0x2b498e[_0x13b331(0x1fe)][_0x13b331(0x156)](_0x46cdc7=>{const _0x45517d=_0x13b331,_0x2bee68={};_0xc4b7ac[_0x45517d(0x156)](_0x476e11=>{const _0x5a3965=_0x45517d;if(_0x476e11[_0x5a3965(0x273)]['split']('.')[_0x5a3965(0x1e5)]>0x1){const _0xf1d51c=_0x476e11[_0x5a3965(0x273)][_0x5a3965(0x13b)]('.')[0x0],_0x13d4c3=_0x476e11[_0x5a3965(0x273)][_0x5a3965(0x13b)]('.')[0x1];if(!_0x2bee68[_0xf1d51c])_0x2bee68[_0xf1d51c]={};_0x46cdc7[_0x5a3965(0x1b3)](_0xf1d51c)&&(_0x2bee68[_0xf1d51c][_0x13d4c3]=_0x46cdc7[_0x5a3965(0x1b3)](_0xf1d51c)[_0x5a3965(0xea)][_0x13d4c3],[_0x2bee68[_0xf1d51c][_0x5a3965(0x284)]]=_0x46cdc7['get'](_0xf1d51c)[_0x5a3965(0xd2)],_0x2bee68[_0xf1d51c][_0x5a3965(0x15e)]=_0x46cdc7[_0x5a3965(0x1b3)](_0xf1d51c)[_0x5a3965(0xea)][_0x5a3965(0x15e)]);}else _0x2bee68[_0x476e11['mapping']]=_0x46cdc7['get'](_0x476e11[_0x5a3965(0x273)]);}),_0x30a96f[_0x45517d(0x2a9)][_0x45517d(0xf0)](_0x2bee68);}),customSuccess(_0x30a96f);},exports[_0x495b8d(0x20a)]=async(_0xb4167e,_0x349ed1,_0x442cf2,_0x260c6b)=>{const _0x1e743d=_0x495b8d,_0x28d762={},_0x85e2fe=_[_0x1e743d(0x18a)](global['datamodel'][_0x1e743d(0xba)],{'name':_0x349ed1}),_0x26d2b3=_[_0x1e743d(0x18a)](_0x85e2fe['ui']['tabs'],{'name':_0x260c6b,'tabContentType':_0x1e743d(0xcd)});if(!_0x26d2b3)return customErrorCompact(_0x1e743d(0xc2),_0x1e743d(0x15c)+_0x260c6b+_0x1e743d(0x10b)+_0x349ed1+_0x1e743d(0x256),0x194);if(!_0x26d2b3[_0x1e743d(0xcd)])return customErrorCompact(_0x1e743d(0x165),_0x1e743d(0x15c)+_0x260c6b+_0x1e743d(0x10b)+_0x349ed1+_0x1e743d(0x21c),0x193);let _0x10ad01=_0x26d2b3[_0x1e743d(0xcd)][_0x1e743d(0x189)];const _0x3bc87c=_0x1e743d(0x27f)+_0x349ed1+_0x1e743d(0x1ef);let _0x361adc=driver[_0x1e743d(0x1b4)]();const _0x1ede17=await _0x361adc[_0x1e743d(0xa8)](_0x3bc87c,{'nodeId':_0x442cf2})['catch'](_0x50e0bd=>{const _0x3de74b=_0x1e743d;return customErrorCompact(_0x3de74b(0x292),_0x50e0bd[_0x3de74b(0x268)],0x1f4,_0x3de74b(0x18b),!![],_0x3bc87c,_0x50e0bd);})[_0x1e743d(0x1cf)](()=>{const _0x5517a2=_0x1e743d;_0x361adc[_0x5517a2(0x15b)]();}),_0x2efd34=_0x1ede17['records'][0x0][_0x1e743d(0x1b3)]('n')[_0x1e743d(0xea)],_0x162138=new RegExp(_0x1e743d(0x1f1),'g'),_0x4e3bad=_0x10ad01['match'](_0x162138);_0x4e3bad&&_0x4e3bad['forEach'](_0x1c2abd=>{const _0x3d2777=_0x1c2abd['replace'](/#/g,''),_0x424e6a=_0x3d2777['split']('.')[0x1],_0x58293=_0x2efd34[_0x424e6a];_0x10ad01=_0x10ad01['replace'](_0x1c2abd,_0x58293);});const _0xf37242=_0x4bad83=>{const _0x21e539=_0x1e743d;_0x4bad83=_0x4bad83[_0x21e539(0x155)]();const _0x4f7c1d=_0x10ad01[_0x21e539(0x155)]();let _0x5ed41a=![];return _0x10ad01[_0x21e539(0x1b2)](_0x4bad83)>-0x1&&(_0x5ed41a=!![]),_0x5ed41a;},_0x41210c=[_0x1e743d(0xf4),_0x1e743d(0x2b5),_0x1e743d(0x14d),_0x1e743d(0x1f2),_0x1e743d(0x1a0),_0x1e743d(0x12a),'CALL',_0x1e743d(0x1f9)];let _0x421f1f=![];_0x41210c[_0x1e743d(0x156)](_0x3a508e=>{_0x421f1f=_0x421f1f||_0xf37242(_0x3a508e);});if(_0x421f1f)return customErrorCompact(_0x1e743d(0x1c8),_0x1e743d(0x198),0x1f4,'getGrapgViewContent',!![]);_0x361adc=driver[_0x1e743d(0x1b4)]();let _0x10a4e8;const _0x9e44c4={'nodes':[],'relationships':[]};try{_0x10a4e8=await _0x361adc[_0x1e743d(0xa8)](_0x10ad01);const _0x1c1898=JSON[_0x1e743d(0x280)](_0x26d2b3[_0x1e743d(0xcd)][_0x1e743d(0xf1)]),_0x221767=[];_0x10a4e8[_0x1e743d(0x1fe)]['forEach'](_0x4eb39d=>{const _0x55f84c=_0x1e743d;_0x1c1898[_0x55f84c(0x102)]&&_0x1c1898['nodes'][_0x55f84c(0x156)](_0x5d001c=>{const _0x3644d3=_0x55f84c;_0x4eb39d['get'](_0x5d001c)!=null&&(_0x221767['indexOf'](_0x4eb39d[_0x3644d3(0x1b3)](_0x5d001c)[_0x3644d3(0x1d7)])===-0x1&&(_0x221767[_0x3644d3(0xf0)](_0x4eb39d['get'](_0x5d001c)[_0x3644d3(0x1d7)]),_0x9e44c4[_0x3644d3(0x102)]['push']({'id':_0x4eb39d['get'](_0x5d001c)[_0x3644d3(0x1d7)],'_id':_0x4eb39d[_0x3644d3(0x1b3)](_0x5d001c)[_0x3644d3(0xea)][_0x3644d3(0x15e)],'_type':_0x4eb39d[_0x3644d3(0x1b3)](_0x5d001c)[_0x3644d3(0xd2)][0x0],'properties':_0x4eb39d[_0x3644d3(0x1b3)](_0x5d001c)[_0x3644d3(0xea)]})));}),_0x1c1898[_0x55f84c(0x20c)]&&_0x1c1898[_0x55f84c(0x20c)][_0x55f84c(0x156)](_0x13f3b6=>{const _0x409389=_0x55f84c;if(Array[_0x409389(0x104)](_0x4eb39d[_0x409389(0x1b3)](_0x13f3b6)))_0x4eb39d[_0x409389(0x1b3)](_0x13f3b6)[_0x409389(0x156)](_0x44705c=>{const _0x476c7b=_0x409389,_0x26ab3b=_0x9e44c4['nodes'][_0x476c7b(0x18a)](_0x392600=>_0x392600['id']===_0x44705c['start']),_0x21188c=_0x9e44c4[_0x476c7b(0x102)][_0x476c7b(0x18a)](_0x4a8ee2=>_0x4a8ee2['id']===_0x44705c[_0x476c7b(0x11e)]);_0x9e44c4[_0x476c7b(0x20c)][_0x476c7b(0xf0)]({'id':_0x44705c[_0x476c7b(0x1d7)],'_id':_0x44705c[_0x476c7b(0xea)]['_id'],'linkname':_0x44705c[_0x476c7b(0x1ad)],'source':_0x26ab3b,'target':_0x21188c,'_type':_0x44705c[_0x476c7b(0xea)]['_type'],'properties':_0x44705c['properties']});});else{if(_0x4eb39d['get'](_0x13f3b6)!=null){const _0x2cef8c=_0x9e44c4[_0x409389(0x102)][_0x409389(0x18a)](_0x1118ea=>_0x1118ea['id']===_0x4eb39d['get'](_0x13f3b6)[_0x409389(0xc1)]),_0x3e8000=_0x9e44c4['nodes'][_0x409389(0x18a)](_0xe6c13b=>_0xe6c13b['id']===_0x4eb39d['get'](_0x13f3b6)['end']);_0x9e44c4[_0x409389(0x20c)][_0x409389(0xf0)]({'id':_0x4eb39d[_0x409389(0x1b3)](_0x13f3b6)[_0x409389(0x1d7)],'_id':_0x4eb39d['get'](_0x13f3b6)[_0x409389(0xea)][_0x409389(0x15e)],'linkname':_0x4eb39d[_0x409389(0x1b3)](_0x13f3b6)[_0x409389(0x1ad)],'source':_0x2cef8c,'target':_0x3e8000,'_type':_0x4eb39d[_0x409389(0x1b3)](_0x13f3b6)[_0x409389(0xea)][_0x409389(0x284)],'properties':_0x4eb39d['get'](_0x13f3b6)[_0x409389(0xea)]});}}}),_0x1c1898[_0x55f84c(0x2b3)]&&_0x1c1898[_0x55f84c(0x2b3)][_0x55f84c(0x156)](_0x5bdd15=>{const _0x2f2a2e=_0x55f84c;_0x4eb39d['get'](_0x5bdd15)&&Array[_0x2f2a2e(0x104)](_0x4eb39d[_0x2f2a2e(0x1b3)](_0x5bdd15)[_0x2f2a2e(0xd7)])&&_0x4eb39d['get'](_0x5bdd15)['segments'][_0x2f2a2e(0x156)](_0x32b288=>{const _0x29d965=_0x2f2a2e;_0x221767[_0x29d965(0x1b2)](_0x32b288[_0x29d965(0xc1)]['identity'])===-0x1&&(_0x221767[_0x29d965(0xf0)](_0x32b288[_0x29d965(0xc1)]),_0x9e44c4[_0x29d965(0x102)][_0x29d965(0xf0)]({'id':_0x32b288[_0x29d965(0xc1)][_0x29d965(0x1d7)],'_id':_0x32b288['start']['properties'][_0x29d965(0x15e)],'_type':_0x32b288[_0x29d965(0xc1)][_0x29d965(0xd2)][0x0],'properties':_0x32b288['start']['properties']}));_0x221767[_0x29d965(0x1b2)](_0x32b288[_0x29d965(0x11e)][_0x29d965(0x1d7)])===-0x1&&(_0x221767[_0x29d965(0xf0)](_0x32b288[_0x29d965(0x11e)][_0x29d965(0x1d7)]),_0x9e44c4['nodes']['push']({'id':_0x32b288[_0x29d965(0x11e)][_0x29d965(0x1d7)],'_id':_0x32b288['end'][_0x29d965(0xea)][_0x29d965(0x15e)],'_type':_0x32b288[_0x29d965(0x11e)]['labels'][0x0],'properties':_0x32b288[_0x29d965(0x11e)]['properties']}));const _0x59889f=_0x9e44c4[_0x29d965(0x102)][_0x29d965(0x18a)](_0x38642f=>_0x38642f['id']===_0x32b288[_0x29d965(0xc1)][_0x29d965(0x1d7)]),_0x30b22b=_0x9e44c4[_0x29d965(0x102)][_0x29d965(0x18a)](_0x1ac1e1=>_0x1ac1e1['id']===_0x32b288['end']['identity']);_0x9e44c4[_0x29d965(0x20c)][_0x29d965(0xf0)]({'id':_0x32b288[_0x29d965(0x1a2)]['identity'],'_id':_0x32b288[_0x29d965(0x1a2)][_0x29d965(0xea)][_0x29d965(0x15e)],'linkname':_0x32b288[_0x29d965(0x1a2)]['type'],'source':_0x59889f,'target':_0x30b22b,'_type':_0x32b288['relationship']['properties'][_0x29d965(0x284)],'properties':_0x32b288['relationship'][_0x29d965(0xea)]});});});});}catch(_0x31f727){return _0x361adc['close'](),customErrorCompact('Cannot\x20Get\x20GraphView\x20Cypher\x20Statement\x20Working',_0x31f727[_0x1e743d(0x268)],0x1f4,_0x1e743d(0x18b),!![],_0x10ad01,_0x31f727);}return customSuccess({'data':_0x9e44c4});},exports['getCustomTreeGridViewContent']=async(_0x27e75d,_0x31fb72,_0x52dbb7,_0x29d04e)=>{const _0x35cc08=_0x495b8d,_0x2482d4=_[_0x35cc08(0x18a)](global[_0x35cc08(0x1a8)][_0x35cc08(0xba)],{'name':_0x31fb72}),_0x46e7c5=_[_0x35cc08(0x18a)](_0x2482d4['ui'][_0x35cc08(0x238)],{'name':_0x29d04e,'tabContentType':'customTreeGridView'});if(!_0x46e7c5)return customErrorCompact('Custom\x20Table\x20View\x20does\x20not\x20exist',_0x35cc08(0x16e)+_0x29d04e+_0x35cc08(0x10b)+_0x31fb72+_0x35cc08(0x256),0x194);if(!_0x46e7c5['customTreeGridView'])return customErrorCompact('Custom\x20Table\x20View\x20exists\x20but\x20has\x20no\x20definition',_0x35cc08(0x16e)+_0x29d04e+_0x35cc08(0x10b)+_0x31fb72+'\x20has\x20no\x20definition',0x193);let _0x395ffb=_0x46e7c5[_0x35cc08(0x175)][_0x35cc08(0x189)];const _0x58d7af=_0x35cc08(0x27f)+_0x31fb72+_0x35cc08(0x1ef);let _0x37c7e0=driver['session']();const _0x1e641b=await _0x37c7e0['run'](_0x58d7af,{'nodeId':_0x52dbb7})[_0x35cc08(0x204)](_0x36eb08=>{const _0x4aa6d9=_0x35cc08;return customErrorCompact(_0x4aa6d9(0x19c),_0x36eb08[_0x4aa6d9(0x268)],0x1f4,'getCustomTreeGridViewContent',!![],_0x58d7af,_0x36eb08);})['finally'](()=>{const _0x505143=_0x35cc08;_0x37c7e0[_0x505143(0x15b)]();}),_0x383105=_0x1e641b['records'][0x0][_0x35cc08(0x1b3)]('n')[_0x35cc08(0xea)],_0x5dbdc9=new RegExp(_0x35cc08(0x1f1),'g'),_0x237ca7=_0x395ffb[_0x35cc08(0x132)](_0x5dbdc9);_0x237ca7&&_0x237ca7[_0x35cc08(0x156)](_0x1ad921=>{const _0x5deaa2=_0x35cc08,_0x12e27a=_0x1ad921[_0x5deaa2(0x1c5)](/#/g,''),_0x426b0c=_0x12e27a['split']('.')[0x1],_0x57035d=_0x383105[_0x426b0c];_0x395ffb=_0x395ffb['replace'](_0x1ad921,_0x57035d);});const _0x42f2b7=_0x13af09=>{const _0x2738e7=_0x35cc08;_0x13af09=_0x13af09['toUpperCase']();const _0x2c344a=_0x395ffb[_0x2738e7(0x155)]();let _0x886f5f=![];return _0x2c344a[_0x2738e7(0x1b2)](_0x13af09)>-0x1&&(_0x886f5f=!![]),_0x886f5f;},_0xda962f=[_0x35cc08(0xf4),_0x35cc08(0x2b5),_0x35cc08(0x14d),_0x35cc08(0x1f2),_0x35cc08(0x1a0),_0x35cc08(0x12a),_0x35cc08(0xac),_0x35cc08(0x1f9)];let _0x322d94=![];_0xda962f['forEach'](_0x12d41b=>{_0x322d94=_0x322d94||_0x42f2b7(_0x12d41b);});if(_0x322d94)return customErrorCompact('Cannot\x20Get\x20CustomTableView\x20Cypher\x20Statement\x20Working',_0x35cc08(0x198),0x1f4,_0x35cc08(0x1dd),!![]);_0x37c7e0=driver[_0x35cc08(0x1b4)]();const _0x3dedba=await _0x37c7e0[_0x35cc08(0xa8)](_0x395ffb)[_0x35cc08(0x204)](_0x514c0e=>{const _0x5a6df5=_0x35cc08;return _0x37c7e0[_0x5a6df5(0x15b)](),customErrorCompact(_0x5a6df5(0x27c),_0x514c0e[_0x5a6df5(0x268)],0x1f4,'getCustomTreeGridViewContent',!![],_0x395ffb,_0x514c0e);}),_0x567d89=_0x46e7c5['customTreeGridView'][_0x35cc08(0x289)],_0x56c00b={'query':_0x395ffb,'data':[],'columns':_0x567d89,'treeData':_0x567d89[_0x35cc08(0x299)](_0x4b49a0=>_0x4b49a0['type']===_0x35cc08(0xaf))},_0x498599=[],_0x46ca17=[];if(_0x3dedba[_0x35cc08(0x1fe)]){_0x3dedba['records']['forEach'](_0x48b620=>{const _0x3911d6=_0x35cc08;let _0x272c61=![];const _0x3f0eae={'_filterRemove':![]};_0x567d89[_0x3911d6(0x156)](_0x5b14a5=>{const _0x30bdf0=_0x3911d6;if(_0x5b14a5['type']==='treeStructure'){const _0x44a3ae=[],_0x163e5b=[],_0x5266cd=[];let _0x5370a5;_0x5b14a5[_0x30bdf0(0x273)][_0x30bdf0(0x13b)](',')[_0x30bdf0(0x156)](_0x143e40=>{const _0x5576e4=_0x30bdf0;let _0x3aa1d8=_0x143e40[_0x5576e4(0x13b)]('.')[0x0];if(_0x143e40[0x0]==='#'){_0x3aa1d8=_0x3aa1d8[_0x5576e4(0x14f)](0x1);if(_0x46ca17[_0x5576e4(0x1b2)](_0x3aa1d8)<0x0)_0x46ca17[_0x5576e4(0xf0)](_0x3aa1d8);const {segments:_0x484c50}=_0x48b620['get'](_0x3aa1d8);_0x484c50[_0x5576e4(0x156)](_0x53df43=>{const _0xafcb48=_0x5576e4;_0x44a3ae[_0xafcb48(0xf0)](_0x53df43[_0xafcb48(0x11e)]['properties']['_id']),_0x5370a5=_0x53df43['end'][_0xafcb48(0xea)][_0xafcb48(0x15e)];if(_0x53df43[_0xafcb48(0x11e)][_0xafcb48(0xd2)])_0x163e5b[_0xafcb48(0xf0)](_0x53df43[_0xafcb48(0x11e)][_0xafcb48(0xd2)][0x0]);_0x5266cd[_0xafcb48(0xf0)](_0x53df43['end'][_0xafcb48(0xea)][_0xafcb48(0x123)]);});}else{if(_0x143e40[0x0]==='*'){_0x3aa1d8=_0x3aa1d8[_0x5576e4(0x14f)](0x1);if(_0x498599[_0x5576e4(0x1b2)](_0x3aa1d8)<0x0)_0x498599['push'](_0x3aa1d8);const _0x1afd49=_0x48b620['get'](_0x3aa1d8);if(_0x1afd49){_0x44a3ae[_0x5576e4(0xf0)](_0x1afd49[_0x5576e4(0xea)]['_id']),_0x5370a5=_0x1afd49[_0x5576e4(0xea)]['_id'];if(_0x1afd49[_0x5576e4(0xd2)])_0x163e5b[_0x5576e4(0xf0)](_0x1afd49[_0x5576e4(0xd2)][0x0]);_0x143e40[_0x5576e4(0x13b)]('.')[_0x5576e4(0x1e5)]>0x1?_0x5266cd[_0x5576e4(0xf0)](_0x1afd49['properties'][_0x143e40[_0x5576e4(0x13b)]('.')[0x1]]):_0x5266cd[_0x5576e4(0xf0)](_0x1afd49[_0x5576e4(0xea)]['_ref']);}}else{const _0x3d975a=_0x48b620[_0x5576e4(0x1b3)](_0x3aa1d8);if(_0x46ca17['indexOf'](_0x3aa1d8)<0x0)_0x46ca17[_0x5576e4(0xf0)](_0x3aa1d8);if(_0x3d975a){_0x44a3ae[_0x5576e4(0xf0)](_0x3d975a[_0x5576e4(0xea)]['_id']),_0x5370a5=_0x3d975a['properties'][_0x5576e4(0x15e)];if(_0x3d975a['labels'])_0x163e5b[_0x5576e4(0xf0)](_0x3d975a[_0x5576e4(0xd2)][0x0]);_0x5266cd['push'](_0x3d975a[_0x5576e4(0xea)][_0x5576e4(0x123)]);}}}}),_0x3f0eae[_0x30bdf0(0x1d6)]=_0x44a3ae,_0x3f0eae[_0x30bdf0(0x2bf)]=_0x163e5b,_0x3f0eae[_0x30bdf0(0x20f)]=_0x5266cd,_0x3f0eae['id']=_0x5370a5,_0x3f0eae[_0x30bdf0(0x284)]=_0x163e5b[_0x163e5b[_0x30bdf0(0x1e5)]-0x1],_0x3f0eae[_0x30bdf0(0x2b7)]=_0x5266cd[_0x5266cd[_0x30bdf0(0x1e5)]-0x1];}else{let _0x3f9b3c=_0x5b14a5[_0x30bdf0(0x273)];const _0xb32388=_0x5b14a5[_0x30bdf0(0xd1)];if(_0xb32388===_0x46e7c5['customTreeGridView'][_0x30bdf0(0x178)]){if(_0x48b620[_0x30bdf0(0x1b3)](_0x30bdf0(0x1a6))){const _0x533663=[..._0x3f0eae[_0x30bdf0(0x1d6)]];_0x533663['pop'](),_0x533663['unshift'](_0x52dbb7);let _0x3add6b='';_0x3f0eae[_0x30bdf0(0x1d6)]&&(_0x3add6b=JSON[_0x30bdf0(0x206)](_0x533663));let _0x2d7b5e='';_0x48b620[_0x30bdf0(0x1b3)]('rel')[_0x30bdf0(0xea)][_0xb32388]&&(_0x2d7b5e=JSON[_0x30bdf0(0x206)](_0x48b620[_0x30bdf0(0x1b3)](_0x30bdf0(0x1a6))[_0x30bdf0(0xea)][_0xb32388]),_0x3f0eae['_relid']=_0x48b620[_0x30bdf0(0x1b3)]('rel')['properties'][_0x30bdf0(0x15e)],_0x3add6b!==_0x2d7b5e?_0x3f0eae[_0x30bdf0(0x286)]=!![]:_0x272c61=!![]);}}if(_0x3f9b3c[0x0]==='#'){_0x3f9b3c=_0x3f9b3c['substring'](0x1);const [_0x20bd3f,_0x1a67b0]=_0x3f9b3c[_0x30bdf0(0x13b)]('.');if(!_0x3f0eae[_0x20bd3f])_0x3f0eae[_0x20bd3f]={};if(_0x48b620[_0x30bdf0(0x1b3)](_0x20bd3f)){const {segments:_0x5f0cc7}=_0x48b620[_0x30bdf0(0x1b3)](_0x20bd3f),_0x5c08aa=_0x5f0cc7[_0x5f0cc7[_0x30bdf0(0x1e5)]-0x1];_0x1a67b0==='_edge'?(_0x3f0eae[_0x20bd3f][_0xb32388]=_0x5c08aa[_0x30bdf0(0x1a2)][_0x30bdf0(0xea)][_0xb32388],_0x3f0eae[_0x20bd3f]['_id']=_0x5c08aa[_0x30bdf0(0x1a2)][_0x30bdf0(0xea)][_0x30bdf0(0x15e)],_0x3f0eae[_0x20bd3f]['_type']=_0x5c08aa[_0x30bdf0(0x1a2)][_0x30bdf0(0x1ad)]):(_0x3f0eae[_0x20bd3f][_0xb32388]=_0x5c08aa[_0x30bdf0(0x11e)][_0x30bdf0(0xea)][_0xb32388],_0x3f0eae[_0x20bd3f]['_id']=_0x5c08aa[_0x30bdf0(0x11e)][_0x30bdf0(0xea)]['_id'],[_0x3f0eae[_0x20bd3f][_0x30bdf0(0x284)]]=_0x5c08aa[_0x30bdf0(0x11e)]['labels']);}}else{if(_0x48b620[_0x30bdf0(0x1b3)](_0x3f9b3c)){if(!_0x3f0eae[_0x3f9b3c])_0x3f0eae[_0x3f9b3c]={};_0x3f0eae[_0x3f9b3c][_0xb32388]=_0x48b620[_0x30bdf0(0x1b3)](_0x3f9b3c)['properties'][_0xb32388];if(_0x48b620[_0x30bdf0(0x1b3)](_0x3f9b3c)['labels'])[_0x3f0eae[_0x3f9b3c][_0x30bdf0(0x284)]]=_0x48b620[_0x30bdf0(0x1b3)](_0x3f9b3c)[_0x30bdf0(0xd2)];_0x3f0eae[_0x3f9b3c][_0x30bdf0(0x15e)]=_0x48b620[_0x30bdf0(0x1b3)](_0x3f9b3c)[_0x30bdf0(0xea)][_0x30bdf0(0x15e)];}}}}),_0x3f0eae[_0x3911d6(0x107)]=_0x272c61,_0x56c00b['data']['push'](_0x3f0eae);});const _0xf8343c=[];_0x56c00b['data']['forEach']((_0x3dd370,_0x8f541b)=>{const _0x358e01=_0x35cc08;let _0x33bd7e=![];_0x498599[_0x358e01(0x156)](_0x29ee50=>{_0x3dd370[_0x29ee50]&&(_0x33bd7e=!![]);});if(_0x33bd7e){const _0x47a80e=JSON['parse'](JSON[_0x358e01(0x206)](_0x3dd370));_0x47a80e[_0x358e01(0x1d6)][_0x358e01(0x24e)](),_0x47a80e['types'][_0x358e01(0x24e)](),_0x47a80e['displayNames'][_0x358e01(0x24e)](),_0x47a80e['id']=_0x47a80e[_0x358e01(0x1d6)][_0x47a80e['orgHierarchy'][_0x358e01(0x1e5)]-0x1],_0x47a80e[_0x358e01(0x284)]=_0x47a80e[_0x358e01(0x2bf)][_0x47a80e[_0x358e01(0x2bf)][_0x358e01(0x1e5)]-0x1],_0x47a80e[_0x358e01(0x107)]=![],_0x47a80e[_0x358e01(0x286)]=![],_0x47a80e[_0x358e01(0x2b7)]=_0x47a80e['displayNames'][_0x47a80e[_0x358e01(0x20f)][_0x358e01(0x1e5)]-0x1],_0x498599[_0x358e01(0x156)](_0x58c420=>{delete _0x47a80e[_0x58c420];}),delete _0x3dd370['p'],_0xf8343c['push'](_0x47a80e);}_0xf8343c['push'](_0x3dd370);}),_0x56c00b['data']=_0xf8343c;}return _0x56c00b[_0x35cc08(0x2a9)]=_0x56c00b['data'][_0x35cc08(0xb2)](_0x37852b=>{const _0x48f9f7=_0x35cc08;return!_0x37852b[_0x48f9f7(0x286)];}),_0x56c00b['data']=_0x56c00b[_0x35cc08(0x2a9)][_0x35cc08(0x139)](_0x46202c=>{const _0x3e2a56=_0x35cc08;return _0x46202c[_0x3e2a56(0xa1)]=_0x46202c[_0x3e2a56(0x1d6)]['join']('-'),_0x46202c;}),_0x56c00b[_0x35cc08(0x2a9)]=_[_0x35cc08(0x1db)](_0x56c00b['data'],_0x35cc08(0xa1)),customSuccess(_0x56c00b);},exports[_0x495b8d(0x1cb)]=async(_0x29467e,_0x1edb64,_0x3ca759)=>{const _0x2c8a0e=_0x495b8d;let _0x2a0393={};const _0x3ee1c9=_[_0x2c8a0e(0x18a)](global[_0x2c8a0e(0x1a8)][_0x2c8a0e(0x1b5)],{'id':_0x1edb64});if(!_0x3ee1c9)return customErrorCompact(_0x2c8a0e(0xa3),_0x2c8a0e(0x1f3)+_0x1edb64+_0x2c8a0e(0x256),0x194,_0x2c8a0e(0x1cb));let _0x5ada3b=[];const _0x401cd0=driver['session']();switch(_0x3ee1c9[_0x2c8a0e(0xf9)]){case _0x2c8a0e(0x1c4):_0x5ada3b=_0x3ee1c9[_0x2c8a0e(0x26a)];break;case'nodetype':_0x5ada3b=_0x3ee1c9[_0x2c8a0e(0x26a)];break;case _0x2c8a0e(0x1eb):const {nodetype:_0x3e375e,nodeId:_0x33cccd}=_0x3ca759,_0xf88520='\x20MATCH\x20(n:'+_0x3e375e+_0x2c8a0e(0xd6)+_0x33cccd+_0x2c8a0e(0x1c1),_0xa2e36e=await _0x401cd0[_0x2c8a0e(0xa8)](_0xf88520)['catch'](_0x55466c=>{const _0x599b60=_0x2c8a0e;return customErrorCompact(_0x599b60(0x1d2),_0x55466c[_0x599b60(0x268)],0x1f4,_0x599b60(0x1cb),!![],_0xf88520,_0x55466c);})[_0x2c8a0e(0x1cf)](()=>{const _0x3f8332=_0x2c8a0e;_0x401cd0[_0x3f8332(0x15b)]();}),_0x40b1ee=_0xa2e36e[_0x2c8a0e(0x1fe)][0x0]['get']('n');if(_0x40b1ee){const _0xd57d5c=_0xa2e36e[_0x2c8a0e(0x1fe)][0x0][_0x2c8a0e(0x1b3)]('n')[_0x2c8a0e(0xea)];_0x5ada3b=_0x3ee1c9[_0x2c8a0e(0x26a)][_0x2c8a0e(0x139)](_0x12f7e5=>{const _0x2a303f=_0x2c8a0e,_0x2e65eb={..._0x12f7e5},_0x2ab598=new RegExp(_0x2a303f(0x1f1),'g'),_0x2eca0f=_0x2e65eb[_0x2a303f(0x1a5)][_0x2a303f(0x132)](_0x2ab598);return _0x2eca0f&&_0x2eca0f[_0x2a303f(0x156)](_0x43f57a=>{const _0x344c56=_0x2a303f,_0x15a697=_0x43f57a['replace'](/#/g,''),_0x1a37e2=_0x15a697['split']('.')[0x1],_0x1575ed=_0xd57d5c[_0x1a37e2];_0x2e65eb['query']=_0x2e65eb[_0x344c56(0x1a5)][_0x344c56(0x1c5)](_0x43f57a,_0x1575ed);}),_0x2e65eb;});}break;default:break;}console[_0x2c8a0e(0x16a)](_0x2c8a0e(0xa7)),_0x3ee1c9[_0x2c8a0e(0x1ca)][_0x2c8a0e(0x219)]=_0x29467e[_0x2c8a0e(0xea)][_0x2c8a0e(0x2b7)]||_0x29467e[_0x2c8a0e(0xea)]['name']||_0x29467e[_0x2c8a0e(0xea)][_0x2c8a0e(0xf2)];try{return _0x2a0393=await reportEngine[_0x2c8a0e(0xa7)]({'queries':_0x5ada3b,'template':_0x3ee1c9['template'],'output':_0x2c8a0e(0x287),'cypherDriver':driver,'dataConverters':dataConverters}),console[_0x2c8a0e(0x1c3)](_0x2c8a0e(0xa7)),customSuccess(_0x2a0393);}catch(_0x3eef8){return console[_0x2c8a0e(0x131)](_0x3eef8),customErrorCompact(_0x2c8a0e(0x17b),_0x3eef8,0x1f4,_0x2c8a0e(0x1cb));}},exports[_0x495b8d(0x1e7)]=async(_0x122f22,_0x2e7b19,_0x11f590,_0xd397d7,_0x37b787,_0x4d4a71=!![])=>{const _0x41dbce=_0x495b8d,_0x16c1dd=await basics[_0x41dbce(0x181)]();if(_0x16c1dd[_0x41dbce(0x131)])return customErrorCompact(_0x41dbce(0x10c),_0x16c1dd['message'],0x1f4);if(!_0x16c1dd[_0x41dbce(0x19e)])return customErrorCompact('Cannot\x20Create\x20Node','You\x20have\x20exceeded\x20the\x20max\x20number\x20of\x20nodes\x20allowed.\x20('+_0x16c1dd[_0x41dbce(0x134)]+'/'+global[_0x41dbce(0x2bd)][_0x41dbce(0x102)]+')',0x1f4);let _0x47f533=![],_0x23f7e6=![],_0x52d765=![],_0x36bc91=![],_0x25c156=![],_0x261fc0=![],_0x5ac6c4;if(_0x2e7b19)try{_0x5ac6c4=await this[_0x41dbce(0x254)](_0x122f22,_0x41dbce(0x2bb),{},_0x2e7b19,![],_0x4d4a71);if(!_0x5ac6c4['error']){const _0x12ac24=_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x1eb)][0x0];_0x47f533=_0x12ac24;}else return customErrorCompact('Error\x20Creating\x20File\x20Node\x20for\x20CAD\x20Document\x20creation',_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x1c2)]+':\x20'+_0x5ac6c4['data'][_0x41dbce(0x268)],0x1f4,'createCADDocument',![],'',!![]);}catch(_0x48f189){return console[_0x41dbce(0x131)](_0x48f189),customErrorCompact(_0x41dbce(0xa6),_0x48f189[_0x41dbce(0x268)],0x1f4,'createCADDocument',![],'',!![]);}if(_0x11f590)try{_0x5ac6c4=await this['addNode'](_0x122f22,_0x41dbce(0x2bb),{},_0x11f590,![],_0x4d4a71);if(!_0x5ac6c4[_0x41dbce(0x131)]){const _0x2f7d99=_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x1eb)][0x0];_0x52d765=_0x2f7d99;}else return customErrorCompact('Error\x20Creating\x20Thumbnail\x20Node\x20for\x20CAD\x20Document\x20creation',_0x5ac6c4['data']['title']+':\x20'+_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x268)],0x1f4,_0x41dbce(0x1e7),![],'',!![]);}catch(_0x52719e){return customErrorCompact('Error\x20Creating\x20Thumbnail\x20Node\x20for\x20CAD\x20Document\x20creation',_0x52719e[_0x41dbce(0x268)],0x1f4,_0x41dbce(0x1e7),![],'',!![]);}try{_0x5ac6c4=await this[_0x41dbce(0x254)](_0x122f22,_0x41dbce(0x190),{..._0xd397d7,'_thumbnail':_0x52d765[_0x41dbce(0x15e)]},![],![],_0x4d4a71);if(!_0x5ac6c4[_0x41dbce(0x131)]){const _0x2e96a4=_0x5ac6c4['data'][_0x41dbce(0x1eb)][0x0];_0x36bc91=_0x2e96a4;}else return customErrorCompact('Error\x20Creating\x20CAD\x20Document',_0x5ac6c4[_0x41dbce(0x2a9)]['title']+':\x20'+_0x5ac6c4['data'][_0x41dbce(0x268)],0x1f4,'createCADDocument',![],'',!![]);}catch(_0x2f45f4){return customErrorCompact(_0x41dbce(0x1aa),_0x2f45f4['message'],0x1f4,_0x41dbce(0x1e7),![],'',!![]);}try{_0x5ac6c4=await this[_0x41dbce(0x2b0)](_0x122f22,_0x41dbce(0x190),_0x36bc91[_0x41dbce(0x15e)],_0x41dbce(0xb6),'file',_0x47f533[_0x41dbce(0x15e)],![],_0x4d4a71);if(!_0x5ac6c4['error'])_0x23f7e6=_0x5ac6c4['data'];else return customErrorCompact(_0x41dbce(0xfa),_0x5ac6c4[_0x41dbce(0x2a9)]['title']+':\x20'+_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x268)],0x1f4,_0x41dbce(0x1e7),![],'',!![]);if(_0x37b787){_0x5ac6c4=await this[_0x41dbce(0x254)](_0x122f22,'part',{..._0xd397d7,'_thumbnail':_0x52d765[_0x41dbce(0x15e)]},![],_0x4d4a71);if(!_0x5ac6c4['error']){const _0x2d709c=_0x5ac6c4[_0x41dbce(0x2a9)][_0x41dbce(0x1eb)][0x0];_0x25c156=_0x2d709c;}else return customErrorCompact(_0x41dbce(0x1de),_0x5ac6c4['data'][_0x41dbce(0x1c2)]+':\x20'+_0x5ac6c4['data'][_0x41dbce(0x268)],0x1f4,_0x41dbce(0x1e7),![],'',!![]);_0x5ac6c4=await this[_0x41dbce(0x2b0)](_0x122f22,_0x41dbce(0x224),_0x25c156[_0x41dbce(0x15e)],'partCadDoc',_0x41dbce(0x190),_0x36bc91[_0x41dbce(0x15e)],![],_0x4d4a71);if(!_0x5ac6c4[_0x41dbce(0x131)])_0x261fc0=_0x5ac6c4['data'];else return customErrorCompact('Error\x20Creating\x20Relationship\x20between\x20CAD\x20Document\x20and\x20cadFile',_0x5ac6c4[_0x41dbce(0x2a9)]['title']+':\x20'+_0x5ac6c4['data'][_0x41dbce(0x268)],0x1f4,_0x41dbce(0x1e7),![],'',!![]);}return customSuccess({'thumbnailNode':_0x52d765,'fileNode':_0x47f533,'cadDocument':_0x36bc91,'fileRelationship':_0x23f7e6,'part':_0x25c156});}catch(_0x2fd6e5){console['error']('TCL:\x20exports.createCADDocument-C\x20->\x20error',_0x2fd6e5);}},exports['createCADDocuments']=async(_0x3843b0,_0x322948)=>{const _0x15a507=_0x495b8d,_0x4c35db=await basics[_0x15a507(0x181)]();if(_0x4c35db['error'])return customErrorCompact(_0x15a507(0x10c),_0x4c35db['message'],0x1f4);if(!_0x4c35db[_0x15a507(0x19e)])return customErrorCompact(_0x15a507(0x10c),_0x15a507(0xbf)+_0x4c35db[_0x15a507(0x134)]+'/'+global[_0x15a507(0x2bd)][_0x15a507(0x102)]+')',0x1f4);const _0x4dbab7=_[_0x15a507(0x18a)](global[_0x15a507(0x1a8)][_0x15a507(0xba)],{'name':_0x15a507(0x190)});if(!_0x4dbab7)return customErrorCompact(_0x15a507(0x1b8),_0x15a507(0x14c),0x194);const _0x5bf2d7=_[_0x15a507(0x18a)](global[_0x15a507(0x1a8)][_0x15a507(0xba)],{'name':'file'});if(!_0x5bf2d7)return customErrorCompact(_0x15a507(0x1b8),'Nodetype\x20file\x20definition\x20not\x20found\x20in\x20datamodel',0x194);const _0x5b472a=0x5;let _0x4fee79=[];const _0x386a35=[];while(_0x322948[_0x15a507(0x1e5)]>_0x5b472a){_0x386a35[_0x15a507(0xf0)](_0x322948[_0x15a507(0x19a)](0x0,_0x5b472a));}_0x322948['length']&&_0x386a35['push'](_0x322948);const _0x546228=async()=>{const _0x81806f=_0x15a507;for(let _0x3fa3a7=0x0;_0x3fa3a7<_0x386a35['length'];_0x3fa3a7++){const _0x2e5798=_0x386a35[_0x3fa3a7][_0x81806f(0x139)](_0x248d4d=>this[_0x81806f(0x1e7)](_0x3843b0,_0x248d4d[_0x81806f(0x2bb)],_0x248d4d[_0x81806f(0x205)],_0x248d4d[_0x81806f(0xea)],_0x248d4d[_0x81806f(0x244)],![])),_0x356d91=await Promise['all'](_0x2e5798);_0x4fee79=[..._0x4fee79,..._0x356d91];}};return await _0x546228(),customSuccess(_0x4fee79);},exports[_0x495b8d(0x29b)]=async(_0x12fccd,_0x12581d)=>{const _0x55ed20=_0x495b8d,{baseURL:_0x3d5620,clientId:_0x542488,clientSecret:_0x53dbe5}=config[_0x55ed20(0xa2)][_0x55ed20(0x1fb)];if(!_0x542488||!_0x53dbe5||!_0x3d5620)return customErrorCompact('Cannot\x20Upload\x20CAD\x20File\x20to\x20CAD\x20Exchanger',_0x55ed20(0x1df),0x1f4);const _0x197358=_[_0x55ed20(0x18a)](global[_0x55ed20(0x1a8)][_0x55ed20(0xba)],{'name':_0x55ed20(0x190)});if(!_0x197358)return customErrorCompact('Cannot\x20Upload\x20CAD\x20File\x20to\x20CAD\x20Exchanger',_0x55ed20(0x14c),0x194);const _0x401a4f=_['find'](global[_0x55ed20(0x1a8)][_0x55ed20(0xba)],{'name':_0x55ed20(0x2bb)});if(!_0x401a4f)return customErrorCompact(_0x55ed20(0x260),_0x55ed20(0x247),0x194);const _0x237e5d=await cadExchanger[_0x55ed20(0x2a6)](_0x12581d);return _0x237e5d;},exports[_0x495b8d(0x23a)]=async(_0x435fe1,_0x33c02e)=>{const _0x124fe7=_0x495b8d,_0x21cd88=_[_0x124fe7(0x18a)](global[_0x124fe7(0x1a8)][_0x124fe7(0xba)],{'name':_0x124fe7(0x190)});if(!_0x21cd88)return customErrorCompact(_0x124fe7(0x260),_0x124fe7(0x14c),0x194);const _0x136a35=_[_0x124fe7(0x18a)](global[_0x124fe7(0x1a8)][_0x124fe7(0xba)],{'name':'file'});if(!_0x136a35)return customErrorCompact(_0x124fe7(0x260),_0x124fe7(0x247),0x194);const _0x50e89f=await cadExchanger[_0x124fe7(0x22d)](_0x33c02e);return _0x50e89f;},exports['getCADExchangerRevision']=async(_0x9bba11,_0x28ae8f)=>{const _0x3537fc=_0x495b8d,_0x89f536=_[_0x3537fc(0x18a)](global[_0x3537fc(0x1a8)][_0x3537fc(0xba)],{'name':_0x3537fc(0x190)});if(!_0x89f536)return customErrorCompact('Cannot\x20Get\x20CAD\x20Exchanger\x20Revision',_0x3537fc(0x14c),0x194);const _0x149324=_[_0x3537fc(0x18a)](global['datamodel'][_0x3537fc(0xba)],{'name':_0x3537fc(0x2bb)});if(!_0x149324)return customErrorCompact(_0x3537fc(0x234),'Nodetype\x20file\x20definition\x20not\x20found\x20in\x20datamodel',0x194);const _0x18e2c2=await cadExchanger[_0x3537fc(0x14a)](_0x28ae8f);return _0x18e2c2;},exports['getCadDocumentFlatList']=async(_0x22aba5,_0x4ae8c5)=>{const _0x40d029=_0x495b8d,_0x4b02d0=_[_0x40d029(0x18a)](global[_0x40d029(0x1a8)][_0x40d029(0xba)],{'name':_0x40d029(0x190)});if(!_0x4b02d0)return customErrorCompact(_0x40d029(0x234),_0x40d029(0x14c),0x194,_0x40d029(0x239));const _0x205983=_[_0x40d029(0x18a)](global[_0x40d029(0x1a8)][_0x40d029(0xba)],{'name':_0x40d029(0x2bb)});if(!_0x205983)return customErrorCompact(_0x40d029(0x234),_0x40d029(0x247),0x194,_0x40d029(0x239));const _0x5b70ed=await basics[_0x40d029(0x288)](_0x4b02d0[_0x40d029(0x25b)],_0x22aba5);if(!_0x5b70ed)return customErrorCompact(_0x40d029(0x234),'ðŸš«\x20you\x20have\x20no\x20rights\x20to\x20create\x20cadDocument\x20node',0x193,_0x40d029(0x239));const _0x2a52d6=await basics[_0x40d029(0x288)](_0x205983[_0x40d029(0x25b)],_0x22aba5);if(!_0x2a52d6)return customErrorCompact(_0x40d029(0x234),_0x40d029(0x1ae),0x193,_0x40d029(0x239));const _0x5c531f=_0x40d029(0x1fa),_0xb5a0d6=_0x40d029(0xb3)+recursiveDepth+_0x40d029(0x28f),_0x589bae=driver['session'](),_0x3d822e=_0x589bae[_0x40d029(0x18d)](),_0xd0e0ab=[_0x3d822e[_0x40d029(0xa8)](_0x5c531f,{'id':_0x4ae8c5})['catch'](_0x106835=>{const _0x3bd002=_0x40d029;return customErrorCompact(_0x3bd002(0xbd),_0x106835[_0x3bd002(0x268)],0x1f4,_0x3bd002(0x239));}),_0x3d822e[_0x40d029(0xa8)](_0xb5a0d6,{'id':_0x4ae8c5})[_0x40d029(0x204)](_0x247cc7=>{const _0x1e09cc=_0x40d029;return customErrorCompact(_0x1e09cc(0xbd),_0x247cc7[_0x1e09cc(0x268)],0x1f4,_0x1e09cc(0x239));})],_0x265c49=await Promise[_0x40d029(0x213)](_0xd0e0ab),_0x55ee99=_0x265c49[_0x40d029(0x18a)](_0xab4d13=>_0xab4d13[_0x40d029(0x131)]===!![]);if(_0x55ee99)return _0x55ee99;const _0x4d2326=[],_0xb240c5=_0x265c49[0x0][_0x40d029(0x1fe)];_0xb240c5[_0x40d029(0x1e5)]&&_0xb240c5['map'](_0x315946=>{const _0x197599=_0x40d029,_0x227486=_0x315946['get'](_0x197599(0x190))['properties'],_0x1ada0d=_0x315946[_0x197599(0x1b3)](_0x197599(0x251))['properties'];_0x4d2326[_0x197599(0xf0)]({'cadDocument':_0x227486,'nativeFile':_0x1ada0d});});const _0x34005d=_0x265c49[0x1]['records'];return _0x34005d[_0x40d029(0x1e5)]&&_0x34005d['map'](_0x3888ee=>{const _0x517508=_0x40d029,_0x211226=_0x3888ee['get'](_0x517508(0x251))[_0x517508(0xea)],_0x55c9e0=_0x3888ee['get'](_0x517508(0x190))[_0x517508(0xea)];_0x4d2326[_0x517508(0xf0)]({'cadDocument':_0x55c9e0,'nativeFile':_0x211226});}),await _0x3d822e[_0x40d029(0x158)](),customSuccess(_[_0x40d029(0x2a3)](_0x4d2326,_[_0x40d029(0x18e)]));},exports[_0x495b8d(0xbe)]=_0x6213e0=>cadExchanger[_0x495b8d(0xbe)](_0x6213e0),exports[_0x495b8d(0x100)]=async(_0x2c8731,_0x978c9e)=>{const _0x37c858=_0x495b8d,_0x1784ac=_[_0x37c858(0x18a)](global[_0x37c858(0x1a8)]['nodetypeDefinitions'],{'name':_0x37c858(0x2bb)});if(!_0x1784ac)return customErrorCompact(_0x37c858(0x26e),_0x37c858(0x247),0x194,'fileCheckInOutCheck');const _0x3c7782='\x0a\x20\x20\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})<-[]-(node)\x0a\x20\x20\x20\x20WHERE\x20node._lockState\x20=\x20'+!![]+_0x37c858(0xf8),_0x24c689=driver[_0x37c858(0x1b4)](),_0x2b5fa3=await _0x24c689['run'](_0x3c7782,{'fileId':_0x978c9e,'userId':_0x2c8731['_id']})[_0x37c858(0x204)](_0x330e97=>{const _0x264b7c=_0x37c858;return customErrorCompact(_0x264b7c(0xbd),_0x330e97[_0x264b7c(0x268)],0x1f4,'fileCheckInOutCheck');});_0x24c689['close']();if(_0x2b5fa3[_0x37c858(0x131)])return _0x2b5fa3;if(_0x2b5fa3[_0x37c858(0x1fe)][_0x37c858(0x1e5)]){const _0x1cf9ac={..._0x2b5fa3[_0x37c858(0x1fe)][0x0][_0x37c858(0x1b3)](_0x37c858(0x1eb))[_0x37c858(0xea)],'_type':_0x2b5fa3[_0x37c858(0x1fe)][0x0]['get']('node')['labels'][0x0]};return customErrorCompact(_0x37c858(0xbd),_0x37c858(0x241)+_0x1cf9ac['_type']+_0x37c858(0x1fd)+_0x1cf9ac[_0x37c858(0x15e)],0x1f4,_0x37c858(0x100));}return customSuccess(!![]);},exports['fileCheckIn']=async(_0x4bc23e,_0xbb6fba,_0x40c6f6)=>{const _0x478453=_0x495b8d,_0x54e3a9=driver[_0x478453(0x1b4)](),_0x473332=await this[_0x478453(0x100)](_0x4bc23e,_0xbb6fba),_0x45b091=_0x478453(0x144),_0x55179f=await _0x54e3a9[_0x478453(0xa8)](_0x45b091,{'fileId':_0xbb6fba})[_0x478453(0x204)](_0x100a26=>{const _0x4c68aa=_0x478453;return customErrorCompact('Cypher\x20Query\x20Error',_0x100a26[_0x4c68aa(0x268)],0x1f4);});let _0x7e0bfc=!![];if(!_0x55179f['records'][_0x478453(0x1e5)])_0x7e0bfc=![];let _0x5030f9;if(_0x473332['error'])return _0x473332;if(_0x7e0bfc){const _0x5b5622=_0x478453(0x145),_0x386283=await _0x54e3a9[_0x478453(0xa8)](_0x5b5622,{'fileId':_0xbb6fba})[_0x478453(0x204)](_0x2c6ee4=>{const _0xbeb6d1=_0x478453;return customErrorCompact(_0xbeb6d1(0xbd),_0x2c6ee4['message'],0x1f4);}),_0x4e0e73=_0x386283[_0x478453(0x1fe)][0x0][_0x478453(0x1b3)](_0x478453(0x1eb))[_0x478453(0xea)][_0x478453(0x15e)],_0x3ca7f2=_0x386283[_0x478453(0x1fe)][0x0]['get'](_0x478453(0x1eb))[_0x478453(0xd2)][0x0],_0x20a79b=_0x386283['records'][0x0][_0x478453(0x1b3)](_0x478453(0x1a6))[_0x478453(0x1ad)],_0x2250a9=_0x386283['records'][0x0][_0x478453(0x1b3)](_0x478453(0x1a6))[_0x478453(0xea)][_0x478453(0x284)],_0x1792b0=NODEU['v1'](),_0x16c9d9='\x0a\x20\x20\x20\x20MATCH\x0a\x20\x20\x20\x20\x20\x20(file:file\x20{\x20_id:\x20$fileId}),\x0a\x20\x20\x20\x20\x20\x20(node:'+_0x3ca7f2+'{_id:$nodeId}),\x0a\x20\x20\x20\x20\x20\x20(Ps:PermissionSet{name:\x27file\x27})\x0a\x20\x20\x20\x20CREATE\x0a\x20\x20\x20\x20\x20\x20(file)<-[rev:revises\x20{\x20_type:\x20\x27revises\x27\x20}]-(newFile:file)<-[:'+_0x20a79b+_0x478453(0x1e3)+_0x2250a9+_0x478453(0x135)+NODEU['v1']()+'\x27,\x20role:\x27permissionSet\x27\x20}]-(Ps)\x0a\x20\x20\x20\x20SET\x0a\x20\x20\x20\x20\x20\x20newFile\x20=\x20file\x20{.*,\x20_id:\x27'+_0x1792b0+_0x478453(0x1c0)+_0x40c6f6['url']+_0x478453(0x25d)+_0x40c6f6[_0x478453(0xb8)]+'\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.mimetype\x20=\x20\x22'+_0x40c6f6[_0x478453(0x212)]+_0x478453(0x2a4)+_0x40c6f6['filename']+_0x478453(0x13c)+_0x40c6f6[_0x478453(0x1e2)]+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.source\x20=\x20\x22'+_0x40c6f6[_0x478453(0x21d)]+'\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20newFile.sourceKey\x20=\x20\x22'+_0x40c6f6[_0x478453(0x22e)]+_0x478453(0xe4)+Date[_0x478453(0x275)]()+_0x478453(0x116),_0x4770c5=await _0x54e3a9['run'](_0x16c9d9,{'fileId':_0xbb6fba,'nodeId':_0x4e0e73})[_0x478453(0x204)](_0x43806d=>{const _0x5c6dbb=_0x478453;return customErrorCompact(_0x5c6dbb(0xbd),_0x43806d['message'],0x1f4);});_0x54e3a9[_0x478453(0x15b)]();if(_0x4770c5['error'])return _0x4770c5;if(!_0x4770c5[_0x478453(0x1fe)][_0x478453(0x1e5)])return customErrorCompact('No\x20parent\x20node\x20found\x20for\x20file',_0x478453(0x250),0x1f4,'fileCheckIn',![],!![]);_0x5030f9=_0x4770c5[_0x478453(0x1fe)][0x0][_0x478453(0x1b3)](_0x478453(0x297)),io[_0x478453(0x1ba)](_0x478453(0x15a),{'file':_0x5030f9,'user':_0x4bc23e});}else{const _0xf9eec6=_0x478453(0x13a)+_0x40c6f6[_0x478453(0x261)]+_0x478453(0x16b)+_0x40c6f6[_0x478453(0xb8)]+'\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20file.mimetype\x20=\x20\x22'+_0x40c6f6[_0x478453(0x212)]+_0x478453(0x233)+_0x40c6f6[_0x478453(0x20e)]+_0x478453(0x10d)+_0x40c6f6[_0x478453(0x1e2)]+_0x478453(0x2ba)+_0x40c6f6['source']+_0x478453(0x27a)+_0x40c6f6['sourceKey']+_0x478453(0x253)+Date[_0x478453(0x275)]()+_0x478453(0x12c),_0x4b2202=await _0x54e3a9['run'](_0xf9eec6,{'fileId':_0xbb6fba})['catch'](_0x1ed15f=>{const _0x2d402e=_0x478453;return customErrorCompact(_0x2d402e(0xbd),_0x1ed15f[_0x2d402e(0x268)],0x1f4);});_0x54e3a9[_0x478453(0x15b)]();if(_0x4b2202[_0x478453(0x131)])return _0x4b2202;if(!_0x4b2202[_0x478453(0x1fe)][_0x478453(0x1e5)])return customErrorCompact('No\x20parent\x20node\x20found\x20for\x20file',_0x478453(0x250),0x1f4,'fileCheckIn',![],!![]);_0x5030f9=_0x4b2202[_0x478453(0x1fe)][0x0]['get']('file'),io[_0x478453(0x1ba)](_0x478453(0x15a),{'file':_0x5030f9,'user':_0x4bc23e});}return customSuccess({..._0x5030f9[_0x478453(0xea)],'_type':_0x478453(0x2bb)});},exports[_0x495b8d(0x265)]=async(_0x41d2e2,_0x545537)=>{const _0x3454ba=_0x495b8d,_0x250a6f=driver['session'](),_0x5cb587=await this[_0x3454ba(0x100)](_0x41d2e2,_0x545537);if(_0x5cb587[_0x3454ba(0x131)])return _0x5cb587;const _0x8e114b='\x0a\x20\x20\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})\x0a\x20\x20\x20\x20SET\x20file._checkedOut\x20=\x20'+!![]+_0x3454ba(0xde)+_0x41d2e2['_id']+_0x3454ba(0x225)+_0x41d2e2[_0x3454ba(0x25b)]+_0x3454ba(0x194)+Date[_0x3454ba(0x275)]()+'\x0a\x20\x20\x20\x20RETURN\x20file',_0x555ddc=await _0x250a6f[_0x3454ba(0xa8)](_0x8e114b,{'fileId':_0x545537})[_0x3454ba(0x204)](_0x440235=>{const _0x3b4561=_0x3454ba;return customErrorCompact(_0x3b4561(0xbd),_0x440235['message'],0x1f4);});_0x250a6f[_0x3454ba(0x15b)]();if(_0x555ddc[_0x3454ba(0x131)])return _0x555ddc;if(!_0x555ddc['records'][_0x3454ba(0x1e5)])return customErrorCompact(_0x3454ba(0xbc),_0x3454ba(0x250),0x1f4,_0x3454ba(0x229),![],!![]);const _0x30938d=_0x555ddc[_0x3454ba(0x1fe)][0x0][_0x3454ba(0x1b3)](_0x3454ba(0x2bb));return customSuccess({..._0x30938d[_0x3454ba(0xea)],'_type':_0x3454ba(0x2bb)});},exports[_0x495b8d(0x191)]=async(_0x259bf5,_0x445fd9)=>{const _0x3f4116=_0x495b8d,_0x28c66a=driver['session'](),_0x2d3543='\x0a\x20\x20\x20\x20MATCH\x20(file:file\x20{\x20_id:\x20$fileId})\x0a\x20\x20\x20\x20WHERE\x20file._checkedOut\x20AND\x20file._checkedOutBy\x20=\x20$userId\x0a\x20\x20\x20\x20REMOVE\x20file._checkedOut,\x20file._checkedOutBy,\x20file._checkedOutByName,\x20file._checkedOutOn\x0a\x20\x20\x20\x20RETURN\x20file',_0x44503c=await _0x28c66a[_0x3f4116(0xa8)](_0x2d3543,{'fileId':_0x445fd9,'userId':_0x259bf5['_id']})[_0x3f4116(0x204)](_0x41e2ed=>{const _0x497400=_0x3f4116;return customErrorCompact(_0x497400(0xbd),_0x41e2ed['message'],0x1f4,_0x497400(0x191),!![]);});_0x28c66a['close']();if(_0x44503c[_0x3f4116(0x131)])return _0x44503c;if(!_0x44503c[_0x3f4116(0x1fe)]['length'])return customErrorCompact(_0x3f4116(0x185),'Looks\x20like\x20file\x20was\x20not\x20checkedOut\x20or\x20not\x20checkedOut\x20by\x20you',0x1f4);const _0x20140b=_0x44503c[_0x3f4116(0x1fe)][0x0][_0x3f4116(0x1b3)]('file');return customSuccess({..._0x20140b[_0x3f4116(0xea)],'_type':'file'});};
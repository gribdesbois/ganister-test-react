function _0x229a(){const _0x339699=['error','_history','3420109gGvQZT','171SVtgkK','1305156kiqXyi','datamodel','JWT_SECRET','null','expirationDate','../queries/global','moment','labels[0]','setTime','_promotions','locked','elements','get','_id','_type','user','relationship','_lockedBy','join','rootName','forEach','_lockState','_fields','checkLicenceNodes','validLicence','groupBy','50xTRraK','uuid','GanisterAPI','message','linkName','push','accessRole','4568odYLfB','MATCH\x20(n)\x20RETURN\x20{\x20count:\x20count(n)\x20}\x20as\x20count','run','_rel','records','10mwdPxN','password','properties.','name','type','nodes','findIndex','maidenName','1266516zamtQl','map','9084mVBZat','2053997PgyyHY','signToken','nodetypeDefinitions','Nodes','16077FUofDd','JWT_EXPIRATION','diff','separator','getPermissionSetAccess','value','buildMaidenName','close','_labelRef','checkUserCreationRight','ganister','session','role','days','formatDiverseNeoNode','35idIbOU','properties','getTime','find','properties._id','keys'];_0x229a=function(){return _0x339699;};return _0x229a();}const _0xc7eb42=_0x3b89;(function(_0x464a07,_0x2608ed){const _0x1dbb68=_0x3b89,_0x286f4e=_0x464a07();while(!![]){try{const _0x2591bb=-parseInt(_0x1dbb68(0xe5))/0x1*(-parseInt(_0x1dbb68(0xd6))/0x2)+parseInt(_0x1dbb68(0xde))/0x3+parseInt(_0x1dbb68(0xfe))/0x4+-parseInt(_0x1dbb68(0xf4))/0x5*(parseInt(_0x1dbb68(0xe0))/0x6)+parseInt(_0x1dbb68(0xfc))/0x7+-parseInt(_0x1dbb68(0xd1))/0x8*(parseInt(_0x1dbb68(0xfd))/0x9)+-parseInt(_0x1dbb68(0xca))/0xa*(parseInt(_0x1dbb68(0xe1))/0xb);if(_0x2591bb===_0x2608ed)break;else _0x286f4e['push'](_0x286f4e['shift']());}catch(_0x18087e){_0x286f4e['push'](_0x286f4e['shift']());}}}(_0x229a,0x5876f));function _0x3b89(_0x54009f,_0x169fb5){const _0x229ad8=_0x229a();return _0x3b89=function(_0x3b8920,_0x418876){_0x3b8920=_0x3b8920-0xb5;let _0x2c685b=_0x229ad8[_0x3b8920];return _0x2c685b;},_0x3b89(_0x54009f,_0x169fb5);}const _=require('lodash'),NODEU=require(_0xc7eb42(0xcb)),moment=require(_0xc7eb42(0xb6)),JWT=require('jsonwebtoken'),config=require('../../config/config'),globalQueries=require(_0xc7eb42(0xb5)),driver=config['db'];exports[_0xc7eb42(0xe2)]=_0x38eb9c=>{const _0xdc45df=_0xc7eb42;return JWT['sign']({'iss':_0xdc45df(0xcc),'sub':_0x38eb9c[_0xdc45df(0xbd)],'iat':new Date()[_0xdc45df(0xf6)](),'exp':new Date()[_0xdc45df(0xb8)](new Date()[_0xdc45df(0xf6)]()+config[_0xdc45df(0xe6)]),..._0x38eb9c[_0xdc45df(0xf5)]},config[_0xdc45df(0x100)]);},exports[_0xc7eb42(0xeb)]=(_0x193b84,_0x4328b7)=>{const _0x19e02e=_0xc7eb42;let _0x451b17='';if(_0x4328b7['maidenName']&&_0x4328b7['maidenName'][_0x19e02e(0xbb)]){const _0x1104d1=[];_0x4328b7[_0x19e02e(0xdd)][_0x19e02e(0xbb)][_0x19e02e(0xc4)](_0x35ad57=>{const _0x3d5632=_0x19e02e;_0x193b84[_0x3d5632(0xf5)]?_0x1104d1[_0x3d5632(0xcf)](_[_0x3d5632(0xbc)](_0x193b84[_0x3d5632(0xf5)],_0x35ad57,_0x3d5632(0x101))):_0x1104d1['push'](_[_0x3d5632(0xbc)](_0x193b84,_0x35ad57,_0x3d5632(0x101)));}),_0x451b17=_0x1104d1[_0x19e02e(0xc2)](_0x4328b7[_0x19e02e(0xdd)]['separator']);}else _0x451b17=_0x193b84[_0x19e02e(0xbd)];return _0x451b17;},exports['getNodePropsInfo']=(_0x170335,_0x510e9f,_0x3744d9)=>{const _0x42e884=_0xc7eb42,_0x1a6a6e=global[_0x42e884(0xff)][_0x42e884(0xe3)][_0x42e884(0xf7)](_0x4a96fa=>{const _0x43e1fd=_0x42e884;return _0x4a96fa['id']===_0x510e9f[_0x43e1fd(0xc0)];});if(!_0x1a6a6e)return{};const [_0xb353cc]=_0x170335['labels'],_0x2b6cf2=global[_0x42e884(0xff)][_0x42e884(0xe3)][_0x42e884(0xf7)](_0x1ca1d4=>{const _0x52e2fa=_0x42e884;return _0x1ca1d4[_0x52e2fa(0xd9)]===_0xb353cc;});if(!_0x2b6cf2)return{};const _0x65274d=this['buildMaidenName'](_0x170335,_0x2b6cf2),_0x384213={'_id':_0x170335[_0x42e884(0xf5)][_0x42e884(0xbd)],'_type':_0xb353cc,'properties':{..._0x170335['properties'],'link':_0x1a6a6e[_0x42e884(0xce)],'label':_0x65274d,'_maidenName':_0x65274d},'link':_0x1a6a6e[_0x42e884(0xce)],'label':_0x65274d};if(_0x3744d9)_0x384213['relationshipId']=_0x3744d9[_0x42e884(0xf5)][_0x42e884(0xbd)];return _0x384213;},exports[_0xc7eb42(0xf3)]=(_0x35ed29,_0x20f4d2,_0x4113c7)=>{const _0x3155ec=_0xc7eb42;let _0x47e85f=_0x35ed29[_0x3155ec(0xdf)](_0x521e09=>{const _0x5e89ef=_0x3155ec,_0x318c1a=_[_0x5e89ef(0xf7)](global[_0x5e89ef(0xff)][_0x5e89ef(0xe3)],{'name':_[_0x5e89ef(0xbc)](_0x521e09['get'](_0x5e89ef(0xe4)),_0x5e89ef(0xb7),_0x5e89ef(0x101))}),_0x5f3ef6={};_0x5f3ef6['_id']=_['get'](_0x521e09[_0x5e89ef(0xbc)](_0x5e89ef(0xe4)),_0x5e89ef(0xf8),'null'),_0x5f3ef6['_type']=_[_0x5e89ef(0xbc)](_0x521e09[_0x5e89ef(0xbc)]('Nodes'),_0x5e89ef(0xb7),_0x5e89ef(0x101)),_0x5f3ef6[_0x5e89ef(0xf5)]=_['get'](_0x521e09[_0x5e89ef(0xbc)]('Nodes'),_0x5e89ef(0xf5),_0x5e89ef(0x101)),_0x5f3ef6['roles']=_0x521e09[_0x5e89ef(0xbc)](_0x5e89ef(0xd0));_0x5f3ef6[_0x5e89ef(0xbe)]===_0x5e89ef(0xbf)&&(delete _0x5f3ef6['properties'][_0x5e89ef(0xd7)],delete _0x5f3ef6['properties']['changePasswordToken']);if(_0x5f3ef6[_0x5e89ef(0xf5)]['_lockState']!==!![])_0x5f3ef6[_0x5e89ef(0xba)]=0x0;else _0x5f3ef6[_0x5e89ef(0xf5)][_0x5e89ef(0xc5)]===!![]&&_0x5f3ef6[_0x5e89ef(0xf5)][_0x5e89ef(0xc1)]===_0x20f4d2?_0x5f3ef6['locked']=0x1:_0x5f3ef6['locked']=0x2;if(_0x318c1a[_0x5e89ef(0xdd)]){if(_0x318c1a[_0x5e89ef(0xdd)]['elements']){const _0x4221dd=[];_0x318c1a[_0x5e89ef(0xdd)][_0x5e89ef(0xbb)][_0x5e89ef(0xc4)](_0x5111a5=>{const _0x44ae0f=_0x5e89ef;_0x4221dd[_0x44ae0f(0xcf)](_[_0x44ae0f(0xbc)](_0x521e09[_0x44ae0f(0xbc)](_0x44ae0f(0xe4)),_0x44ae0f(0xd8)+_0x5111a5,_0x44ae0f(0x101)));}),_0x5f3ef6[_0x5e89ef(0xed)]=_0x4221dd['join'](_0x318c1a[_0x5e89ef(0xdd)][_0x5e89ef(0xe8)]);}}else _0x5f3ef6[_0x5e89ef(0xed)]=_0x5f3ef6['_id'];return delete _0x5f3ef6[_0x5e89ef(0xfb)],delete _0x5f3ef6[_0x5e89ef(0xf5)][_0x5e89ef(0xfb)],delete _0x5f3ef6[_0x5e89ef(0xf5)][_0x5e89ef(0xb9)],_0x4113c7[_0x5e89ef(0xdf)](_0x3fece0=>{const _0x2f9dcf=_0x5e89ef,_0x22a30d=_0x521e09[_0x2f9dcf(0xf9)][_0x2f9dcf(0xdc)](_0x4be737=>_0x4be737==='t_'+_0x3fece0[_0x2f9dcf(0xd9)]);if(!_0x3fece0['rootName'])_0x3fece0[_0x2f9dcf(0xc3)]=_0x3fece0[_0x2f9dcf(0xd9)];if(_0x22a30d>-0x1&&_0x521e09[_0x2f9dcf(0xc6)][_0x22a30d]){_0x5f3ef6['properties'][_0x3fece0[_0x2f9dcf(0xc3)]]={};const _0x2dd5de=_0x521e09['_fields'][_0x22a30d],_0x1adc65=_[_0x2f9dcf(0xbc)](_0x2dd5de,_0x2f9dcf(0xf5),_0x2f9dcf(0x101));_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0[_0x2f9dcf(0xc3)]]['_id']=_0x1adc65[_0x2f9dcf(0xbd)],_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0[_0x2f9dcf(0xc3)]][_0x2f9dcf(0xbe)]=_['get'](_0x2dd5de,_0x2f9dcf(0xb7),_0x2f9dcf(0x101)),_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0['rootName']][_0x2f9dcf(0xda)]=_['get'](_0x2dd5de,_0x2f9dcf(0xb7),_0x2f9dcf(0x101)),_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0['rootName']][_0x2f9dcf(0xf5)]=_0x1adc65;const _0xac9061=_[_0x2f9dcf(0xf7)](global['datamodel'][_0x2f9dcf(0xe3)],{'name':_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0[_0x2f9dcf(0xc3)]][_0x2f9dcf(0xbe)]});if(_0xac9061&&_0xac9061['maidenName']){if(_0xac9061['maidenName'][_0x2f9dcf(0xbb)]){const _0x54f9a9=[];_0xac9061['maidenName'][_0x2f9dcf(0xbb)]['forEach'](_0x5366c3=>{const _0x29b398=_0x2f9dcf;_0x54f9a9[_0x29b398(0xcf)](_[_0x29b398(0xbc)](_0x5f3ef6['properties'][_0x3fece0['rootName']],_0x29b398(0xd8)+_0x5366c3,_0x29b398(0x101)));}),_0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0[_0x2f9dcf(0xc3)]][_0x2f9dcf(0xed)]=_0x54f9a9[_0x2f9dcf(0xc2)](_0xac9061[_0x2f9dcf(0xdd)]['separator']);}}else _0x5f3ef6[_0x2f9dcf(0xf5)][_0x3fece0[_0x2f9dcf(0xc3)]][_0x2f9dcf(0xed)]=_0x5f3ef6[_0x2f9dcf(0xbd)];_0x5f3ef6['properties'][_0x3fece0[_0x2f9dcf(0xc3)]]['properties']={};}}),_0x5f3ef6[_0x5e89ef(0xd4)]=_[_0x5e89ef(0xbc)](_0x521e09[_0x5e89ef(0xbc)]('rel'),_0x5e89ef(0xda),_0x5e89ef(0x101)),_0x5f3ef6;});return _0x47e85f=_(_0x47e85f)[_0x3155ec(0xc9)](_0x3155ec(0xbd))[_0x3155ec(0xdf)](_0x1645f7=>({'_id':_0x1645f7[0x0]['_id'],'_type':_0x1645f7[0x0][_0x3155ec(0xbe)],'_rel':_0x1645f7[0x0][_0x3155ec(0xd4)],'_labelRef':_0x1645f7[0x0][_0x3155ec(0xed)],'properties':_0x1645f7[0x0][_0x3155ec(0xf5)],'locked':_0x1645f7[0x0]['locked'],'access':_0x1645f7[_0x3155ec(0xdf)](_0x17cf18=>_0x17cf18['roles']['map'](_0x48321c=>({'type':_0x48321c[_0x3155ec(0xda)],'role':_0x48321c['properties'][_0x3155ec(0xf1)]})))}))[_0x3155ec(0xea)](),_0x47e85f;},exports[_0xc7eb42(0xee)]=async(_0x4105e5,_0x3d0954)=>{const _0x53ab56=_0xc7eb42;let _0x3a81ef=![];const _0x29a195=driver[_0x53ab56(0xf0)](),{query:_0x349303,params:_0x5827af}=globalQueries[_0x53ab56(0xe9)](_0x4105e5,_0x3d0954),_0x21e38a=await _0x29a195[_0x53ab56(0xd3)](_0x349303,_0x5827af);return _0x29a195[_0x53ab56(0xec)](),_0x21e38a[_0x53ab56(0xd5)][_0x53ab56(0xc4)](_0x430fef=>{const _0x462ad1=_0x53ab56,[_0x3e5dc4]=_0x430fef['_fields'],{canCreate:canCreate=![]}=_0x3e5dc4[_0x462ad1(0xf5)];_0x3a81ef=canCreate||_0x3a81ef;}),_0x3a81ef;},exports[_0xc7eb42(0xc7)]=async()=>{const _0x3ca0e3=_0xc7eb42;if(global[_0x3ca0e3(0xef)][_0x3ca0e3(0xc8)]&&global[_0x3ca0e3(0xef)][_0x3ca0e3(0x102)]){const _0x190c5b=moment(global[_0x3ca0e3(0xef)][_0x3ca0e3(0x102)]),_0x5478bd=moment()[_0x3ca0e3(0xe7)](_0x190c5b,_0x3ca0e3(0xf2));_0x5478bd>0x0&&(global[_0x3ca0e3(0xef)]={'nodes':0xc350,'expirationDate':undefined,'validLicence':![],'expiredLicence':!![]});}const _0x38a9f1=_0x3ca0e3(0xd2),_0x481baf=driver[_0x3ca0e3(0xf0)](),_0x4528bc=await _0x481baf['run'](_0x38a9f1)['catch'](_0x381310=>({'error':!![],'message':_0x381310[_0x3ca0e3(0xcd)]}));if(_0x4528bc[_0x3ca0e3(0xfa)])return _0x4528bc;const {count:_0x536435}=_0x4528bc[_0x3ca0e3(0xd5)][0x0][_0x3ca0e3(0xc6)][0x0],_0xbfd678=global[_0x3ca0e3(0xef)][_0x3ca0e3(0xdb)]>_0x536435;return{'count':_0x536435,'canCreate':_0xbfd678};};
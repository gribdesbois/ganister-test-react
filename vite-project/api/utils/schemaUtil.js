const _0x2901ac=_0x1d0d;(function(_0x24bf1c,_0x2e99fb){const _0xcc32f7=_0x1d0d,_0x89322a=_0x24bf1c();while(!![]){try{const _0x50df3e=-parseInt(_0xcc32f7(0xe7))/0x1+parseInt(_0xcc32f7(0xc2))/0x2*(-parseInt(_0xcc32f7(0xf4))/0x3)+parseInt(_0xcc32f7(0xc4))/0x4*(parseInt(_0xcc32f7(0xd8))/0x5)+-parseInt(_0xcc32f7(0xf9))/0x6+-parseInt(_0xcc32f7(0xd5))/0x7+parseInt(_0xcc32f7(0xe4))/0x8+parseInt(_0xcc32f7(0xca))/0x9;if(_0x50df3e===_0x2e99fb)break;else _0x89322a['push'](_0x89322a['shift']());}catch(_0x212dc3){_0x89322a['push'](_0x89322a['shift']());}}}(_0x52d3,0x97225));const fs=require('fs'),NODEU=require(_0x2901ac(0xe2)),Ajv=require(_0x2901ac(0xc3))[_0x2901ac(0xd7)],{ganisterError}=require(_0x2901ac(0x10b)),{capitalize}=require(_0x2901ac(0x10a)),listsOfValues=require(_0x2901ac(0xbb)),ajvOptions={'allErrors':!![],'useDefaults':!![],'strict':_0x2901ac(0xf2)},ajv=new Ajv(ajvOptions),getSchema=_0x4389c8=>{const _0x41e395=_0x2901ac,_0x47d640=fs[_0x41e395(0xba)](_0x41e395(0xdd)+_0x4389c8+_0x41e395(0xe0),_0x41e395(0xc5)),_0x2d3c4d=JSON[_0x41e395(0xfa)](_0x47d640),{properties:_0x3dc378}=_0x2d3c4d['properties'][_0x41e395(0xdc)];return Object['values'](_0x3dc378)[_0x41e395(0xfc)](_0x33687f=>{const _0x5704ad=_0x41e395;_0x33687f[_0x5704ad(0xd7)]==='$timestamp'&&(_0x33687f[_0x5704ad(0xd7)]=Date[_0x5704ad(0xe3)]());}),_0x2d3c4d;},schemaError=(_0x14188a,_0x20a40d)=>{const _0xecbb5c=_0x2901ac,_0x42e673=_0x14188a['errors'][_0xecbb5c(0xcf)](_0x38dd99=>{const _0x2a9fb2=_0xecbb5c,_0x1731e9=_0x38dd99[_0x2a9fb2(0xb9)]['split']('/')[_0x2a9fb2(0xd4)]('.'),{allowedValue:_0x5e923b,allowedValues:_0x59465e}=_0x38dd99[_0x2a9fb2(0xf6)],_0x37b0cd=_0x5e923b?'\x27'+_0x5e923b+'\x27':'',_0x38e3a9=_0x59465e?JSON[_0x2a9fb2(0xfb)](_0x59465e):'';return'-\x20'+_0x20a40d[_0x2a9fb2(0x101)]+_0x1731e9+'\x20'+_0x38dd99[_0x2a9fb2(0xbe)]+'\x20'+(_0x37b0cd||_0x38e3a9);}),{elementType:_0xf028d8}=_0x20a40d[_0xecbb5c(0x106)],_0x24c28a=_0x42e673['join']('\x0a'),_0x29b2a2=capitalize(_0xf028d8)+'\x20not\x20valid:\x0a\x09'+_0x24c28a;throw ganisterError(_0x29b2a2);},setPropertyTypeAndDefaultValue=(_0x4df651,_0x2b0b75)=>{const _0x48d267=_0x2901ac,{elementType:_0x5c41f5,versionnable:_0x5645b8,versioningRule:_0x121add,lifecycle:_0x40125a,instanciations:instanciations=[]}=_0x4df651;let {type:_0x46f3a9}=_0x2b0b75;const _0x4292f7={},_0x4de863=listsOfValues[_0x48d267(0xfe)](_0xb4a07f=>{const _0x3bf04f=_0x48d267,{listSource:_0xbcddc0}=_0x2b0b75;return _0xbcddc0&&_0xb4a07f[_0x3bf04f(0x100)]===_0xbcddc0;});switch(_0x2b0b75[_0x48d267(0xc7)]){case _0x48d267(0xbc):case _0x48d267(0xd9):const _0x471fe4=[_0x48d267(0x105),_0x48d267(0xd3),_0x48d267(0xe9),_0x48d267(0xfd)][_0x48d267(0xef)](_0x2b0b75['name']);_0x471fe4&&(_0x4292f7[_0x48d267(0xd7)]='$timestamp');_0x46f3a9=_0x48d267(0x103);break;case _0x48d267(0x10d):case _0x48d267(0xe1):_0x46f3a9=_0x48d267(0x103);break;case _0x48d267(0xe6):case'2-states\x20Boolean':case _0x48d267(0xcd):_0x46f3a9=_0x48d267(0xe6);break;case _0x48d267(0xf1):_0x46f3a9=_0x48d267(0xc6),_0x4292f7[_0x48d267(0xd7)]='[]';break;case'tags':_0x46f3a9=_0x48d267(0xcb),_0x4292f7[_0x48d267(0xec)]={'type':_0x48d267(0xc6)};break;case _0x48d267(0xff):_0x46f3a9=_0x48d267(0xf3);break;case _0x48d267(0xeb):{_0x46f3a9=_0x48d267(0xc6);if(_0x4de863){const _0x31b539=_0x4de863['items']['map'](_0x5eabdf=>_0x5eabdf['value']);_0x4292f7[_0x48d267(0x107)]=_0x31b539;}break;}case _0x48d267(0x104):_0x46f3a9=_0x48d267(0xcb);let _0x2ceaf7=[];if(_0x2b0b75['name']===_0x48d267(0x10c))_0x2ceaf7=instanciations[_0x48d267(0xcf)](_0x53cf01=>_0x53cf01['id']),_0x4292f7[_0x48d267(0xd7)]=[];else _0x4de863&&(_0x2ceaf7=_0x4de863['items'][_0x48d267(0xcf)](_0x18ab32=>_0x18ab32[_0x48d267(0xd6)]));_0x2ceaf7['length']&&(_0x4292f7['items']={'enum':_0x2ceaf7},_0x4292f7['maxItems']=_0x2ceaf7[_0x48d267(0xd2)]);break;default:_0x46f3a9=_0x48d267(0xc6);break;}_0x4292f7[_0x48d267(0xc7)]=_0x46f3a9;if(_0x5c41f5===_0x48d267(0xff)&&_0x40125a){const _0x46287d=_0x40125a[_0x48d267(0xf5)][_0x48d267(0xfe)](_0x1e6272=>_0x1e6272[_0x48d267(0x109)]);switch(_0x2b0b75['name']){case _0x48d267(0xc8):_0x4292f7['default']=![];break;case _0x48d267(0xcc):if(_0x40125a[_0x48d267(0xf5)]['length']){const _0x93a525=_0x40125a[_0x48d267(0xf5)][_0x48d267(0xcf)](_0x51c605=>_0x51c605[_0x48d267(0x100)]);_0x4292f7[_0x48d267(0x107)]=_0x93a525,_0x4292f7['default']=_0x46287d?.[_0x48d267(0x100)];}break;case _0x48d267(0x108):_0x4292f7[_0x48d267(0xd7)]=_0x46287d?.[_0x48d267(0xc1)]||![];break;case'_version':if(_0x5645b8&&_0x121add){let _0x3f6dd0='';const _0x1e96c6=Object[_0x48d267(0xe8)](_0x121add)[_0x48d267(0xce)](_0x305de5=>_0x305de5);_0x1e96c6[_0x48d267(0xfc)]((_0x7243ca,_0x4a943e)=>{const _0x4f889a=_0x48d267;_0x3f6dd0=_0x7243ca&&_0x4a943e?_0x3f6dd0[_0x4f889a(0xc9)]('.','0'):'1';}),_0x4292f7[_0x48d267(0xd7)]=_0x3f6dd0;}break;default:break;}}return(_0x2b0b75[_0x48d267(0xd7)]||_0x2b0b75['default']===![])&&(_0x4292f7[_0x48d267(0xd7)]??=_0x2b0b75[_0x48d267(0xd7)]),_0x4292f7;},setSourceAndTargetSchemas=(_0x7cff66,_0x1744e0,_0x1542e)=>{const _0xcf6abf=_0x2901ac,{directions:_0x3e7017}=_0x7cff66,_0x221e04=_0x3e7017[_0xcf6abf(0xdb)]((_0x155981,_0x2397b0)=>{const _0x3cdadf=_0xcf6abf,_0x4d0be3=_0x1744e0[_0x3cdadf(0xf7)]['find'](_0x11ff2e=>_0x11ff2e['id']===_0x2397b0[_0x3cdadf(0xed)]);if(_0x4d0be3){const _0x3a3a4b=_0x155981[_0x3cdadf(0xfe)](_0x17275f=>_0x17275f===_0x4d0be3['name']);if(!_0x3a3a4b)_0x155981[_0x3cdadf(0xb8)](_0x4d0be3[_0x3cdadf(0x100)]);}return _0x155981;},[]),_0xf9648e=_0x3e7017[_0xcf6abf(0xdb)]((_0x489261,_0x3b7695)=>{const _0x2733be=_0xcf6abf,_0x56de08=_0x1744e0[_0x2733be(0xf7)][_0x2733be(0xfe)](_0x4adcca=>_0x4adcca['id']===_0x3b7695[_0x2733be(0xe5)]);if(_0x56de08){const _0x2230b0=_0x489261[_0x2733be(0xfe)](_0x2a5071=>_0x2a5071===_0x56de08[_0x2733be(0x100)]);if(!_0x2230b0)_0x489261[_0x2733be(0xb8)](_0x56de08[_0x2733be(0x100)]);}return _0x489261;},[]);_0x1542e[_0xcf6abf(0xdc)]['source']={'type':_0xcf6abf(0xf3),'properties':{'_type':{'type':'string','enum':_0x221e04},'_id':{'type':_0xcf6abf(0xc6)}}},_0x1542e[_0xcf6abf(0xdc)][_0xcf6abf(0xe5)]={'type':'object','properties':{'_type':{'type':'string','enum':_0xf9648e},'_id':{'type':'string'}}},_0x1542e[_0xcf6abf(0xbd)][_0xcf6abf(0xb8)](_0xcf6abf(0xed),_0xcf6abf(0xe5));};function _0x1d0d(_0x285e43,_0x42349f){const _0x52d3a4=_0x52d3();return _0x1d0d=function(_0x1d0df7,_0x10124d){_0x1d0df7=_0x1d0df7-0xb8;let _0x438658=_0x52d3a4[_0x1d0df7];return _0x438658;},_0x1d0d(_0x285e43,_0x42349f);}function _0x52d3(){const _0x237637=['find','node','name','_type','mkdirSync','number','multiselect','_createdOn','datamodel','enum','_lockable','start','../helpers','./errors','_serialized','integer','push','instancePath','readFileSync','../models/dm/listOfValues.json','date','required','message','nullable','relationship','lockable','90SnEzoZ','ajv','4PRNMwc','utf-8','string','type','_lockState','concat','12634218hfDMxs','array','_state','3-states\x20Boolean','filter','map','elementType','writeFileSync','length','_versionedOn','join','8308594QRHClE','value','default','6021595vTeSEA','dateTime','_id','reduce','properties','./api/models/schemas/','mandatory','exports','.json','double','uuid','now','5712360tFTIwt','target','boolean','162723gNEjqm','values','_modifiedOn','compile','select','items','source','./api/models/schemas','includes','utf8','json','log','object','19587tALLEC','states','params','nodetypeDefinitions','existsSync','6357906lQpsDG','parse','stringify','forEach','_effectiveOn'];_0x52d3=function(){return _0x237637;};return _0x52d3();}module[_0x2901ac(0xdf)]={'generateNodetypeSchemas':_0x11b854=>{const _0x369b46=_0x2901ac,_0x123697=_0x369b46(0xee);!fs[_0x369b46(0xf8)](_0x123697)&&fs[_0x369b46(0x102)](_0x123697),_0x11b854[_0x369b46(0xf7)][_0x369b46(0xfc)](_0x1eb7f1=>{const _0x21acfb=_0x369b46,{name:_0x3f1623,elementType:_0x14a9ee,properties:_0x3476c4}=_0x1eb7f1,_0x446ed3={'title':_0x3f1623,'description':_0x14a9ee,'type':_0x21acfb(0xf3),'properties':{'_type':{'const':_0x3f1623,'default':_0x3f1623},'_id':{'type':_0x21acfb(0xc6)},'properties':{'type':_0x21acfb(0xf3),'properties':{},'required':[]}},'required':['_type',_0x21acfb(0xda),_0x21acfb(0xdc)]},_0x30eb5b=_0x446ed3[_0x21acfb(0xdc)][_0x21acfb(0xdc)];_0x3476c4[_0x21acfb(0xfc)](_0xb9104a=>{const _0x326abd=_0x21acfb,_0x33f9a3=setPropertyTypeAndDefaultValue(_0x1eb7f1,_0xb9104a);_0xb9104a[_0x326abd(0xde)]&&_0xb9104a[_0x326abd(0x100)]!==_0x326abd(0xda)?_0x30eb5b[_0x326abd(0xbd)]['push'](_0xb9104a[_0x326abd(0x100)]):_0x33f9a3[_0x326abd(0xbf)]=!![],_0x30eb5b[_0x326abd(0xdc)][_0xb9104a[_0x326abd(0x100)]]=_0x33f9a3;});_0x14a9ee===_0x21acfb(0xc0)&&(_0x446ed3['properties'][_0x21acfb(0xdc)]['properties'][_0x21acfb(0x101)]={'const':_0x3f1623,'default':_0x3f1623},setSourceAndTargetSchemas(_0x1eb7f1,_0x11b854,_0x446ed3));const _0x11f730=JSON[_0x21acfb(0xfb)](_0x446ed3,null,'\x09');fs[_0x21acfb(0xd1)](_0x123697+'/'+_0x1eb7f1[_0x21acfb(0x100)]+'.json',_0x11f730,{'encoding':_0x21acfb(0xf0)});});},'validateSchema':_0x190410=>{const _0x4d1be8=_0x2901ac;if(!_0x190410[_0x4d1be8(0xda)])_0x190410[_0x4d1be8(0xda)]=NODEU['v1']();const _0xd0c115=_0x190410[_0x4d1be8(0x106)];_0xd0c115[_0x4d1be8(0xd0)]==='relationship'&&(_0x190410[_0x4d1be8(0xdc)][_0x4d1be8(0x101)]=_0xd0c115[_0x4d1be8(0x100)]);const _0x8025ec=getSchema(_0xd0c115[_0x4d1be8(0x100)]),_0x1ec2e1=ajv[_0x4d1be8(0xea)](_0x8025ec),_0x1d5873=_0x1ec2e1(_0x190410);if(!_0x1d5873)throw schemaError(_0x1ec2e1,_0x190410);return _0x1d5873;}};